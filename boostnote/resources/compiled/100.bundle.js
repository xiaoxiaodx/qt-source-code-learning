(window.webpackJsonp=window.webpackJsonp||[]).push([[100],{"./node_modules/codemirror/mode/textile/textile.js":function(t,e,n){!function(t){"use strict";var e={addition:"positive",attributes:"attribute",bold:"strong",cite:"keyword",code:"atom",definitionList:"number",deletion:"negative",div:"punctuation",em:"em",footnote:"variable",footCite:"qualifier",header:"header",html:"comment",image:"string",italic:"em",link:"link",linkDefinition:"link",list1:"variable-2",list2:"variable-3",list3:"keyword",notextile:"string-2",pre:"operator",p:"property",quote:"bracket",span:"quote",specialChar:"tag",strong:"strong",sub:"builtin",sup:"builtin",table:"variable-3",tableHeading:"operator"};function n(t,n,r){if("_"===r)return t.eat("_")?i(t,n,"italic",/__/,2):i(t,n,"em",/_/,1);if("*"===r)return t.eat("*")?i(t,n,"bold",/\*\*/,2):i(t,n,"strong",/\*/,1);if("["===r)return t.match(/\d+\]/)&&(n.footCite=!0),a(n);if("("===r&&t.match(/^(r|tm|c)\)/))return l(n,e.specialChar);if("<"===r&&t.match(/(\w+)[^>]+>[^<]+<\/\1>/))return l(n,e.html);if("?"===r&&t.eat("?"))return i(t,n,"cite",/\?\?/,2);if("="===r&&t.eat("="))return i(t,n,"notextile",/==/,2);if("-"===r&&!t.eat("-"))return i(t,n,"deletion",/-/,1);if("+"===r)return i(t,n,"addition",/\+/,1);if("~"===r)return i(t,n,"sub",/~/,1);if("^"===r)return i(t,n,"sup",/\^/,1);if("%"===r)return i(t,n,"span",/%/,1);if("@"===r)return i(t,n,"code",/@/,1);if("!"===r){var o=i(t,n,"image",/(?:\([^\)]+\))?!/,1);return t.match(/^:\S+/),o}return a(n)}function i(t,e,n,i,r){var l=t.pos>r?t.string.charAt(t.pos-r-1):null,o=t.peek();if(e[n]){if((!o||/\W/.test(o))&&l&&/\S/.test(l)){var u=a(e);return e[n]=!1,u}}else(!l||/\W/.test(l))&&o&&/\S/.test(o)&&t.match(new RegExp("^.*\\S"+i.source+"(?:\\W|$)"),!1)&&(e[n]=!0,e.mode=c.attributes);return a(e)}function a(t){var n=r(t);if(n)return n;var i=[];return t.layoutType&&i.push(e[t.layoutType]),i=i.concat(function(t){for(var n=[],i=1;i<arguments.length;++i)t[arguments[i]]&&n.push(e[arguments[i]]);return n}(t,"addition","bold","cite","code","deletion","em","footCite","image","italic","link","span","strong","sub","sup","table","tableHeading")),"header"===t.layoutType&&i.push(e.header+"-"+t.header),i.length?i.join(" "):null}function r(t){var n=t.layoutType;switch(n){case"notextile":case"code":case"pre":return e[n];default:return t.notextile?e.notextile+(n?" "+e[n]:""):null}}function l(t,e){var n=r(t);if(n)return n;var i=a(t);return e?i?i+" "+e:e:i}function o(t){var e=t.spanningLayout,n=t.layoutType;for(var i in t)t.hasOwnProperty(i)&&delete t[i];t.mode=c.newLayout,e&&(t.layoutType=n,t.spanningLayout=!0)}var u={cache:{},single:{bc:"bc",bq:"bq",definitionList:/- .*?:=+/,definitionListEnd:/.*=:\s*$/,div:"div",drawTable:/\|.*\|/,foot:/fn\d+/,header:/h[1-6]/,html:/\s*<(?:\/)?(\w+)(?:[^>]+)?>(?:[^<]+<\/\1>)?/,link:/[^"]+":\S/,linkDefinition:/\[[^\s\]]+\]\S+/,list:/(?:#+|\*+)/,notextile:"notextile",para:"p",pre:"pre",table:"table",tableCellAttributes:/[\/\\]\d+/,tableHeading:/\|_\./,tableText:/[^"_\*\[\(\?\+~\^%@|-]+/,text:/[^!"_=\*\[\(<\?\+~\^%@-]+/},attributes:{align:/(?:<>|<|>|=)/,selector:/\([^\(][^\)]+\)/,lang:/\[[^\[\]]+\]/,pad:/(?:\(+|\)+){1,2}/,css:/\{[^\}]+\}/},createRe:function(t){switch(t){case"drawTable":return u.makeRe("^",u.single.drawTable,"$");case"html":return u.makeRe("^",u.single.html,"(?:",u.single.html,")*","$");case"linkDefinition":return u.makeRe("^",u.single.linkDefinition,"$");case"listLayout":return u.makeRe("^",u.single.list,s("allAttributes"),"*\\s+");case"tableCellAttributes":return u.makeRe("^",u.choiceRe(u.single.tableCellAttributes,s("allAttributes")),"+\\.");case"type":return u.makeRe("^",s("allTypes"));case"typeLayout":return u.makeRe("^",s("allTypes"),s("allAttributes"),"*\\.\\.?","(\\s+|$)");case"attributes":return u.makeRe("^",s("allAttributes"),"+");case"allTypes":return u.choiceRe(u.single.div,u.single.foot,u.single.header,u.single.bc,u.single.bq,u.single.notextile,u.single.pre,u.single.table,u.single.para);case"allAttributes":return u.choiceRe(u.attributes.selector,u.attributes.css,u.attributes.lang,u.attributes.align,u.attributes.pad);default:return u.makeRe("^",u.single[t])}},makeRe:function(){for(var t="",e=0;e<arguments.length;++e){var n=arguments[e];t+="string"==typeof n?n:n.source}return new RegExp(t)},choiceRe:function(){for(var t=[arguments[0]],e=1;e<arguments.length;++e)t[2*e-1]="|",t[2*e]=arguments[e];return t.unshift("(?:"),t.push(")"),u.makeRe.apply(null,t)}};function s(t){return u.cache[t]||(u.cache[t]=u.createRe(t))}var c={newLayout:function(t,e){return t.match(s("typeLayout"),!1)?(e.spanningLayout=!1,(e.mode=c.blockType)(t,e)):(r(e)||(t.match(s("listLayout"),!1)?n=c.list:t.match(s("drawTable"),!1)?n=c.table:t.match(s("linkDefinition"),!1)?n=c.linkDefinition:t.match(s("definitionList"))?n=c.definitionList:t.match(s("html"),!1)&&(n=c.html)),(e.mode=n||c.text)(t,e));var n},blockType:function(t,e){var n,i;return e.layoutType=null,(n=t.match(s("type")))?((n=(i=n[0]).match(s("header")))?(e.layoutType="header",e.header=parseInt(n[0][1])):i.match(s("bq"))?e.layoutType="quote":i.match(s("bc"))?e.layoutType="code":i.match(s("foot"))?e.layoutType="footnote":i.match(s("notextile"))?e.layoutType="notextile":i.match(s("pre"))?e.layoutType="pre":i.match(s("div"))?e.layoutType="div":i.match(s("table"))&&(e.layoutType="table"),e.mode=c.attributes,a(e)):(e.mode=c.text)(t,e)},text:function(t,e){if(t.match(s("text")))return a(e);var i=t.next();return'"'===i?(e.mode=c.link)(t,e):n(t,e,i)},attributes:function(t,n){return n.mode=c.layoutLength,t.match(s("attributes"))?l(n,e.attributes):a(n)},layoutLength:function(t,e){return t.eat(".")&&t.eat(".")&&(e.spanningLayout=!0),e.mode=c.text,a(e)},list:function(t,e){var n=t.match(s("list"));e.listDepth=n[0].length;var i=(e.listDepth-1)%3;return e.layoutType=i?1===i?"list2":"list3":"list1",e.mode=c.attributes,a(e)},link:function(t,n){return n.mode=c.text,t.match(s("link"))?(t.match(/\S+/),l(n,e.link)):a(n)},linkDefinition:function(t,n){return t.skipToEnd(),l(n,e.linkDefinition)},definitionList:function(t,e){return t.match(s("definitionList")),e.layoutType="definitionList",t.match(/\s*$/)?e.spanningLayout=!0:e.mode=c.attributes,a(e)},html:function(t,n){return t.skipToEnd(),l(n,e.html)},table:function(t,e){return e.layoutType="table",(e.mode=c.tableCell)(t,e)},tableCell:function(t,e){return t.match(s("tableHeading"))?e.tableHeading=!0:t.eat("|"),e.mode=c.tableCellAttributes,a(e)},tableCellAttributes:function(t,n){return n.mode=c.tableText,t.match(s("tableCellAttributes"))?l(n,e.attributes):a(n)},tableText:function(t,e){return t.match(s("tableText"))?a(e):"|"===t.peek()?(e.mode=c.tableCell,a(e)):n(t,e,t.next())}};t.defineMode("textile",(function(){return{startState:function(){return{mode:c.newLayout}},token:function(t,e){return t.sol()&&function(t,e){e.mode=c.newLayout,e.tableHeading=!1,"definitionList"===e.layoutType&&e.spanningLayout&&t.match(s("definitionListEnd"),!1)&&(e.spanningLayout=!1)}(t,e),e.mode(t,e)},blankLine:o}})),t.defineMIME("text/x-textile","textile")}(n("./node_modules/codemirror/lib/codemirror.js"))}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29kZW1pcnJvci9tb2RlL3RleHRpbGUvdGV4dGlsZS5qcyJdLCJuYW1lcyI6WyJDb2RlTWlycm9yIiwiVE9LRU5fU1RZTEVTIiwiYWRkaXRpb24iLCJhdHRyaWJ1dGVzIiwiYm9sZCIsImNpdGUiLCJjb2RlIiwiZGVmaW5pdGlvbkxpc3QiLCJkZWxldGlvbiIsImRpdiIsImVtIiwiZm9vdG5vdGUiLCJmb290Q2l0ZSIsImhlYWRlciIsImh0bWwiLCJpbWFnZSIsIml0YWxpYyIsImxpbmsiLCJsaW5rRGVmaW5pdGlvbiIsImxpc3QxIiwibGlzdDIiLCJsaXN0MyIsIm5vdGV4dGlsZSIsInByZSIsInAiLCJxdW90ZSIsInNwYW4iLCJzcGVjaWFsQ2hhciIsInN0cm9uZyIsInN1YiIsInN1cCIsInRhYmxlIiwidGFibGVIZWFkaW5nIiwiaGFuZGxlUGhyYXNlTW9kaWZpZXIiLCJzdHJlYW0iLCJzdGF0ZSIsImNoIiwiZWF0IiwidG9nZ2xlUGhyYXNlTW9kaWZpZXIiLCJtYXRjaCIsInRva2VuU3R5bGVzIiwidG9rZW5TdHlsZXNXaXRoIiwidHlwZSIsInBocmFzZU1vZGlmaWVyIiwiY2xvc2VSRSIsIm9wZW5TaXplIiwiY2hhckJlZm9yZSIsInBvcyIsInN0cmluZyIsImNoYXJBdCIsImNoYXJBZnRlciIsInBlZWsiLCJ0ZXN0IiwiUmVnRXhwIiwic291cmNlIiwibW9kZSIsIk1vZGVzIiwiZGlzYWJsZWQiLCJ0ZXh0aWxlRGlzYWJsZWQiLCJzdHlsZXMiLCJsYXlvdXRUeXBlIiwicHVzaCIsImNvbmNhdCIsImkiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJhY3RpdmVTdHlsZXMiLCJqb2luIiwiZXh0cmFTdHlsZXMiLCJibGFua0xpbmUiLCJzcGFubmluZ0xheW91dCIsImtleSIsImhhc093blByb3BlcnR5IiwibmV3TGF5b3V0IiwiUkVzIiwiY2FjaGUiLCJzaW5nbGUiLCJiYyIsImJxIiwiZGVmaW5pdGlvbkxpc3RFbmQiLCJkcmF3VGFibGUiLCJmb290IiwibGlzdCIsInBhcmEiLCJ0YWJsZUNlbGxBdHRyaWJ1dGVzIiwidGFibGVUZXh0IiwidGV4dCIsImFsaWduIiwic2VsZWN0b3IiLCJsYW5nIiwicGFkIiwiY3NzIiwiY3JlYXRlUmUiLCJuYW1lIiwibWFrZVJlIiwiUkUiLCJjaG9pY2VSZSIsInBhdHRlcm4iLCJhcmciLCJwYXJ0cyIsInVuc2hpZnQiLCJhcHBseSIsImJsb2NrVHlwZSIsIm5ld01vZGUiLCJwYXJzZUludCIsIm5leHQiLCJsYXlvdXRMZW5ndGgiLCJsaXN0RGVwdGgiLCJsaXN0TW9kIiwic2tpcFRvRW5kIiwidGFibGVDZWxsIiwiZGVmaW5lTW9kZSIsInN0YXJ0U3RhdGUiLCJ0b2tlbiIsInNvbCIsInN0YXJ0TmV3TGluZSIsImRlZmluZU1JTUUiLCJtb2QiXSwibWFwcGluZ3MiOiJnSUFXRyxTQUFTQSxHQUNWLGFBRUEsSUFBSUMsRUFBZSxDQUNqQkMsU0FBVSxXQUNWQyxXQUFZLFlBQ1pDLEtBQU0sU0FDTkMsS0FBTSxVQUNOQyxLQUFNLE9BQ05DLGVBQWdCLFNBQ2hCQyxTQUFVLFdBQ1ZDLElBQUssY0FDTEMsR0FBSSxLQUNKQyxTQUFVLFdBQ1ZDLFNBQVUsWUFDVkMsT0FBUSxTQUNSQyxLQUFNLFVBQ05DLE1BQU8sU0FDUEMsT0FBUSxLQUNSQyxLQUFNLE9BQ05DLGVBQWdCLE9BQ2hCQyxNQUFPLGFBQ1BDLE1BQU8sYUFDUEMsTUFBTyxVQUNQQyxVQUFXLFdBQ1hDLElBQUssV0FDTEMsRUFBRyxXQUNIQyxNQUFPLFVBQ1BDLEtBQU0sUUFDTkMsWUFBYSxNQUNiQyxPQUFRLFNBQ1JDLElBQUssVUFDTEMsSUFBSyxVQUNMQyxNQUFPLGFBQ1BDLGFBQWMsWUFZaEIsU0FBU0MsRUFBcUJDLEVBQVFDLEVBQU9DLEdBQzNDLEdBQVcsTUFBUEEsRUFDRixPQUFJRixFQUFPRyxJQUFJLEtBQ05DLEVBQXFCSixFQUFRQyxFQUFPLFNBQVUsS0FBTSxHQUVwREcsRUFBcUJKLEVBQVFDLEVBQU8sS0FBTSxJQUFLLEdBRzFELEdBQVcsTUFBUEMsRUFDRixPQUFJRixFQUFPRyxJQUFJLEtBQ05DLEVBQXFCSixFQUFRQyxFQUFPLE9BQVEsT0FBUSxHQUV0REcsRUFBcUJKLEVBQVFDLEVBQU8sU0FBVSxLQUFNLEdBRzdELEdBQVcsTUFBUEMsRUFFRixPQURJRixFQUFPSyxNQUFNLFdBQVVKLEVBQU12QixVQUFXLEdBQ3JDNEIsRUFBWUwsR0FHckIsR0FBVyxNQUFQQyxHQUNTRixFQUFPSyxNQUFNLGVBRXRCLE9BQU9FLEVBQWdCTixFQUFPbEMsRUFBYTBCLGFBRy9DLEdBQVcsTUFBUFMsR0FBY0YsRUFBT0ssTUFBTSwwQkFDN0IsT0FBT0UsRUFBZ0JOLEVBQU9sQyxFQUFhYSxNQUU3QyxHQUFXLE1BQVBzQixHQUFjRixFQUFPRyxJQUFJLEtBQzNCLE9BQU9DLEVBQXFCSixFQUFRQyxFQUFPLE9BQVEsT0FBUSxHQUU3RCxHQUFXLE1BQVBDLEdBQWNGLEVBQU9HLElBQUksS0FDM0IsT0FBT0MsRUFBcUJKLEVBQVFDLEVBQU8sWUFBYSxLQUFNLEdBRWhFLEdBQVcsTUFBUEMsSUFBZUYsRUFBT0csSUFBSSxLQUM1QixPQUFPQyxFQUFxQkosRUFBUUMsRUFBTyxXQUFZLElBQUssR0FFOUQsR0FBVyxNQUFQQyxFQUNGLE9BQU9FLEVBQXFCSixFQUFRQyxFQUFPLFdBQVksS0FBTSxHQUUvRCxHQUFXLE1BQVBDLEVBQ0YsT0FBT0UsRUFBcUJKLEVBQVFDLEVBQU8sTUFBTyxJQUFLLEdBRXpELEdBQVcsTUFBUEMsRUFDRixPQUFPRSxFQUFxQkosRUFBUUMsRUFBTyxNQUFPLEtBQU0sR0FFMUQsR0FBVyxNQUFQQyxFQUNGLE9BQU9FLEVBQXFCSixFQUFRQyxFQUFPLE9BQVEsSUFBSyxHQUUxRCxHQUFXLE1BQVBDLEVBQ0YsT0FBT0UsRUFBcUJKLEVBQVFDLEVBQU8sT0FBUSxJQUFLLEdBRTFELEdBQVcsTUFBUEMsRUFBWSxDQUNkLElBQUlNLEVBQU9KLEVBQXFCSixFQUFRQyxFQUFPLFFBQVMsbUJBQW9CLEdBRTVFLE9BREFELEVBQU9LLE1BQU0sU0FDTkcsRUFFVCxPQUFPRixFQUFZTCxHQUdyQixTQUFTRyxFQUFxQkosRUFBUUMsRUFBT1EsRUFBZ0JDLEVBQVNDLEdBQ3BFLElBQUlDLEVBQWFaLEVBQU9hLElBQU1GLEVBQVdYLEVBQU9jLE9BQU9DLE9BQU9mLEVBQU9hLElBQU1GLEVBQVcsR0FBSyxLQUN2RkssRUFBWWhCLEVBQU9pQixPQUN2QixHQUFJaEIsRUFBTVEsSUFDUixLQUFNTyxHQUFhLEtBQUtFLEtBQUtGLEtBQWVKLEdBQWMsS0FBS00sS0FBS04sR0FBYSxDQUMvRSxJQUFJSixFQUFPRixFQUFZTCxHQUV2QixPQURBQSxFQUFNUSxJQUFrQixFQUNqQkQsU0FFRUksR0FBYyxLQUFLTSxLQUFLTixLQUFnQkksR0FBYSxLQUFLRSxLQUFLRixJQUNqRWhCLEVBQU9LLE1BQU0sSUFBSWMsT0FBTyxTQUFXVCxFQUFRVSxPQUFTLGNBQWMsS0FDM0VuQixFQUFNUSxJQUFrQixFQUN4QlIsRUFBTW9CLEtBQU9DLEVBQU1yRCxZQUVyQixPQUFPcUMsRUFBWUwsR0FHckIsU0FBU0ssRUFBWUwsR0FDbkIsSUFBSXNCLEVBQVdDLEVBQWdCdkIsR0FDL0IsR0FBSXNCLEVBQVUsT0FBT0EsRUFFckIsSUFBSUUsRUFBUyxHQVViLE9BVEl4QixFQUFNeUIsWUFBWUQsRUFBT0UsS0FBSzVELEVBQWFrQyxFQUFNeUIsYUFFckRELEVBQVNBLEVBQU9HLE9Bb0NsQixTQUFzQjNCLEdBRXBCLElBREEsSUFBSXdCLEVBQVMsR0FDSkksRUFBSSxFQUFHQSxFQUFJQyxVQUFVQyxTQUFVRixFQUNsQzVCLEVBQU02QixVQUFVRCxLQUNsQkosRUFBT0UsS0FBSzVELEVBQWErRCxVQUFVRCxLQUV2QyxPQUFPSixFQTFDZ0JPLENBQ3JCL0IsRUFBTyxXQUFZLE9BQVEsT0FBUSxPQUFRLFdBQVksS0FBTSxXQUM3RCxRQUFTLFNBQVUsT0FBUSxPQUFRLFNBQVUsTUFBTyxNQUFPLFFBQVMsaUJBRTdDLFdBQXJCQSxFQUFNeUIsWUFDUkQsRUFBT0UsS0FBSzVELEVBQWFZLE9BQVMsSUFBTXNCLEVBQU10QixRQUV6QzhDLEVBQU9NLE9BQVNOLEVBQU9RLEtBQUssS0FBTyxLQUc1QyxTQUFTVCxFQUFnQnZCLEdBQ3ZCLElBQUlPLEVBQU9QLEVBQU15QixXQUVqQixPQUFPbEIsR0FDUCxJQUFLLFlBQ0wsSUFBSyxPQUNMLElBQUssTUFDSCxPQUFPekMsRUFBYXlDLEdBQ3RCLFFBQ0UsT0FBSVAsRUFBTWIsVUFDRHJCLEVBQWFxQixXQUFhb0IsRUFBUSxJQUFNekMsRUFBYXlDLEdBQVMsSUFDaEUsTUFJWCxTQUFTRCxFQUFnQk4sRUFBT2lDLEdBQzlCLElBQUlYLEVBQVdDLEVBQWdCdkIsR0FDL0IsR0FBSXNCLEVBQVUsT0FBT0EsRUFFckIsSUFBSWYsRUFBT0YsRUFBWUwsR0FDdkIsT0FBSWlDLEVBQ0sxQixFQUFRQSxFQUFPLElBQU0wQixFQUFlQSxFQUVwQzFCLEVBWVgsU0FBUzJCLEVBQVVsQyxHQUNqQixJQUFJbUMsRUFBaUJuQyxFQUFNbUMsZUFBZ0I1QixFQUFPUCxFQUFNeUIsV0FFeEQsSUFBSyxJQUFJVyxLQUFPcEMsRUFBV0EsRUFBTXFDLGVBQWVELFdBQ3ZDcEMsRUFBTW9DLEdBRWZwQyxFQUFNb0IsS0FBT0MsRUFBTWlCLFVBQ2ZILElBQ0ZuQyxFQUFNeUIsV0FBYWxCLEVBQ25CUCxFQUFNbUMsZ0JBQWlCLEdBSTNCLElBQUlJLEVBQU0sQ0FDUkMsTUFBTyxHQUNQQyxPQUFRLENBQ05DLEdBQUksS0FDSkMsR0FBSSxLQUNKdkUsZUFBZ0IsV0FDaEJ3RSxrQkFBbUIsV0FDbkJ0RSxJQUFLLE1BQ0x1RSxVQUFXLFNBQ1hDLEtBQU0sUUFDTnBFLE9BQVEsU0FDUkMsS0FBTSw4Q0FDTkcsS0FBTSxZQUNOQyxlQUFnQixrQkFDaEJnRSxLQUFNLGFBQ041RCxVQUFXLFlBQ1g2RCxLQUFNLElBQ041RCxJQUFLLE1BQ0xRLE1BQU8sUUFDUHFELG9CQUFxQixZQUNyQnBELGFBQWMsUUFDZHFELFVBQVcsMEJBQ1hDLEtBQU0sNkJBRVJuRixXQUFZLENBQ1ZvRixNQUFPLGVBQ1BDLFNBQVUsa0JBQ1ZDLEtBQU0sZUFDTkMsSUFBSyxtQkFDTEMsSUFBSyxjQUVQQyxTQUFVLFNBQVNDLEdBQ2pCLE9BQVFBLEdBQ1IsSUFBSyxZQUNILE9BQU9uQixFQUFJb0IsT0FBTyxJQUFLcEIsRUFBSUUsT0FBT0ksVUFBVyxLQUMvQyxJQUFLLE9BQ0gsT0FBT04sRUFBSW9CLE9BQU8sSUFBS3BCLEVBQUlFLE9BQU85RCxLQUFNLE1BQU80RCxFQUFJRSxPQUFPOUQsS0FBTSxLQUFNLEtBQ3hFLElBQUssaUJBQ0gsT0FBTzRELEVBQUlvQixPQUFPLElBQUtwQixFQUFJRSxPQUFPMUQsZUFBZ0IsS0FDcEQsSUFBSyxhQUNILE9BQU93RCxFQUFJb0IsT0FBTyxJQUFLcEIsRUFBSUUsT0FBT00sS0FBTWEsRUFBRyxpQkFBa0IsU0FDL0QsSUFBSyxzQkFDSCxPQUFPckIsRUFBSW9CLE9BQU8sSUFBS3BCLEVBQUlzQixTQUFTdEIsRUFBSUUsT0FBT1Esb0JBQ1hXLEVBQUcsa0JBQW1CLFFBQzVELElBQUssT0FDSCxPQUFPckIsRUFBSW9CLE9BQU8sSUFBS0MsRUFBRyxhQUM1QixJQUFLLGFBQ0gsT0FBT3JCLEVBQUlvQixPQUFPLElBQUtDLEVBQUcsWUFBYUEsRUFBRyxpQkFDeEIsV0FBWSxZQUNoQyxJQUFLLGFBQ0gsT0FBT3JCLEVBQUlvQixPQUFPLElBQUtDLEVBQUcsaUJBQWtCLEtBRTlDLElBQUssV0FDSCxPQUFPckIsRUFBSXNCLFNBQVN0QixFQUFJRSxPQUFPbkUsSUFBS2lFLEVBQUlFLE9BQU9LLEtBQzNCUCxFQUFJRSxPQUFPL0QsT0FBUTZELEVBQUlFLE9BQU9DLEdBQUlILEVBQUlFLE9BQU9FLEdBQzdDSixFQUFJRSxPQUFPdEQsVUFBV29ELEVBQUlFLE9BQU9yRCxJQUFLbUQsRUFBSUUsT0FBTzdDLE1BQ2pEMkMsRUFBSUUsT0FBT08sTUFFakMsSUFBSyxnQkFDSCxPQUFPVCxFQUFJc0IsU0FBU3RCLEVBQUl2RSxXQUFXcUYsU0FBVWQsRUFBSXZFLFdBQVd3RixJQUN4Q2pCLEVBQUl2RSxXQUFXc0YsS0FBTWYsRUFBSXZFLFdBQVdvRixNQUFPYixFQUFJdkUsV0FBV3VGLEtBRWhGLFFBQ0UsT0FBT2hCLEVBQUlvQixPQUFPLElBQUtwQixFQUFJRSxPQUFPaUIsTUFHdENDLE9BQVEsV0FFTixJQURBLElBQUlHLEVBQVUsR0FDTGxDLEVBQUksRUFBR0EsRUFBSUMsVUFBVUMsU0FBVUYsRUFBRyxDQUN6QyxJQUFJbUMsRUFBTWxDLFVBQVVELEdBQ3BCa0MsR0FBMkIsaUJBQVJDLEVBQW9CQSxFQUFNQSxFQUFJNUMsT0FFbkQsT0FBTyxJQUFJRCxPQUFPNEMsSUFFcEJELFNBQVUsV0FFUixJQURBLElBQUlHLEVBQVEsQ0FBQ25DLFVBQVUsSUFDZEQsRUFBSSxFQUFHQSxFQUFJQyxVQUFVQyxTQUFVRixFQUN0Q29DLEVBQVUsRUFBSnBDLEVBQVEsR0FBSyxJQUNuQm9DLEVBQVUsRUFBSnBDLEdBQVNDLFVBQVVELEdBSzNCLE9BRkFvQyxFQUFNQyxRQUFRLE9BQ2RELEVBQU10QyxLQUFLLEtBQ0phLEVBQUlvQixPQUFPTyxNQUFNLEtBQU1GLEtBSWxDLFNBQVNKLEVBQUdGLEdBQ1YsT0FBUW5CLEVBQUlDLE1BQU1rQixLQUFVbkIsRUFBSUMsTUFBTWtCLEdBQVFuQixFQUFJa0IsU0FBU0MsSUFHN0QsSUFBSXJDLEVBQVEsQ0FDVmlCLFVBQVcsU0FBU3ZDLEVBQVFDLEdBQzFCLE9BQUlELEVBQU9LLE1BQU13RCxFQUFHLGVBQWUsSUFDakM1RCxFQUFNbUMsZ0JBQWlCLEdBQ2ZuQyxFQUFNb0IsS0FBT0MsRUFBTThDLFdBQVdwRSxFQUFRQyxLQUczQ3VCLEVBQWdCdkIsS0FDZkQsRUFBT0ssTUFBTXdELEVBQUcsZUFBZSxHQUNqQ1EsRUFBVS9DLEVBQU0wQixLQUNUaEQsRUFBT0ssTUFBTXdELEVBQUcsY0FBYyxHQUNyQ1EsRUFBVS9DLEVBQU16QixNQUNURyxFQUFPSyxNQUFNd0QsRUFBRyxtQkFBbUIsR0FDMUNRLEVBQVUvQyxFQUFNdEMsZUFDVGdCLEVBQU9LLE1BQU13RCxFQUFHLG1CQUN2QlEsRUFBVS9DLEVBQU1qRCxlQUNUMkIsRUFBT0ssTUFBTXdELEVBQUcsU0FBUyxLQUNoQ1EsRUFBVS9DLEVBQU0xQyxRQUVacUIsRUFBTW9CLEtBQVFnRCxHQUFXL0MsRUFBTThCLE1BQU9wRCxFQUFRQyxJQWJ0RCxJQUFJb0UsR0FnQk5ELFVBQVcsU0FBU3BFLEVBQVFDLEdBQzFCLElBQUlJLEVBQU9HLEVBR1gsT0FGQVAsRUFBTXlCLFdBQWEsTUFFZnJCLEVBQVFMLEVBQU9LLE1BQU13RCxFQUFHLFlBS3hCeEQsR0FKRkcsRUFBT0gsRUFBTSxJQUlFQSxNQUFNd0QsRUFBRyxhQUN4QjVELEVBQU15QixXQUFhLFNBQ25CekIsRUFBTXRCLE9BQVMyRixTQUFTakUsRUFBTSxHQUFHLEtBQ3hCRyxFQUFLSCxNQUFNd0QsRUFBRyxPQUN2QjVELEVBQU15QixXQUFhLFFBQ1ZsQixFQUFLSCxNQUFNd0QsRUFBRyxPQUN2QjVELEVBQU15QixXQUFhLE9BQ1ZsQixFQUFLSCxNQUFNd0QsRUFBRyxTQUN2QjVELEVBQU15QixXQUFhLFdBQ1ZsQixFQUFLSCxNQUFNd0QsRUFBRyxjQUN2QjVELEVBQU15QixXQUFhLFlBQ1ZsQixFQUFLSCxNQUFNd0QsRUFBRyxRQUN2QjVELEVBQU15QixXQUFhLE1BQ1ZsQixFQUFLSCxNQUFNd0QsRUFBRyxRQUN2QjVELEVBQU15QixXQUFhLE1BQ1ZsQixFQUFLSCxNQUFNd0QsRUFBRyxZQUN2QjVELEVBQU15QixXQUFhLFNBR3JCekIsRUFBTW9CLEtBQU9DLEVBQU1yRCxXQUNacUMsRUFBWUwsS0F0QlRBLEVBQU1vQixLQUFPQyxFQUFNOEIsTUFBTXBELEVBQVFDLElBeUI3Q21ELEtBQU0sU0FBU3BELEVBQVFDLEdBQ3JCLEdBQUlELEVBQU9LLE1BQU13RCxFQUFHLFNBQVUsT0FBT3ZELEVBQVlMLEdBRWpELElBQUlDLEVBQUtGLEVBQU91RSxPQUNoQixNQUFXLE1BQVByRSxHQUNNRCxFQUFNb0IsS0FBT0MsRUFBTXZDLE1BQU1pQixFQUFRQyxHQUNwQ0YsRUFBcUJDLEVBQVFDLEVBQU9DLElBRzdDakMsV0FBWSxTQUFTK0IsRUFBUUMsR0FHM0IsT0FGQUEsRUFBTW9CLEtBQU9DLEVBQU1rRCxhQUVmeEUsRUFBT0ssTUFBTXdELEVBQUcsZUFDWHRELEVBQWdCTixFQUFPbEMsRUFBYUUsWUFFcENxQyxFQUFZTCxJQUd2QnVFLGFBQWMsU0FBU3hFLEVBQVFDLEdBSzdCLE9BSklELEVBQU9HLElBQUksTUFBUUgsRUFBT0csSUFBSSxPQUNoQ0YsRUFBTW1DLGdCQUFpQixHQUV6Qm5DLEVBQU1vQixLQUFPQyxFQUFNOEIsS0FDWjlDLEVBQVlMLElBR3JCK0MsS0FBTSxTQUFTaEQsRUFBUUMsR0FDckIsSUFBSUksRUFBUUwsRUFBT0ssTUFBTXdELEVBQUcsU0FDNUI1RCxFQUFNd0UsVUFBWXBFLEVBQU0sR0FBRzBCLE9BQzNCLElBQUkyQyxHQUFXekUsRUFBTXdFLFVBQVksR0FBSyxFQVN0QyxPQUxFeEUsRUFBTXlCLFdBSEhnRCxFQUVnQixJQUFaQSxFQUNZLFFBRUEsUUFKQSxRQU1yQnpFLEVBQU1vQixLQUFPQyxFQUFNckQsV0FDWnFDLEVBQVlMLElBR3JCbEIsS0FBTSxTQUFTaUIsRUFBUUMsR0FFckIsT0FEQUEsRUFBTW9CLEtBQU9DLEVBQU04QixLQUNmcEQsRUFBT0ssTUFBTXdELEVBQUcsVUFDbEI3RCxFQUFPSyxNQUFNLE9BQ05FLEVBQWdCTixFQUFPbEMsRUFBYWdCLE9BRXRDdUIsRUFBWUwsSUFHckJqQixlQUFnQixTQUFTZ0IsRUFBUUMsR0FFL0IsT0FEQUQsRUFBTzJFLFlBQ0FwRSxFQUFnQk4sRUFBT2xDLEVBQWFpQixpQkFHN0NYLGVBQWdCLFNBQVMyQixFQUFRQyxHQVUvQixPQVRBRCxFQUFPSyxNQUFNd0QsRUFBRyxtQkFFaEI1RCxFQUFNeUIsV0FBYSxpQkFFZjFCLEVBQU9LLE1BQU0sUUFDZkosRUFBTW1DLGdCQUFpQixFQUV2Qm5DLEVBQU1vQixLQUFPQyxFQUFNckQsV0FFZHFDLEVBQVlMLElBR3JCckIsS0FBTSxTQUFTb0IsRUFBUUMsR0FFckIsT0FEQUQsRUFBTzJFLFlBQ0FwRSxFQUFnQk4sRUFBT2xDLEVBQWFhLE9BRzdDaUIsTUFBTyxTQUFTRyxFQUFRQyxHQUV0QixPQURBQSxFQUFNeUIsV0FBYSxTQUNYekIsRUFBTW9CLEtBQU9DLEVBQU1zRCxXQUFXNUUsRUFBUUMsSUFHaEQyRSxVQUFXLFNBQVM1RSxFQUFRQyxHQU8xQixPQU5JRCxFQUFPSyxNQUFNd0QsRUFBRyxpQkFDbEI1RCxFQUFNSCxjQUFlLEVBRXJCRSxFQUFPRyxJQUFJLEtBRWJGLEVBQU1vQixLQUFPQyxFQUFNNEIsb0JBQ1o1QyxFQUFZTCxJQUdyQmlELG9CQUFxQixTQUFTbEQsRUFBUUMsR0FHcEMsT0FGQUEsRUFBTW9CLEtBQU9DLEVBQU02QixVQUVmbkQsRUFBT0ssTUFBTXdELEVBQUcsd0JBQ1h0RCxFQUFnQk4sRUFBT2xDLEVBQWFFLFlBRXBDcUMsRUFBWUwsSUFHdkJrRCxVQUFXLFNBQVNuRCxFQUFRQyxHQUMxQixPQUFJRCxFQUFPSyxNQUFNd0QsRUFBRyxjQUNYdkQsRUFBWUwsR0FFQyxNQUFsQkQsRUFBT2lCLFFBQ1RoQixFQUFNb0IsS0FBT0MsRUFBTXNELFVBQ1p0RSxFQUFZTCxJQUVkRixFQUFxQkMsRUFBUUMsRUFBT0QsRUFBT3VFLFVBSXREekcsRUFBVytHLFdBQVcsV0FBVyxXQUMvQixNQUFPLENBQ0xDLFdBQVksV0FDVixNQUFPLENBQUV6RCxLQUFNQyxFQUFNaUIsWUFFdkJ3QyxNQUFPLFNBQVMvRSxFQUFRQyxHQUV0QixPQURJRCxFQUFPZ0YsT0E1WmpCLFNBQXNCaEYsRUFBUUMsR0FDNUJBLEVBQU1vQixLQUFPQyxFQUFNaUIsVUFDbkJ0QyxFQUFNSCxjQUFlLEVBRUksbUJBQXJCRyxFQUFNeUIsWUFBbUN6QixFQUFNbUMsZ0JBQy9DcEMsRUFBT0ssTUFBTXdELEVBQUcsc0JBQXNCLEtBQ3hDNUQsRUFBTW1DLGdCQUFpQixHQXNaSDZDLENBQWFqRixFQUFRQyxHQUNoQ0EsRUFBTW9CLEtBQUtyQixFQUFRQyxJQUU1QmtDLFVBQVdBLE1BSWZyRSxFQUFXb0gsV0FBVyxpQkFBa0IsV0E5Y3RDQyxDQUFJLEVBQVEiLCJmaWxlIjoiMTAwLmJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIENvZGVNaXJyb3IsIGNvcHlyaWdodCAoYykgYnkgTWFyaWpuIEhhdmVyYmVrZSBhbmQgb3RoZXJzXG4vLyBEaXN0cmlidXRlZCB1bmRlciBhbiBNSVQgbGljZW5zZTogaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC9MSUNFTlNFXG5cbihmdW5jdGlvbihtb2QpIHtcbiAgaWYgKHR5cGVvZiBleHBvcnRzID09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZSA9PSBcIm9iamVjdFwiKSB7IC8vIENvbW1vbkpTXG4gICAgbW9kKHJlcXVpcmUoXCIuLi8uLi9saWIvY29kZW1pcnJvclwiKSk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkgeyAvLyBBTURcbiAgICBkZWZpbmUoW1wiLi4vLi4vbGliL2NvZGVtaXJyb3JcIl0sIG1vZCk7XG4gIH0gZWxzZSB7IC8vIFBsYWluIGJyb3dzZXIgZW52XG4gICAgbW9kKENvZGVNaXJyb3IpO1xuICB9XG59KShmdW5jdGlvbihDb2RlTWlycm9yKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBUT0tFTl9TVFlMRVMgPSB7XG4gICAgYWRkaXRpb246IFwicG9zaXRpdmVcIixcbiAgICBhdHRyaWJ1dGVzOiBcImF0dHJpYnV0ZVwiLFxuICAgIGJvbGQ6IFwic3Ryb25nXCIsXG4gICAgY2l0ZTogXCJrZXl3b3JkXCIsXG4gICAgY29kZTogXCJhdG9tXCIsXG4gICAgZGVmaW5pdGlvbkxpc3Q6IFwibnVtYmVyXCIsXG4gICAgZGVsZXRpb246IFwibmVnYXRpdmVcIixcbiAgICBkaXY6IFwicHVuY3R1YXRpb25cIixcbiAgICBlbTogXCJlbVwiLFxuICAgIGZvb3Rub3RlOiBcInZhcmlhYmxlXCIsXG4gICAgZm9vdENpdGU6IFwicXVhbGlmaWVyXCIsXG4gICAgaGVhZGVyOiBcImhlYWRlclwiLFxuICAgIGh0bWw6IFwiY29tbWVudFwiLFxuICAgIGltYWdlOiBcInN0cmluZ1wiLFxuICAgIGl0YWxpYzogXCJlbVwiLFxuICAgIGxpbms6IFwibGlua1wiLFxuICAgIGxpbmtEZWZpbml0aW9uOiBcImxpbmtcIixcbiAgICBsaXN0MTogXCJ2YXJpYWJsZS0yXCIsXG4gICAgbGlzdDI6IFwidmFyaWFibGUtM1wiLFxuICAgIGxpc3QzOiBcImtleXdvcmRcIixcbiAgICBub3RleHRpbGU6IFwic3RyaW5nLTJcIixcbiAgICBwcmU6IFwib3BlcmF0b3JcIixcbiAgICBwOiBcInByb3BlcnR5XCIsXG4gICAgcXVvdGU6IFwiYnJhY2tldFwiLFxuICAgIHNwYW46IFwicXVvdGVcIixcbiAgICBzcGVjaWFsQ2hhcjogXCJ0YWdcIixcbiAgICBzdHJvbmc6IFwic3Ryb25nXCIsXG4gICAgc3ViOiBcImJ1aWx0aW5cIixcbiAgICBzdXA6IFwiYnVpbHRpblwiLFxuICAgIHRhYmxlOiBcInZhcmlhYmxlLTNcIixcbiAgICB0YWJsZUhlYWRpbmc6IFwib3BlcmF0b3JcIlxuICB9O1xuXG4gIGZ1bmN0aW9uIHN0YXJ0TmV3TGluZShzdHJlYW0sIHN0YXRlKSB7XG4gICAgc3RhdGUubW9kZSA9IE1vZGVzLm5ld0xheW91dDtcbiAgICBzdGF0ZS50YWJsZUhlYWRpbmcgPSBmYWxzZTtcblxuICAgIGlmIChzdGF0ZS5sYXlvdXRUeXBlID09PSBcImRlZmluaXRpb25MaXN0XCIgJiYgc3RhdGUuc3Bhbm5pbmdMYXlvdXQgJiZcbiAgICAgICAgc3RyZWFtLm1hdGNoKFJFKFwiZGVmaW5pdGlvbkxpc3RFbmRcIiksIGZhbHNlKSlcbiAgICAgIHN0YXRlLnNwYW5uaW5nTGF5b3V0ID0gZmFsc2U7XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVQaHJhc2VNb2RpZmllcihzdHJlYW0sIHN0YXRlLCBjaCkge1xuICAgIGlmIChjaCA9PT0gXCJfXCIpIHtcbiAgICAgIGlmIChzdHJlYW0uZWF0KFwiX1wiKSlcbiAgICAgICAgcmV0dXJuIHRvZ2dsZVBocmFzZU1vZGlmaWVyKHN0cmVhbSwgc3RhdGUsIFwiaXRhbGljXCIsIC9fXy8sIDIpO1xuICAgICAgZWxzZVxuICAgICAgICByZXR1cm4gdG9nZ2xlUGhyYXNlTW9kaWZpZXIoc3RyZWFtLCBzdGF0ZSwgXCJlbVwiLCAvXy8sIDEpO1xuICAgIH1cblxuICAgIGlmIChjaCA9PT0gXCIqXCIpIHtcbiAgICAgIGlmIChzdHJlYW0uZWF0KFwiKlwiKSkge1xuICAgICAgICByZXR1cm4gdG9nZ2xlUGhyYXNlTW9kaWZpZXIoc3RyZWFtLCBzdGF0ZSwgXCJib2xkXCIsIC9cXCpcXCovLCAyKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0b2dnbGVQaHJhc2VNb2RpZmllcihzdHJlYW0sIHN0YXRlLCBcInN0cm9uZ1wiLCAvXFwqLywgMSk7XG4gICAgfVxuXG4gICAgaWYgKGNoID09PSBcIltcIikge1xuICAgICAgaWYgKHN0cmVhbS5tYXRjaCgvXFxkK1xcXS8pKSBzdGF0ZS5mb290Q2l0ZSA9IHRydWU7XG4gICAgICByZXR1cm4gdG9rZW5TdHlsZXMoc3RhdGUpO1xuICAgIH1cblxuICAgIGlmIChjaCA9PT0gXCIoXCIpIHtcbiAgICAgIHZhciBzcGVjID0gc3RyZWFtLm1hdGNoKC9eKHJ8dG18YylcXCkvKTtcbiAgICAgIGlmIChzcGVjKVxuICAgICAgICByZXR1cm4gdG9rZW5TdHlsZXNXaXRoKHN0YXRlLCBUT0tFTl9TVFlMRVMuc3BlY2lhbENoYXIpO1xuICAgIH1cblxuICAgIGlmIChjaCA9PT0gXCI8XCIgJiYgc3RyZWFtLm1hdGNoKC8oXFx3KylbXj5dKz5bXjxdKzxcXC9cXDE+LykpXG4gICAgICByZXR1cm4gdG9rZW5TdHlsZXNXaXRoKHN0YXRlLCBUT0tFTl9TVFlMRVMuaHRtbCk7XG5cbiAgICBpZiAoY2ggPT09IFwiP1wiICYmIHN0cmVhbS5lYXQoXCI/XCIpKVxuICAgICAgcmV0dXJuIHRvZ2dsZVBocmFzZU1vZGlmaWVyKHN0cmVhbSwgc3RhdGUsIFwiY2l0ZVwiLCAvXFw/XFw/LywgMik7XG5cbiAgICBpZiAoY2ggPT09IFwiPVwiICYmIHN0cmVhbS5lYXQoXCI9XCIpKVxuICAgICAgcmV0dXJuIHRvZ2dsZVBocmFzZU1vZGlmaWVyKHN0cmVhbSwgc3RhdGUsIFwibm90ZXh0aWxlXCIsIC89PS8sIDIpO1xuXG4gICAgaWYgKGNoID09PSBcIi1cIiAmJiAhc3RyZWFtLmVhdChcIi1cIikpXG4gICAgICByZXR1cm4gdG9nZ2xlUGhyYXNlTW9kaWZpZXIoc3RyZWFtLCBzdGF0ZSwgXCJkZWxldGlvblwiLCAvLS8sIDEpO1xuXG4gICAgaWYgKGNoID09PSBcIitcIilcbiAgICAgIHJldHVybiB0b2dnbGVQaHJhc2VNb2RpZmllcihzdHJlYW0sIHN0YXRlLCBcImFkZGl0aW9uXCIsIC9cXCsvLCAxKTtcblxuICAgIGlmIChjaCA9PT0gXCJ+XCIpXG4gICAgICByZXR1cm4gdG9nZ2xlUGhyYXNlTW9kaWZpZXIoc3RyZWFtLCBzdGF0ZSwgXCJzdWJcIiwgL34vLCAxKTtcblxuICAgIGlmIChjaCA9PT0gXCJeXCIpXG4gICAgICByZXR1cm4gdG9nZ2xlUGhyYXNlTW9kaWZpZXIoc3RyZWFtLCBzdGF0ZSwgXCJzdXBcIiwgL1xcXi8sIDEpO1xuXG4gICAgaWYgKGNoID09PSBcIiVcIilcbiAgICAgIHJldHVybiB0b2dnbGVQaHJhc2VNb2RpZmllcihzdHJlYW0sIHN0YXRlLCBcInNwYW5cIiwgLyUvLCAxKTtcblxuICAgIGlmIChjaCA9PT0gXCJAXCIpXG4gICAgICByZXR1cm4gdG9nZ2xlUGhyYXNlTW9kaWZpZXIoc3RyZWFtLCBzdGF0ZSwgXCJjb2RlXCIsIC9ALywgMSk7XG5cbiAgICBpZiAoY2ggPT09IFwiIVwiKSB7XG4gICAgICB2YXIgdHlwZSA9IHRvZ2dsZVBocmFzZU1vZGlmaWVyKHN0cmVhbSwgc3RhdGUsIFwiaW1hZ2VcIiwgLyg/OlxcKFteXFwpXStcXCkpPyEvLCAxKTtcbiAgICAgIHN0cmVhbS5tYXRjaCgvXjpcXFMrLyk7IC8vIG9wdGlvbmFsIFVybCBwb3J0aW9uXG4gICAgICByZXR1cm4gdHlwZTtcbiAgICB9XG4gICAgcmV0dXJuIHRva2VuU3R5bGVzKHN0YXRlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRvZ2dsZVBocmFzZU1vZGlmaWVyKHN0cmVhbSwgc3RhdGUsIHBocmFzZU1vZGlmaWVyLCBjbG9zZVJFLCBvcGVuU2l6ZSkge1xuICAgIHZhciBjaGFyQmVmb3JlID0gc3RyZWFtLnBvcyA+IG9wZW5TaXplID8gc3RyZWFtLnN0cmluZy5jaGFyQXQoc3RyZWFtLnBvcyAtIG9wZW5TaXplIC0gMSkgOiBudWxsO1xuICAgIHZhciBjaGFyQWZ0ZXIgPSBzdHJlYW0ucGVlaygpO1xuICAgIGlmIChzdGF0ZVtwaHJhc2VNb2RpZmllcl0pIHtcbiAgICAgIGlmICgoIWNoYXJBZnRlciB8fCAvXFxXLy50ZXN0KGNoYXJBZnRlcikpICYmIGNoYXJCZWZvcmUgJiYgL1xcUy8udGVzdChjaGFyQmVmb3JlKSkge1xuICAgICAgICB2YXIgdHlwZSA9IHRva2VuU3R5bGVzKHN0YXRlKTtcbiAgICAgICAgc3RhdGVbcGhyYXNlTW9kaWZpZXJdID0gZmFsc2U7XG4gICAgICAgIHJldHVybiB0eXBlO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoKCFjaGFyQmVmb3JlIHx8IC9cXFcvLnRlc3QoY2hhckJlZm9yZSkpICYmIGNoYXJBZnRlciAmJiAvXFxTLy50ZXN0KGNoYXJBZnRlcikgJiZcbiAgICAgICAgICAgICAgIHN0cmVhbS5tYXRjaChuZXcgUmVnRXhwKFwiXi4qXFxcXFNcIiArIGNsb3NlUkUuc291cmNlICsgXCIoPzpcXFxcV3wkKVwiKSwgZmFsc2UpKSB7XG4gICAgICBzdGF0ZVtwaHJhc2VNb2RpZmllcl0gPSB0cnVlO1xuICAgICAgc3RhdGUubW9kZSA9IE1vZGVzLmF0dHJpYnV0ZXM7XG4gICAgfVxuICAgIHJldHVybiB0b2tlblN0eWxlcyhzdGF0ZSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gdG9rZW5TdHlsZXMoc3RhdGUpIHtcbiAgICB2YXIgZGlzYWJsZWQgPSB0ZXh0aWxlRGlzYWJsZWQoc3RhdGUpO1xuICAgIGlmIChkaXNhYmxlZCkgcmV0dXJuIGRpc2FibGVkO1xuXG4gICAgdmFyIHN0eWxlcyA9IFtdO1xuICAgIGlmIChzdGF0ZS5sYXlvdXRUeXBlKSBzdHlsZXMucHVzaChUT0tFTl9TVFlMRVNbc3RhdGUubGF5b3V0VHlwZV0pO1xuXG4gICAgc3R5bGVzID0gc3R5bGVzLmNvbmNhdChhY3RpdmVTdHlsZXMoXG4gICAgICBzdGF0ZSwgXCJhZGRpdGlvblwiLCBcImJvbGRcIiwgXCJjaXRlXCIsIFwiY29kZVwiLCBcImRlbGV0aW9uXCIsIFwiZW1cIiwgXCJmb290Q2l0ZVwiLFxuICAgICAgXCJpbWFnZVwiLCBcIml0YWxpY1wiLCBcImxpbmtcIiwgXCJzcGFuXCIsIFwic3Ryb25nXCIsIFwic3ViXCIsIFwic3VwXCIsIFwidGFibGVcIiwgXCJ0YWJsZUhlYWRpbmdcIikpO1xuXG4gICAgaWYgKHN0YXRlLmxheW91dFR5cGUgPT09IFwiaGVhZGVyXCIpXG4gICAgICBzdHlsZXMucHVzaChUT0tFTl9TVFlMRVMuaGVhZGVyICsgXCItXCIgKyBzdGF0ZS5oZWFkZXIpO1xuXG4gICAgcmV0dXJuIHN0eWxlcy5sZW5ndGggPyBzdHlsZXMuam9pbihcIiBcIikgOiBudWxsO1xuICB9XG5cbiAgZnVuY3Rpb24gdGV4dGlsZURpc2FibGVkKHN0YXRlKSB7XG4gICAgdmFyIHR5cGUgPSBzdGF0ZS5sYXlvdXRUeXBlO1xuXG4gICAgc3dpdGNoKHR5cGUpIHtcbiAgICBjYXNlIFwibm90ZXh0aWxlXCI6XG4gICAgY2FzZSBcImNvZGVcIjpcbiAgICBjYXNlIFwicHJlXCI6XG4gICAgICByZXR1cm4gVE9LRU5fU1RZTEVTW3R5cGVdO1xuICAgIGRlZmF1bHQ6XG4gICAgICBpZiAoc3RhdGUubm90ZXh0aWxlKVxuICAgICAgICByZXR1cm4gVE9LRU5fU1RZTEVTLm5vdGV4dGlsZSArICh0eXBlID8gKFwiIFwiICsgVE9LRU5fU1RZTEVTW3R5cGVdKSA6IFwiXCIpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdG9rZW5TdHlsZXNXaXRoKHN0YXRlLCBleHRyYVN0eWxlcykge1xuICAgIHZhciBkaXNhYmxlZCA9IHRleHRpbGVEaXNhYmxlZChzdGF0ZSk7XG4gICAgaWYgKGRpc2FibGVkKSByZXR1cm4gZGlzYWJsZWQ7XG5cbiAgICB2YXIgdHlwZSA9IHRva2VuU3R5bGVzKHN0YXRlKTtcbiAgICBpZiAoZXh0cmFTdHlsZXMpXG4gICAgICByZXR1cm4gdHlwZSA/ICh0eXBlICsgXCIgXCIgKyBleHRyYVN0eWxlcykgOiBleHRyYVN0eWxlcztcbiAgICBlbHNlXG4gICAgICByZXR1cm4gdHlwZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFjdGl2ZVN0eWxlcyhzdGF0ZSkge1xuICAgIHZhciBzdHlsZXMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7ICsraSkge1xuICAgICAgaWYgKHN0YXRlW2FyZ3VtZW50c1tpXV0pXG4gICAgICAgIHN0eWxlcy5wdXNoKFRPS0VOX1NUWUxFU1thcmd1bWVudHNbaV1dKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0eWxlcztcbiAgfVxuXG4gIGZ1bmN0aW9uIGJsYW5rTGluZShzdGF0ZSkge1xuICAgIHZhciBzcGFubmluZ0xheW91dCA9IHN0YXRlLnNwYW5uaW5nTGF5b3V0LCB0eXBlID0gc3RhdGUubGF5b3V0VHlwZTtcblxuICAgIGZvciAodmFyIGtleSBpbiBzdGF0ZSkgaWYgKHN0YXRlLmhhc093blByb3BlcnR5KGtleSkpXG4gICAgICBkZWxldGUgc3RhdGVba2V5XTtcblxuICAgIHN0YXRlLm1vZGUgPSBNb2Rlcy5uZXdMYXlvdXQ7XG4gICAgaWYgKHNwYW5uaW5nTGF5b3V0KSB7XG4gICAgICBzdGF0ZS5sYXlvdXRUeXBlID0gdHlwZTtcbiAgICAgIHN0YXRlLnNwYW5uaW5nTGF5b3V0ID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICB2YXIgUkVzID0ge1xuICAgIGNhY2hlOiB7fSxcbiAgICBzaW5nbGU6IHtcbiAgICAgIGJjOiBcImJjXCIsXG4gICAgICBicTogXCJicVwiLFxuICAgICAgZGVmaW5pdGlvbkxpc3Q6IC8tIC4qPzo9Ky8sXG4gICAgICBkZWZpbml0aW9uTGlzdEVuZDogLy4qPTpcXHMqJC8sXG4gICAgICBkaXY6IFwiZGl2XCIsXG4gICAgICBkcmF3VGFibGU6IC9cXHwuKlxcfC8sXG4gICAgICBmb290OiAvZm5cXGQrLyxcbiAgICAgIGhlYWRlcjogL2hbMS02XS8sXG4gICAgICBodG1sOiAvXFxzKjwoPzpcXC8pPyhcXHcrKSg/OltePl0rKT8+KD86W148XSs8XFwvXFwxPik/LyxcbiAgICAgIGxpbms6IC9bXlwiXStcIjpcXFMvLFxuICAgICAgbGlua0RlZmluaXRpb246IC9cXFtbXlxcc1xcXV0rXFxdXFxTKy8sXG4gICAgICBsaXN0OiAvKD86Iyt8XFwqKykvLFxuICAgICAgbm90ZXh0aWxlOiBcIm5vdGV4dGlsZVwiLFxuICAgICAgcGFyYTogXCJwXCIsXG4gICAgICBwcmU6IFwicHJlXCIsXG4gICAgICB0YWJsZTogXCJ0YWJsZVwiLFxuICAgICAgdGFibGVDZWxsQXR0cmlidXRlczogL1tcXC9cXFxcXVxcZCsvLFxuICAgICAgdGFibGVIZWFkaW5nOiAvXFx8X1xcLi8sXG4gICAgICB0YWJsZVRleHQ6IC9bXlwiX1xcKlxcW1xcKFxcP1xcK35cXF4lQHwtXSsvLFxuICAgICAgdGV4dDogL1teIVwiXz1cXCpcXFtcXCg8XFw/XFwrflxcXiVALV0rL1xuICAgIH0sXG4gICAgYXR0cmlidXRlczoge1xuICAgICAgYWxpZ246IC8oPzo8Pnw8fD58PSkvLFxuICAgICAgc2VsZWN0b3I6IC9cXChbXlxcKF1bXlxcKV0rXFwpLyxcbiAgICAgIGxhbmc6IC9cXFtbXlxcW1xcXV0rXFxdLyxcbiAgICAgIHBhZDogLyg/OlxcKCt8XFwpKyl7MSwyfS8sXG4gICAgICBjc3M6IC9cXHtbXlxcfV0rXFx9L1xuICAgIH0sXG4gICAgY3JlYXRlUmU6IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHN3aXRjaCAobmFtZSkge1xuICAgICAgY2FzZSBcImRyYXdUYWJsZVwiOlxuICAgICAgICByZXR1cm4gUkVzLm1ha2VSZShcIl5cIiwgUkVzLnNpbmdsZS5kcmF3VGFibGUsIFwiJFwiKTtcbiAgICAgIGNhc2UgXCJodG1sXCI6XG4gICAgICAgIHJldHVybiBSRXMubWFrZVJlKFwiXlwiLCBSRXMuc2luZ2xlLmh0bWwsIFwiKD86XCIsIFJFcy5zaW5nbGUuaHRtbCwgXCIpKlwiLCBcIiRcIik7XG4gICAgICBjYXNlIFwibGlua0RlZmluaXRpb25cIjpcbiAgICAgICAgcmV0dXJuIFJFcy5tYWtlUmUoXCJeXCIsIFJFcy5zaW5nbGUubGlua0RlZmluaXRpb24sIFwiJFwiKTtcbiAgICAgIGNhc2UgXCJsaXN0TGF5b3V0XCI6XG4gICAgICAgIHJldHVybiBSRXMubWFrZVJlKFwiXlwiLCBSRXMuc2luZ2xlLmxpc3QsIFJFKFwiYWxsQXR0cmlidXRlc1wiKSwgXCIqXFxcXHMrXCIpO1xuICAgICAgY2FzZSBcInRhYmxlQ2VsbEF0dHJpYnV0ZXNcIjpcbiAgICAgICAgcmV0dXJuIFJFcy5tYWtlUmUoXCJeXCIsIFJFcy5jaG9pY2VSZShSRXMuc2luZ2xlLnRhYmxlQ2VsbEF0dHJpYnV0ZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJFKFwiYWxsQXR0cmlidXRlc1wiKSksIFwiK1xcXFwuXCIpO1xuICAgICAgY2FzZSBcInR5cGVcIjpcbiAgICAgICAgcmV0dXJuIFJFcy5tYWtlUmUoXCJeXCIsIFJFKFwiYWxsVHlwZXNcIikpO1xuICAgICAgY2FzZSBcInR5cGVMYXlvdXRcIjpcbiAgICAgICAgcmV0dXJuIFJFcy5tYWtlUmUoXCJeXCIsIFJFKFwiYWxsVHlwZXNcIiksIFJFKFwiYWxsQXR0cmlidXRlc1wiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXCIqXFxcXC5cXFxcLj9cIiwgXCIoXFxcXHMrfCQpXCIpO1xuICAgICAgY2FzZSBcImF0dHJpYnV0ZXNcIjpcbiAgICAgICAgcmV0dXJuIFJFcy5tYWtlUmUoXCJeXCIsIFJFKFwiYWxsQXR0cmlidXRlc1wiKSwgXCIrXCIpO1xuXG4gICAgICBjYXNlIFwiYWxsVHlwZXNcIjpcbiAgICAgICAgcmV0dXJuIFJFcy5jaG9pY2VSZShSRXMuc2luZ2xlLmRpdiwgUkVzLnNpbmdsZS5mb290LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJFcy5zaW5nbGUuaGVhZGVyLCBSRXMuc2luZ2xlLmJjLCBSRXMuc2luZ2xlLmJxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJFcy5zaW5nbGUubm90ZXh0aWxlLCBSRXMuc2luZ2xlLnByZSwgUkVzLnNpbmdsZS50YWJsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSRXMuc2luZ2xlLnBhcmEpO1xuXG4gICAgICBjYXNlIFwiYWxsQXR0cmlidXRlc1wiOlxuICAgICAgICByZXR1cm4gUkVzLmNob2ljZVJlKFJFcy5hdHRyaWJ1dGVzLnNlbGVjdG9yLCBSRXMuYXR0cmlidXRlcy5jc3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUkVzLmF0dHJpYnV0ZXMubGFuZywgUkVzLmF0dHJpYnV0ZXMuYWxpZ24sIFJFcy5hdHRyaWJ1dGVzLnBhZCk7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBSRXMubWFrZVJlKFwiXlwiLCBSRXMuc2luZ2xlW25hbWVdKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIG1ha2VSZTogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcGF0dGVybiA9IFwiXCI7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgYXJnID0gYXJndW1lbnRzW2ldO1xuICAgICAgICBwYXR0ZXJuICs9ICh0eXBlb2YgYXJnID09PSBcInN0cmluZ1wiKSA/IGFyZyA6IGFyZy5zb3VyY2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3IFJlZ0V4cChwYXR0ZXJuKTtcbiAgICB9LFxuICAgIGNob2ljZVJlOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBwYXJ0cyA9IFthcmd1bWVudHNbMF1dO1xuICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgcGFydHNbaSAqIDIgLSAxXSA9IFwifFwiO1xuICAgICAgICBwYXJ0c1tpICogMl0gPSBhcmd1bWVudHNbaV07XG4gICAgICB9XG5cbiAgICAgIHBhcnRzLnVuc2hpZnQoXCIoPzpcIik7XG4gICAgICBwYXJ0cy5wdXNoKFwiKVwiKTtcbiAgICAgIHJldHVybiBSRXMubWFrZVJlLmFwcGx5KG51bGwsIHBhcnRzKTtcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gUkUobmFtZSkge1xuICAgIHJldHVybiAoUkVzLmNhY2hlW25hbWVdIHx8IChSRXMuY2FjaGVbbmFtZV0gPSBSRXMuY3JlYXRlUmUobmFtZSkpKTtcbiAgfVxuXG4gIHZhciBNb2RlcyA9IHtcbiAgICBuZXdMYXlvdXQ6IGZ1bmN0aW9uKHN0cmVhbSwgc3RhdGUpIHtcbiAgICAgIGlmIChzdHJlYW0ubWF0Y2goUkUoXCJ0eXBlTGF5b3V0XCIpLCBmYWxzZSkpIHtcbiAgICAgICAgc3RhdGUuc3Bhbm5pbmdMYXlvdXQgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIChzdGF0ZS5tb2RlID0gTW9kZXMuYmxvY2tUeXBlKShzdHJlYW0sIHN0YXRlKTtcbiAgICAgIH1cbiAgICAgIHZhciBuZXdNb2RlO1xuICAgICAgaWYgKCF0ZXh0aWxlRGlzYWJsZWQoc3RhdGUpKSB7XG4gICAgICAgIGlmIChzdHJlYW0ubWF0Y2goUkUoXCJsaXN0TGF5b3V0XCIpLCBmYWxzZSkpXG4gICAgICAgICAgbmV3TW9kZSA9IE1vZGVzLmxpc3Q7XG4gICAgICAgIGVsc2UgaWYgKHN0cmVhbS5tYXRjaChSRShcImRyYXdUYWJsZVwiKSwgZmFsc2UpKVxuICAgICAgICAgIG5ld01vZGUgPSBNb2Rlcy50YWJsZTtcbiAgICAgICAgZWxzZSBpZiAoc3RyZWFtLm1hdGNoKFJFKFwibGlua0RlZmluaXRpb25cIiksIGZhbHNlKSlcbiAgICAgICAgICBuZXdNb2RlID0gTW9kZXMubGlua0RlZmluaXRpb247XG4gICAgICAgIGVsc2UgaWYgKHN0cmVhbS5tYXRjaChSRShcImRlZmluaXRpb25MaXN0XCIpKSlcbiAgICAgICAgICBuZXdNb2RlID0gTW9kZXMuZGVmaW5pdGlvbkxpc3Q7XG4gICAgICAgIGVsc2UgaWYgKHN0cmVhbS5tYXRjaChSRShcImh0bWxcIiksIGZhbHNlKSlcbiAgICAgICAgICBuZXdNb2RlID0gTW9kZXMuaHRtbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiAoc3RhdGUubW9kZSA9IChuZXdNb2RlIHx8IE1vZGVzLnRleHQpKShzdHJlYW0sIHN0YXRlKTtcbiAgICB9LFxuXG4gICAgYmxvY2tUeXBlOiBmdW5jdGlvbihzdHJlYW0sIHN0YXRlKSB7XG4gICAgICB2YXIgbWF0Y2gsIHR5cGU7XG4gICAgICBzdGF0ZS5sYXlvdXRUeXBlID0gbnVsbDtcblxuICAgICAgaWYgKG1hdGNoID0gc3RyZWFtLm1hdGNoKFJFKFwidHlwZVwiKSkpXG4gICAgICAgIHR5cGUgPSBtYXRjaFswXTtcbiAgICAgIGVsc2VcbiAgICAgICAgcmV0dXJuIChzdGF0ZS5tb2RlID0gTW9kZXMudGV4dCkoc3RyZWFtLCBzdGF0ZSk7XG5cbiAgICAgIGlmIChtYXRjaCA9IHR5cGUubWF0Y2goUkUoXCJoZWFkZXJcIikpKSB7XG4gICAgICAgIHN0YXRlLmxheW91dFR5cGUgPSBcImhlYWRlclwiO1xuICAgICAgICBzdGF0ZS5oZWFkZXIgPSBwYXJzZUludChtYXRjaFswXVsxXSk7XG4gICAgICB9IGVsc2UgaWYgKHR5cGUubWF0Y2goUkUoXCJicVwiKSkpIHtcbiAgICAgICAgc3RhdGUubGF5b3V0VHlwZSA9IFwicXVvdGVcIjtcbiAgICAgIH0gZWxzZSBpZiAodHlwZS5tYXRjaChSRShcImJjXCIpKSkge1xuICAgICAgICBzdGF0ZS5sYXlvdXRUeXBlID0gXCJjb2RlXCI7XG4gICAgICB9IGVsc2UgaWYgKHR5cGUubWF0Y2goUkUoXCJmb290XCIpKSkge1xuICAgICAgICBzdGF0ZS5sYXlvdXRUeXBlID0gXCJmb290bm90ZVwiO1xuICAgICAgfSBlbHNlIGlmICh0eXBlLm1hdGNoKFJFKFwibm90ZXh0aWxlXCIpKSkge1xuICAgICAgICBzdGF0ZS5sYXlvdXRUeXBlID0gXCJub3RleHRpbGVcIjtcbiAgICAgIH0gZWxzZSBpZiAodHlwZS5tYXRjaChSRShcInByZVwiKSkpIHtcbiAgICAgICAgc3RhdGUubGF5b3V0VHlwZSA9IFwicHJlXCI7XG4gICAgICB9IGVsc2UgaWYgKHR5cGUubWF0Y2goUkUoXCJkaXZcIikpKSB7XG4gICAgICAgIHN0YXRlLmxheW91dFR5cGUgPSBcImRpdlwiO1xuICAgICAgfSBlbHNlIGlmICh0eXBlLm1hdGNoKFJFKFwidGFibGVcIikpKSB7XG4gICAgICAgIHN0YXRlLmxheW91dFR5cGUgPSBcInRhYmxlXCI7XG4gICAgICB9XG5cbiAgICAgIHN0YXRlLm1vZGUgPSBNb2Rlcy5hdHRyaWJ1dGVzO1xuICAgICAgcmV0dXJuIHRva2VuU3R5bGVzKHN0YXRlKTtcbiAgICB9LFxuXG4gICAgdGV4dDogZnVuY3Rpb24oc3RyZWFtLCBzdGF0ZSkge1xuICAgICAgaWYgKHN0cmVhbS5tYXRjaChSRShcInRleHRcIikpKSByZXR1cm4gdG9rZW5TdHlsZXMoc3RhdGUpO1xuXG4gICAgICB2YXIgY2ggPSBzdHJlYW0ubmV4dCgpO1xuICAgICAgaWYgKGNoID09PSAnXCInKVxuICAgICAgICByZXR1cm4gKHN0YXRlLm1vZGUgPSBNb2Rlcy5saW5rKShzdHJlYW0sIHN0YXRlKTtcbiAgICAgIHJldHVybiBoYW5kbGVQaHJhc2VNb2RpZmllcihzdHJlYW0sIHN0YXRlLCBjaCk7XG4gICAgfSxcblxuICAgIGF0dHJpYnV0ZXM6IGZ1bmN0aW9uKHN0cmVhbSwgc3RhdGUpIHtcbiAgICAgIHN0YXRlLm1vZGUgPSBNb2Rlcy5sYXlvdXRMZW5ndGg7XG5cbiAgICAgIGlmIChzdHJlYW0ubWF0Y2goUkUoXCJhdHRyaWJ1dGVzXCIpKSlcbiAgICAgICAgcmV0dXJuIHRva2VuU3R5bGVzV2l0aChzdGF0ZSwgVE9LRU5fU1RZTEVTLmF0dHJpYnV0ZXMpO1xuICAgICAgZWxzZVxuICAgICAgICByZXR1cm4gdG9rZW5TdHlsZXMoc3RhdGUpO1xuICAgIH0sXG5cbiAgICBsYXlvdXRMZW5ndGg6IGZ1bmN0aW9uKHN0cmVhbSwgc3RhdGUpIHtcbiAgICAgIGlmIChzdHJlYW0uZWF0KFwiLlwiKSAmJiBzdHJlYW0uZWF0KFwiLlwiKSlcbiAgICAgICAgc3RhdGUuc3Bhbm5pbmdMYXlvdXQgPSB0cnVlO1xuXG4gICAgICBzdGF0ZS5tb2RlID0gTW9kZXMudGV4dDtcbiAgICAgIHJldHVybiB0b2tlblN0eWxlcyhzdGF0ZSk7XG4gICAgfSxcblxuICAgIGxpc3Q6IGZ1bmN0aW9uKHN0cmVhbSwgc3RhdGUpIHtcbiAgICAgIHZhciBtYXRjaCA9IHN0cmVhbS5tYXRjaChSRShcImxpc3RcIikpO1xuICAgICAgc3RhdGUubGlzdERlcHRoID0gbWF0Y2hbMF0ubGVuZ3RoO1xuICAgICAgdmFyIGxpc3RNb2QgPSAoc3RhdGUubGlzdERlcHRoIC0gMSkgJSAzO1xuICAgICAgaWYgKCFsaXN0TW9kKVxuICAgICAgICBzdGF0ZS5sYXlvdXRUeXBlID0gXCJsaXN0MVwiO1xuICAgICAgZWxzZSBpZiAobGlzdE1vZCA9PT0gMSlcbiAgICAgICAgc3RhdGUubGF5b3V0VHlwZSA9IFwibGlzdDJcIjtcbiAgICAgIGVsc2VcbiAgICAgICAgc3RhdGUubGF5b3V0VHlwZSA9IFwibGlzdDNcIjtcblxuICAgICAgc3RhdGUubW9kZSA9IE1vZGVzLmF0dHJpYnV0ZXM7XG4gICAgICByZXR1cm4gdG9rZW5TdHlsZXMoc3RhdGUpO1xuICAgIH0sXG5cbiAgICBsaW5rOiBmdW5jdGlvbihzdHJlYW0sIHN0YXRlKSB7XG4gICAgICBzdGF0ZS5tb2RlID0gTW9kZXMudGV4dDtcbiAgICAgIGlmIChzdHJlYW0ubWF0Y2goUkUoXCJsaW5rXCIpKSkge1xuICAgICAgICBzdHJlYW0ubWF0Y2goL1xcUysvKTtcbiAgICAgICAgcmV0dXJuIHRva2VuU3R5bGVzV2l0aChzdGF0ZSwgVE9LRU5fU1RZTEVTLmxpbmspO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRva2VuU3R5bGVzKHN0YXRlKTtcbiAgICB9LFxuXG4gICAgbGlua0RlZmluaXRpb246IGZ1bmN0aW9uKHN0cmVhbSwgc3RhdGUpIHtcbiAgICAgIHN0cmVhbS5za2lwVG9FbmQoKTtcbiAgICAgIHJldHVybiB0b2tlblN0eWxlc1dpdGgoc3RhdGUsIFRPS0VOX1NUWUxFUy5saW5rRGVmaW5pdGlvbik7XG4gICAgfSxcblxuICAgIGRlZmluaXRpb25MaXN0OiBmdW5jdGlvbihzdHJlYW0sIHN0YXRlKSB7XG4gICAgICBzdHJlYW0ubWF0Y2goUkUoXCJkZWZpbml0aW9uTGlzdFwiKSk7XG5cbiAgICAgIHN0YXRlLmxheW91dFR5cGUgPSBcImRlZmluaXRpb25MaXN0XCI7XG5cbiAgICAgIGlmIChzdHJlYW0ubWF0Y2goL1xccyokLykpXG4gICAgICAgIHN0YXRlLnNwYW5uaW5nTGF5b3V0ID0gdHJ1ZTtcbiAgICAgIGVsc2VcbiAgICAgICAgc3RhdGUubW9kZSA9IE1vZGVzLmF0dHJpYnV0ZXM7XG5cbiAgICAgIHJldHVybiB0b2tlblN0eWxlcyhzdGF0ZSk7XG4gICAgfSxcblxuICAgIGh0bWw6IGZ1bmN0aW9uKHN0cmVhbSwgc3RhdGUpIHtcbiAgICAgIHN0cmVhbS5za2lwVG9FbmQoKTtcbiAgICAgIHJldHVybiB0b2tlblN0eWxlc1dpdGgoc3RhdGUsIFRPS0VOX1NUWUxFUy5odG1sKTtcbiAgICB9LFxuXG4gICAgdGFibGU6IGZ1bmN0aW9uKHN0cmVhbSwgc3RhdGUpIHtcbiAgICAgIHN0YXRlLmxheW91dFR5cGUgPSBcInRhYmxlXCI7XG4gICAgICByZXR1cm4gKHN0YXRlLm1vZGUgPSBNb2Rlcy50YWJsZUNlbGwpKHN0cmVhbSwgc3RhdGUpO1xuICAgIH0sXG5cbiAgICB0YWJsZUNlbGw6IGZ1bmN0aW9uKHN0cmVhbSwgc3RhdGUpIHtcbiAgICAgIGlmIChzdHJlYW0ubWF0Y2goUkUoXCJ0YWJsZUhlYWRpbmdcIikpKVxuICAgICAgICBzdGF0ZS50YWJsZUhlYWRpbmcgPSB0cnVlO1xuICAgICAgZWxzZVxuICAgICAgICBzdHJlYW0uZWF0KFwifFwiKTtcblxuICAgICAgc3RhdGUubW9kZSA9IE1vZGVzLnRhYmxlQ2VsbEF0dHJpYnV0ZXM7XG4gICAgICByZXR1cm4gdG9rZW5TdHlsZXMoc3RhdGUpO1xuICAgIH0sXG5cbiAgICB0YWJsZUNlbGxBdHRyaWJ1dGVzOiBmdW5jdGlvbihzdHJlYW0sIHN0YXRlKSB7XG4gICAgICBzdGF0ZS5tb2RlID0gTW9kZXMudGFibGVUZXh0O1xuXG4gICAgICBpZiAoc3RyZWFtLm1hdGNoKFJFKFwidGFibGVDZWxsQXR0cmlidXRlc1wiKSkpXG4gICAgICAgIHJldHVybiB0b2tlblN0eWxlc1dpdGgoc3RhdGUsIFRPS0VOX1NUWUxFUy5hdHRyaWJ1dGVzKTtcbiAgICAgIGVsc2VcbiAgICAgICAgcmV0dXJuIHRva2VuU3R5bGVzKHN0YXRlKTtcbiAgICB9LFxuXG4gICAgdGFibGVUZXh0OiBmdW5jdGlvbihzdHJlYW0sIHN0YXRlKSB7XG4gICAgICBpZiAoc3RyZWFtLm1hdGNoKFJFKFwidGFibGVUZXh0XCIpKSlcbiAgICAgICAgcmV0dXJuIHRva2VuU3R5bGVzKHN0YXRlKTtcblxuICAgICAgaWYgKHN0cmVhbS5wZWVrKCkgPT09IFwifFwiKSB7IC8vIGVuZCBvZiBjZWxsXG4gICAgICAgIHN0YXRlLm1vZGUgPSBNb2Rlcy50YWJsZUNlbGw7XG4gICAgICAgIHJldHVybiB0b2tlblN0eWxlcyhzdGF0ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gaGFuZGxlUGhyYXNlTW9kaWZpZXIoc3RyZWFtLCBzdGF0ZSwgc3RyZWFtLm5leHQoKSk7XG4gICAgfVxuICB9O1xuXG4gIENvZGVNaXJyb3IuZGVmaW5lTW9kZShcInRleHRpbGVcIiwgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXJ0U3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4geyBtb2RlOiBNb2Rlcy5uZXdMYXlvdXQgfTtcbiAgICAgIH0sXG4gICAgICB0b2tlbjogZnVuY3Rpb24oc3RyZWFtLCBzdGF0ZSkge1xuICAgICAgICBpZiAoc3RyZWFtLnNvbCgpKSBzdGFydE5ld0xpbmUoc3RyZWFtLCBzdGF0ZSk7XG4gICAgICAgIHJldHVybiBzdGF0ZS5tb2RlKHN0cmVhbSwgc3RhdGUpO1xuICAgICAgfSxcbiAgICAgIGJsYW5rTGluZTogYmxhbmtMaW5lXG4gICAgfTtcbiAgfSk7XG5cbiAgQ29kZU1pcnJvci5kZWZpbmVNSU1FKFwidGV4dC94LXRleHRpbGVcIiwgXCJ0ZXh0aWxlXCIpO1xufSk7XG4iXSwic291cmNlUm9vdCI6IiJ9