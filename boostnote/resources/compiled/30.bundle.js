(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{"./node_modules/codemirror/mode/coffeescript/coffeescript.js":function(e,t,n){!function(e){"use strict";e.defineMode("coffeescript",(function(e,t){var n="error";function r(e){return new RegExp("^(("+e.join(")|(")+"))\\b")}var o=/^(?:->|=>|\+[+=]?|-[\-=]?|\*[\*=]?|\/[\/=]?|[=!]=|<[><]?=?|>>?=?|%=?|&=?|\|=?|\^=?|\~|!|\?|(or|and|\|\||&&|\?)=)/,c=/^(?:[()\[\]{},:`=;]|\.\.?\.?)/,i=/^[_A-Za-z$][_A-Za-z$0-9]*/,f=/^@[_A-Za-z$][_A-Za-z$0-9]*/,p=r(["and","or","not","is","isnt","in","instanceof","typeof"]),a=["for","while","loop","if","unless","else","switch","try","catch","finally","class"],s=r(a.concat(["break","by","continue","debugger","delete","do","in","of","new","return","then","this","@","throw","when","until","extends"]));a=r(a);var u=/^('{3}|\"{3}|['\"])/,l=/^(\/{3}|\/)/,d=r(["Infinity","NaN","undefined","null","true","false","on","off","yes","no"]);function m(e,t){if(e.sol()){null===t.scope.align&&(t.scope.align=!1);var r=t.scope.offset;if(e.eatSpace()){var a=e.indentation();return a>r&&"coffee"==t.scope.type?"indent":a<r?"dedent":null}r>0&&g(e,t)}if(e.eatSpace())return null;var m=e.peek();if(e.match("####"))return e.skipToEnd(),"comment";if(e.match("###"))return t.tokenize=v,t.tokenize(e,t);if("#"===m)return e.skipToEnd(),"comment";if(e.match(/^-?[0-9\.]/,!1)){var k=!1;if(e.match(/^-?\d*\.\d+(e[\+\-]?\d+)?/i)&&(k=!0),e.match(/^-?\d+\.\d*/)&&(k=!0),e.match(/^-?\.\d+/)&&(k=!0),k)return"."==e.peek()&&e.backUp(1),"number";var y=!1;if(e.match(/^-?0x[0-9a-f]+/i)&&(y=!0),e.match(/^-?[1-9]\d*(e[\+\-]?\d+)?/)&&(y=!0),e.match(/^-?0(?![\dx])/i)&&(y=!0),y)return"number"}if(e.match(u))return t.tokenize=h(e.current(),!1,"string"),t.tokenize(e,t);if(e.match(l)){if("/"!=e.current()||e.match(/^.*\//,!1))return t.tokenize=h(e.current(),!0,"string-2"),t.tokenize(e,t);e.backUp(1)}return e.match(o)||e.match(p)?"operator":e.match(c)?"punctuation":e.match(d)?"atom":e.match(f)||t.prop&&e.match(i)?"property":e.match(s)?"keyword":e.match(i)?"variable":(e.next(),n)}function h(e,r,o){return function(c,i){for(;!c.eol();)if(c.eatWhile(/[^'"\/\\]/),c.eat("\\")){if(c.next(),r&&c.eol())return o}else{if(c.match(e))return i.tokenize=m,o;c.eat(/['"\/]/)}return r&&(t.singleLineStringErrors?o=n:i.tokenize=m),o}}function v(e,t){for(;!e.eol();){if(e.eatWhile(/[^#]/),e.match("###")){t.tokenize=m;break}e.eatWhile("#")}return"comment"}function k(t,n,r){r=r||"coffee";for(var o=0,c=!1,i=null,f=n.scope;f;f=f.prev)if("coffee"===f.type||"}"==f.type){o=f.offset+e.indentUnit;break}"coffee"!==r?(c=null,i=t.column()+t.current().length):n.scope.align&&(n.scope.align=!1),n.scope={offset:o,type:r,prev:n.scope,align:c,alignOffset:i}}function g(e,t){if(t.scope.prev){if("coffee"===t.scope.type){for(var n=e.indentation(),r=!1,o=t.scope;o;o=o.prev)if(n===o.offset){r=!0;break}if(!r)return!0;for(;t.scope.prev&&t.scope.offset!==n;)t.scope=t.scope.prev;return!1}return t.scope=t.scope.prev,!1}}return{startState:function(e){return{tokenize:m,scope:{offset:e||0,type:"coffee",prev:null,align:!1},prop:!1,dedent:0}},token:function(e,t){var r=null===t.scope.align&&t.scope;r&&e.sol()&&(r.align=!1);var o=function(e,t){var r=t.tokenize(e,t),o=e.current();"return"===o&&(t.dedent=!0),(("->"===o||"=>"===o)&&e.eol()||"indent"===r)&&k(e,t);var c="[({".indexOf(o);if(-1!==c&&k(e,t,"])}".slice(c,c+1)),a.exec(o)&&k(e,t),"then"==o&&g(e,t),"dedent"===r&&g(e,t))return n;if(-1!==(c="])}".indexOf(o))){for(;"coffee"==t.scope.type&&t.scope.prev;)t.scope=t.scope.prev;t.scope.type==o&&(t.scope=t.scope.prev)}return t.dedent&&e.eol()&&("coffee"==t.scope.type&&t.scope.prev&&(t.scope=t.scope.prev),t.dedent=!1),r}(e,t);return o&&"comment"!=o&&(r&&(r.align=!0),t.prop="punctuation"==o&&"."==e.current()),o},indent:function(e,t){if(e.tokenize!=m)return 0;var n=e.scope,r=t&&"])}".indexOf(t.charAt(0))>-1;if(r)for(;"coffee"==n.type&&n.prev;)n=n.prev;var o=r&&n.type===t.charAt(0);return n.align?n.alignOffset-(o?1:0):(o?n.prev:n).offset},lineComment:"#",fold:"indent"}})),e.defineMIME("application/vnd.coffeescript","coffeescript"),e.defineMIME("text/x-coffeescript","coffeescript"),e.defineMIME("text/coffeescript","coffeescript")}(n("./node_modules/codemirror/lib/codemirror.js"))}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29kZW1pcnJvci9tb2RlL2NvZmZlZXNjcmlwdC9jb2ZmZWVzY3JpcHQuanMiXSwibmFtZXMiOlsiQ29kZU1pcnJvciIsImRlZmluZU1vZGUiLCJjb25mIiwicGFyc2VyQ29uZiIsIkVSUk9SQ0xBU1MiLCJ3b3JkUmVnZXhwIiwid29yZHMiLCJSZWdFeHAiLCJqb2luIiwib3BlcmF0b3JzIiwiZGVsaW1pdGVycyIsImlkZW50aWZpZXJzIiwiYXRQcm9wIiwid29yZE9wZXJhdG9ycyIsImluZGVudEtleXdvcmRzIiwia2V5d29yZHMiLCJjb25jYXQiLCJzdHJpbmdQcmVmaXhlcyIsInJlZ2V4UHJlZml4ZXMiLCJjb25zdGFudHMiLCJ0b2tlbkJhc2UiLCJzdHJlYW0iLCJzdGF0ZSIsInNvbCIsInNjb3BlIiwiYWxpZ24iLCJzY29wZU9mZnNldCIsIm9mZnNldCIsImVhdFNwYWNlIiwibGluZU9mZnNldCIsImluZGVudGF0aW9uIiwidHlwZSIsImRlZGVudCIsImNoIiwicGVlayIsIm1hdGNoIiwic2tpcFRvRW5kIiwidG9rZW5pemUiLCJsb25nQ29tbWVudCIsImZsb2F0TGl0ZXJhbCIsImJhY2tVcCIsImludExpdGVyYWwiLCJ0b2tlbkZhY3RvcnkiLCJjdXJyZW50IiwicHJvcCIsIm5leHQiLCJkZWxpbWl0ZXIiLCJzaW5nbGVsaW5lIiwib3V0Y2xhc3MiLCJlb2wiLCJlYXRXaGlsZSIsImVhdCIsInNpbmdsZUxpbmVTdHJpbmdFcnJvcnMiLCJpbmRlbnQiLCJhbGlnbk9mZnNldCIsInByZXYiLCJpbmRlbnRVbml0IiwiY29sdW1uIiwibGVuZ3RoIiwiX2luZGVudCIsIm1hdGNoZWQiLCJzdGFydFN0YXRlIiwiYmFzZWNvbHVtbiIsInRva2VuIiwiZmlsbEFsaWduIiwic3R5bGUiLCJkZWxpbWl0ZXJfaW5kZXgiLCJpbmRleE9mIiwic2xpY2UiLCJleGVjIiwidG9rZW5MZXhlciIsInRleHQiLCJjbG9zZXIi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LEVBQVFBLEVBQU0rQixLQUN2RSxJQUFJbUIsRUFBU0YsR0FBVWhELEVBQU1PLE9BQVN3QyxFQUFLRSxPQUFPLEdBQ2xELE9BQUlqRCxFQUFNQyxNQUNERCxFQUFNOEIsYUFBZW9CLEVBQVMsRUFBSSxJQUVqQ0EsRUFBU2xELEVBQU0rQixLQUFPL0IsR0FBT0csUUFHekNnRCxZQUFhLElBQ2JDLEtBQU0sYUFPVjVFLEVBQVc2RSxXQUFXLCtCQUFnQyxnQkFFdEQ3RSxFQUFXNkUsV0FBVyxzQkFBdUIsZ0JBQzdDN0UsRUFBVzZFLFdBQVcsb0JBQXFCLGdCQTNWdkNDLENBQUksRUFBUSIsImZpbGUiOiIzMC5idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb2RlTWlycm9yLCBjb3B5cmlnaHQgKGMpIGJ5IE1hcmlqbiBIYXZlcmJla2UgYW5kIG90aGVyc1xuLy8gRGlzdHJpYnV0ZWQgdW5kZXIgYW4gTUlUIGxpY2Vuc2U6IGh0dHBzOi8vY29kZW1pcnJvci5uZXQvTElDRU5TRVxuXG4vKipcbiAqIExpbmsgdG8gdGhlIHByb2plY3QncyBHaXRIdWIgcGFnZTpcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9waWNraGFyZHQvY29mZmVlc2NyaXB0LWNvZGVtaXJyb3ItbW9kZVxuICovXG4oZnVuY3Rpb24obW9kKSB7XG4gIGlmICh0eXBlb2YgZXhwb3J0cyA9PSBcIm9iamVjdFwiICYmIHR5cGVvZiBtb2R1bGUgPT0gXCJvYmplY3RcIikgLy8gQ29tbW9uSlNcbiAgICBtb2QocmVxdWlyZShcIi4uLy4uL2xpYi9jb2RlbWlycm9yXCIpKTtcbiAgZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkgLy8gQU1EXG4gICAgZGVmaW5lKFtcIi4uLy4uL2xpYi9jb2RlbWlycm9yXCJdLCBtb2QpO1xuICBlbHNlIC8vIFBsYWluIGJyb3dzZXIgZW52XG4gICAgbW9kKENvZGVNaXJyb3IpO1xufSkoZnVuY3Rpb24oQ29kZU1pcnJvcikge1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbkNvZGVNaXJyb3IuZGVmaW5lTW9kZShcImNvZmZlZXNjcmlwdFwiLCBmdW5jdGlvbihjb25mLCBwYXJzZXJDb25mKSB7XG4gIHZhciBFUlJPUkNMQVNTID0gXCJlcnJvclwiO1xuXG4gIGZ1bmN0aW9uIHdvcmRSZWdleHAod29yZHMpIHtcbiAgICByZXR1cm4gbmV3IFJlZ0V4cChcIl4oKFwiICsgd29yZHMuam9pbihcIil8KFwiKSArIFwiKSlcXFxcYlwiKTtcbiAgfVxuXG4gIHZhciBvcGVyYXRvcnMgPSAvXig/Oi0+fD0+fFxcK1srPV0/fC1bXFwtPV0/fFxcKltcXCo9XT98XFwvW1xcLz1dP3xbPSFdPXw8Wz48XT89P3w+Pj89P3wlPT98Jj0/fFxcfD0/fFxcXj0/fFxcfnwhfFxcP3wob3J8YW5kfFxcfFxcfHwmJnxcXD8pPSkvO1xuICB2YXIgZGVsaW1pdGVycyA9IC9eKD86WygpXFxbXFxde30sOmA9O118XFwuXFwuP1xcLj8pLztcbiAgdmFyIGlkZW50aWZpZXJzID0gL15bX0EtWmEteiRdW19BLVphLXokMC05XSovO1xuICB2YXIgYXRQcm9wID0gL15AW19BLVphLXokXVtfQS1aYS16JDAtOV0qLztcblxuICB2YXIgd29yZE9wZXJhdG9ycyA9IHdvcmRSZWdleHAoW1wiYW5kXCIsIFwib3JcIiwgXCJub3RcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImlzXCIsIFwiaXNudFwiLCBcImluXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpbnN0YW5jZW9mXCIsIFwidHlwZW9mXCJdKTtcbiAgdmFyIGluZGVudEtleXdvcmRzID0gW1wiZm9yXCIsIFwid2hpbGVcIiwgXCJsb29wXCIsIFwiaWZcIiwgXCJ1bmxlc3NcIiwgXCJlbHNlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInN3aXRjaFwiLCBcInRyeVwiLCBcImNhdGNoXCIsIFwiZmluYWxseVwiLCBcImNsYXNzXCJdO1xuICB2YXIgY29tbW9uS2V5d29yZHMgPSBbXCJicmVha1wiLCBcImJ5XCIsIFwiY29udGludWVcIiwgXCJkZWJ1Z2dlclwiLCBcImRlbGV0ZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJkb1wiLCBcImluXCIsIFwib2ZcIiwgXCJuZXdcIiwgXCJyZXR1cm5cIiwgXCJ0aGVuXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInRoaXNcIiwgXCJAXCIsIFwidGhyb3dcIiwgXCJ3aGVuXCIsIFwidW50aWxcIiwgXCJleHRlbmRzXCJdO1xuXG4gIHZhciBrZXl3b3JkcyA9IHdvcmRSZWdleHAoaW5kZW50S2V5d29yZHMuY29uY2F0KGNvbW1vbktleXdvcmRzKSk7XG5cbiAgaW5kZW50S2V5d29yZHMgPSB3b3JkUmVnZXhwKGluZGVudEtleXdvcmRzKTtcblxuXG4gIHZhciBzdHJpbmdQcmVmaXhlcyA9IC9eKCd7M318XFxcInszfXxbJ1xcXCJdKS87XG4gIHZhciByZWdleFByZWZpeGVzID0gL14oXFwvezN9fFxcLykvO1xuICB2YXIgY29tbW9uQ29uc3RhbnRzID0gW1wiSW5maW5pdHlcIiwgXCJOYU5cIiwgXCJ1bmRlZmluZWRcIiwgXCJudWxsXCIsIFwidHJ1ZVwiLCBcImZhbHNlXCIsIFwib25cIiwgXCJvZmZcIiwgXCJ5ZXNcIiwgXCJub1wiXTtcbiAgdmFyIGNvbnN0YW50cyA9IHdvcmRSZWdleHAoY29tbW9uQ29uc3RhbnRzKTtcblxuICAvLyBUb2tlbml6ZXJzXG4gIGZ1bmN0aW9uIHRva2VuQmFzZShzdHJlYW0sIHN0YXRlKSB7XG4gICAgLy8gSGFuZGxlIHNjb3BlIGNoYW5nZXNcbiAgICBpZiAoc3RyZWFtLnNvbCgpKSB7XG4gICAgICBpZiAoc3RhdGUuc2NvcGUuYWxpZ24gPT09IG51bGwpIHN0YXRlLnNjb3BlLmFsaWduID0gZmFsc2U7XG4gICAgICB2YXIgc2NvcGVPZmZzZXQgPSBzdGF0ZS5zY29wZS5vZmZzZXQ7XG4gICAgICBpZiAoc3RyZWFtLmVhdFNwYWNlKCkpIHtcbiAgICAgICAgdmFyIGxpbmVPZmZzZXQgPSBzdHJlYW0uaW5kZW50YXRpb24oKTtcbiAgICAgICAgaWYgKGxpbmVPZmZzZXQgPiBzY29wZU9mZnNldCAmJiBzdGF0ZS5zY29wZS50eXBlID09IFwiY29mZmVlXCIpIHtcbiAgICAgICAgICByZXR1cm4gXCJpbmRlbnRcIjtcbiAgICAgICAgfSBlbHNlIGlmIChsaW5lT2Zmc2V0IDwgc2NvcGVPZmZzZXQpIHtcbiAgICAgICAgICByZXR1cm4gXCJkZWRlbnRcIjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChzY29wZU9mZnNldCA+IDApIHtcbiAgICAgICAgICBkZWRlbnQoc3RyZWFtLCBzdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHN0cmVhbS5lYXRTcGFjZSgpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICB2YXIgY2ggPSBzdHJlYW0ucGVlaygpO1xuXG4gICAgLy8gSGFuZGxlIGRvY2NvIHRpdGxlIGNvbW1lbnQgKHNpbmdsZSBsaW5lKVxuICAgIGlmIChzdHJlYW0ubWF0Y2goXCIjIyMjXCIpKSB7XG4gICAgICBzdHJlYW0uc2tpcFRvRW5kKCk7XG4gICAgICByZXR1cm4gXCJjb21tZW50XCI7XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIG11bHRpIGxpbmUgY29tbWVudHNcbiAgICBpZiAoc3RyZWFtLm1hdGNoKFwiIyMjXCIpKSB7XG4gICAgICBzdGF0ZS50b2tlbml6ZSA9IGxvbmdDb21tZW50O1xuICAgICAgcmV0dXJuIHN0YXRlLnRva2VuaXplKHN0cmVhbSwgc3RhdGUpO1xuICAgIH1cblxuICAgIC8vIFNpbmdsZSBsaW5lIGNvbW1lbnRcbiAgICBpZiAoY2ggPT09IFwiI1wiKSB7XG4gICAgICBzdHJlYW0uc2tpcFRvRW5kKCk7XG4gICAgICByZXR1cm4gXCJjb21tZW50XCI7XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIG51bWJlciBsaXRlcmFsc1xuICAgIGlmIChzdHJlYW0ubWF0Y2goL14tP1swLTlcXC5dLywgZmFsc2UpKSB7XG4gICAgICB2YXIgZmxvYXRMaXRlcmFsID0gZmFsc2U7XG4gICAgICAvLyBGbG9hdHNcbiAgICAgIGlmIChzdHJlYW0ubWF0Y2goL14tP1xcZCpcXC5cXGQrKGVbXFwrXFwtXT9cXGQrKT8vaSkpIHtcbiAgICAgICAgZmxvYXRMaXRlcmFsID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmIChzdHJlYW0ubWF0Y2goL14tP1xcZCtcXC5cXGQqLykpIHtcbiAgICAgICAgZmxvYXRMaXRlcmFsID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmIChzdHJlYW0ubWF0Y2goL14tP1xcLlxcZCsvKSkge1xuICAgICAgICBmbG9hdExpdGVyYWwgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoZmxvYXRMaXRlcmFsKSB7XG4gICAgICAgIC8vIHByZXZlbnQgZnJvbSBnZXR0aW5nIGV4dHJhIC4gb24gMS4uXG4gICAgICAgIGlmIChzdHJlYW0ucGVlaygpID09IFwiLlwiKXtcbiAgICAgICAgICBzdHJlYW0uYmFja1VwKDEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBcIm51bWJlclwiO1xuICAgICAgfVxuICAgICAgLy8gSW50ZWdlcnNcbiAgICAgIHZhciBpbnRMaXRlcmFsID0gZmFsc2U7XG4gICAgICAvLyBIZXhcbiAgICAgIGlmIChzdHJlYW0ubWF0Y2goL14tPzB4WzAtOWEtZl0rL2kpKSB7XG4gICAgICAgIGludExpdGVyYWwgPSB0cnVlO1xuICAgICAgfVxuICAgICAgLy8gRGVjaW1hbFxuICAgICAgaWYgKHN0cmVhbS5tYXRjaCgvXi0/WzEtOV1cXGQqKGVbXFwrXFwtXT9cXGQrKT8vKSkge1xuICAgICAgICBpbnRMaXRlcmFsID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIC8vIFplcm8gYnkgaXRzZWxmIHdpdGggbm8gb3RoZXIgcGllY2Ugb2YgbnVtYmVyLlxuICAgICAgaWYgKHN0cmVhbS5tYXRjaCgvXi0/MCg/IVtcXGR4XSkvaSkpIHtcbiAgICAgICAgaW50TGl0ZXJhbCA9IHRydWU7XG4gICAgICB9XG4gICAgICBpZiAoaW50TGl0ZXJhbCkge1xuICAgICAgICByZXR1cm4gXCJudW1iZXJcIjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgc3RyaW5nc1xuICAgIGlmIChzdHJlYW0ubWF0Y2goc3RyaW5nUHJlZml4ZXMpKSB7XG4gICAgICBzdGF0ZS50b2tlbml6ZSA9IHRva2VuRmFjdG9yeShzdHJlYW0uY3VycmVudCgpLCBmYWxzZSwgXCJzdHJpbmdcIik7XG4gICAgICByZXR1cm4gc3RhdGUudG9rZW5pemUoc3RyZWFtLCBzdGF0ZSk7XG4gICAgfVxuICAgIC8vIEhhbmRsZSByZWdleCBsaXRlcmFsc1xuICAgIGlmIChzdHJlYW0ubWF0Y2gocmVnZXhQcmVmaXhlcykpIHtcbiAgICAgIGlmIChzdHJlYW0uY3VycmVudCgpICE9IFwiL1wiIHx8IHN0cmVhbS5tYXRjaCgvXi4qXFwvLywgZmFsc2UpKSB7IC8vIHByZXZlbnQgaGlnaGxpZ2h0IG9mIGRpdmlzaW9uXG4gICAgICAgIHN0YXRlLnRva2VuaXplID0gdG9rZW5GYWN0b3J5KHN0cmVhbS5jdXJyZW50KCksIHRydWUsIFwic3RyaW5nLTJcIik7XG4gICAgICAgIHJldHVybiBzdGF0ZS50b2tlbml6ZShzdHJlYW0sIHN0YXRlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0cmVhbS5iYWNrVXAoMSk7XG4gICAgICB9XG4gICAgfVxuXG5cblxuICAgIC8vIEhhbmRsZSBvcGVyYXRvcnMgYW5kIGRlbGltaXRlcnNcbiAgICBpZiAoc3RyZWFtLm1hdGNoKG9wZXJhdG9ycykgfHwgc3RyZWFtLm1hdGNoKHdvcmRPcGVyYXRvcnMpKSB7XG4gICAgICByZXR1cm4gXCJvcGVyYXRvclwiO1xuICAgIH1cbiAgICBpZiAoc3RyZWFtLm1hdGNoKGRlbGltaXRlcnMpKSB7XG4gICAgICByZXR1cm4gXCJwdW5jdHVhdGlvblwiO1xuICAgIH1cblxuICAgIGlmIChzdHJlYW0ubWF0Y2goY29uc3RhbnRzKSkge1xuICAgICAgcmV0dXJuIFwiYXRvbVwiO1xuICAgIH1cblxuICAgIGlmIChzdHJlYW0ubWF0Y2goYXRQcm9wKSB8fCBzdGF0ZS5wcm9wICYmIHN0cmVhbS5tYXRjaChpZGVudGlmaWVycykpIHtcbiAgICAgIHJldHVybiBcInByb3BlcnR5XCI7XG4gICAgfVxuXG4gICAgaWYgKHN0cmVhbS5tYXRjaChrZXl3b3JkcykpIHtcbiAgICAgIHJldHVybiBcImtleXdvcmRcIjtcbiAgICB9XG5cbiAgICBpZiAoc3RyZWFtLm1hdGNoKGlkZW50aWZpZXJzKSkge1xuICAgICAgcmV0dXJuIFwidmFyaWFibGVcIjtcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgbm9uLWRldGVjdGVkIGl0ZW1zXG4gICAgc3RyZWFtLm5leHQoKTtcbiAgICByZXR1cm4gRVJST1JDTEFTUztcbiAgfVxuXG4gIGZ1bmN0aW9uIHRva2VuRmFjdG9yeShkZWxpbWl0ZXIsIHNpbmdsZWxpbmUsIG91dGNsYXNzKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHN0cmVhbSwgc3RhdGUpIHtcbiAgICAgIHdoaWxlICghc3RyZWFtLmVvbCgpKSB7XG4gICAgICAgIHN0cmVhbS5lYXRXaGlsZSgvW14nXCJcXC9cXFxcXS8pO1xuICAgICAgICBpZiAoc3RyZWFtLmVhdChcIlxcXFxcIikpIHtcbiAgICAgICAgICBzdHJlYW0ubmV4dCgpO1xuICAgICAgICAgIGlmIChzaW5nbGVsaW5lICYmIHN0cmVhbS5lb2woKSkge1xuICAgICAgICAgICAgcmV0dXJuIG91dGNsYXNzO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChzdHJlYW0ubWF0Y2goZGVsaW1pdGVyKSkge1xuICAgICAgICAgIHN0YXRlLnRva2VuaXplID0gdG9rZW5CYXNlO1xuICAgICAgICAgIHJldHVybiBvdXRjbGFzcztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdHJlYW0uZWF0KC9bJ1wiXFwvXS8pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoc2luZ2xlbGluZSkge1xuICAgICAgICBpZiAocGFyc2VyQ29uZi5zaW5nbGVMaW5lU3RyaW5nRXJyb3JzKSB7XG4gICAgICAgICAgb3V0Y2xhc3MgPSBFUlJPUkNMQVNTO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0YXRlLnRva2VuaXplID0gdG9rZW5CYXNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gb3V0Y2xhc3M7XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxvbmdDb21tZW50KHN0cmVhbSwgc3RhdGUpIHtcbiAgICB3aGlsZSAoIXN0cmVhbS5lb2woKSkge1xuICAgICAgc3RyZWFtLmVhdFdoaWxlKC9bXiNdLyk7XG4gICAgICBpZiAoc3RyZWFtLm1hdGNoKFwiIyMjXCIpKSB7XG4gICAgICAgIHN0YXRlLnRva2VuaXplID0gdG9rZW5CYXNlO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHN0cmVhbS5lYXRXaGlsZShcIiNcIik7XG4gICAgfVxuICAgIHJldHVybiBcImNvbW1lbnRcIjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGluZGVudChzdHJlYW0sIHN0YXRlLCB0eXBlKSB7XG4gICAgdHlwZSA9IHR5cGUgfHwgXCJjb2ZmZWVcIjtcbiAgICB2YXIgb2Zmc2V0ID0gMCwgYWxpZ24gPSBmYWxzZSwgYWxpZ25PZmZzZXQgPSBudWxsO1xuICAgIGZvciAodmFyIHNjb3BlID0gc3RhdGUuc2NvcGU7IHNjb3BlOyBzY29wZSA9IHNjb3BlLnByZXYpIHtcbiAgICAgIGlmIChzY29wZS50eXBlID09PSBcImNvZmZlZVwiIHx8IHNjb3BlLnR5cGUgPT0gXCJ9XCIpIHtcbiAgICAgICAgb2Zmc2V0ID0gc2NvcGUub2Zmc2V0ICsgY29uZi5pbmRlbnRVbml0O1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHR5cGUgIT09IFwiY29mZmVlXCIpIHtcbiAgICAgIGFsaWduID0gbnVsbDtcbiAgICAgIGFsaWduT2Zmc2V0ID0gc3RyZWFtLmNvbHVtbigpICsgc3RyZWFtLmN1cnJlbnQoKS5sZW5ndGg7XG4gICAgfSBlbHNlIGlmIChzdGF0ZS5zY29wZS5hbGlnbikge1xuICAgICAgc3RhdGUuc2NvcGUuYWxpZ24gPSBmYWxzZTtcbiAgICB9XG4gICAgc3RhdGUuc2NvcGUgPSB7XG4gICAgICBvZmZzZXQ6IG9mZnNldCxcbiAgICAgIHR5cGU6IHR5cGUsXG4gICAgICBwcmV2OiBzdGF0ZS5zY29wZSxcbiAgICAgIGFsaWduOiBhbGlnbixcbiAgICAgIGFsaWduT2Zmc2V0OiBhbGlnbk9mZnNldFxuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBkZWRlbnQoc3RyZWFtLCBzdGF0ZSkge1xuICAgIGlmICghc3RhdGUuc2NvcGUucHJldikgcmV0dXJuO1xuICAgIGlmIChzdGF0ZS5zY29wZS50eXBlID09PSBcImNvZmZlZVwiKSB7XG4gICAgICB2YXIgX2luZGVudCA9IHN0cmVhbS5pbmRlbnRhdGlvbigpO1xuICAgICAgdmFyIG1hdGNoZWQgPSBmYWxzZTtcbiAgICAgIGZvciAodmFyIHNjb3BlID0gc3RhdGUuc2NvcGU7IHNjb3BlOyBzY29wZSA9IHNjb3BlLnByZXYpIHtcbiAgICAgICAgaWYgKF9pbmRlbnQgPT09IHNjb3BlLm9mZnNldCkge1xuICAgICAgICAgIG1hdGNoZWQgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoIW1hdGNoZWQpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICB3aGlsZSAoc3RhdGUuc2NvcGUucHJldiAmJiBzdGF0ZS5zY29wZS5vZmZzZXQgIT09IF9pbmRlbnQpIHtcbiAgICAgICAgc3RhdGUuc2NvcGUgPSBzdGF0ZS5zY29wZS5wcmV2O1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdGF0ZS5zY29wZSA9IHN0YXRlLnNjb3BlLnByZXY7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdG9rZW5MZXhlcihzdHJlYW0sIHN0YXRlKSB7XG4gICAgdmFyIHN0eWxlID0gc3RhdGUudG9rZW5pemUoc3RyZWFtLCBzdGF0ZSk7XG4gICAgdmFyIGN1cnJlbnQgPSBzdHJlYW0uY3VycmVudCgpO1xuXG4gICAgLy8gSGFuZGxlIHNjb3BlIGNoYW5nZXMuXG4gICAgaWYgKGN1cnJlbnQgPT09IFwicmV0dXJuXCIpIHtcbiAgICAgIHN0YXRlLmRlZGVudCA9IHRydWU7XG4gICAgfVxuICAgIGlmICgoKGN1cnJlbnQgPT09IFwiLT5cIiB8fCBjdXJyZW50ID09PSBcIj0+XCIpICYmIHN0cmVhbS5lb2woKSlcbiAgICAgICAgfHwgc3R5bGUgPT09IFwiaW5kZW50XCIpIHtcbiAgICAgIGluZGVudChzdHJlYW0sIHN0YXRlKTtcbiAgICB9XG4gICAgdmFyIGRlbGltaXRlcl9pbmRleCA9IFwiWyh7XCIuaW5kZXhPZihjdXJyZW50KTtcbiAgICBpZiAoZGVsaW1pdGVyX2luZGV4ICE9PSAtMSkge1xuICAgICAgaW5kZW50KHN0cmVhbSwgc3RhdGUsIFwiXSl9XCIuc2xpY2UoZGVsaW1pdGVyX2luZGV4LCBkZWxpbWl0ZXJfaW5kZXgrMSkpO1xuICAgIH1cbiAgICBpZiAoaW5kZW50S2V5d29yZHMuZXhlYyhjdXJyZW50KSl7XG4gICAgICBpbmRlbnQoc3RyZWFtLCBzdGF0ZSk7XG4gICAgfVxuICAgIGlmIChjdXJyZW50ID09IFwidGhlblwiKXtcbiAgICAgIGRlZGVudChzdHJlYW0sIHN0YXRlKTtcbiAgICB9XG5cblxuICAgIGlmIChzdHlsZSA9PT0gXCJkZWRlbnRcIikge1xuICAgICAgaWYgKGRlZGVudChzdHJlYW0sIHN0YXRlKSkge1xuICAgICAgICByZXR1cm4gRVJST1JDTEFTUztcbiAgICAgIH1cbiAgICB9XG4gICAgZGVsaW1pdGVyX2luZGV4ID0gXCJdKX1cIi5pbmRleE9mKGN1cnJlbnQpO1xuICAgIGlmIChkZWxpbWl0ZXJfaW5kZXggIT09IC0xKSB7XG4gICAgICB3aGlsZSAoc3RhdGUuc2NvcGUudHlwZSA9PSBcImNvZmZlZVwiICYmIHN0YXRlLnNjb3BlLnByZXYpXG4gICAgICAgIHN0YXRlLnNjb3BlID0gc3RhdGUuc2NvcGUucHJldjtcbiAgICAgIGlmIChzdGF0ZS5zY29wZS50eXBlID09IGN1cnJlbnQpXG4gICAgICAgIHN0YXRlLnNjb3BlID0gc3RhdGUuc2NvcGUucHJldjtcbiAgICB9XG4gICAgaWYgKHN0YXRlLmRlZGVudCAmJiBzdHJlYW0uZW9sKCkpIHtcbiAgICAgIGlmIChzdGF0ZS5zY29wZS50eXBlID09IFwiY29mZmVlXCIgJiYgc3RhdGUuc2NvcGUucHJldilcbiAgICAgICAgc3RhdGUuc2NvcGUgPSBzdGF0ZS5zY29wZS5wcmV2O1xuICAgICAgc3RhdGUuZGVkZW50ID0gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHN0eWxlO1xuICB9XG5cbiAgdmFyIGV4dGVybmFsID0ge1xuICAgIHN0YXJ0U3RhdGU6IGZ1bmN0aW9uKGJhc2Vjb2x1bW4pIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRva2VuaXplOiB0b2tlbkJhc2UsXG4gICAgICAgIHNjb3BlOiB7b2Zmc2V0OmJhc2Vjb2x1bW4gfHwgMCwgdHlwZTpcImNvZmZlZVwiLCBwcmV2OiBudWxsLCBhbGlnbjogZmFsc2V9LFxuICAgICAgICBwcm9wOiBmYWxzZSxcbiAgICAgICAgZGVkZW50OiAwXG4gICAgICB9O1xuICAgIH0sXG5cbiAgICB0b2tlbjogZnVuY3Rpb24oc3RyZWFtLCBzdGF0ZSkge1xuICAgICAgdmFyIGZpbGxBbGlnbiA9IHN0YXRlLnNjb3BlLmFsaWduID09PSBudWxsICYmIHN0YXRlLnNjb3BlO1xuICAgICAgaWYgKGZpbGxBbGlnbiAmJiBzdHJlYW0uc29sKCkpIGZpbGxBbGlnbi5hbGlnbiA9IGZhbHNlO1xuXG4gICAgICB2YXIgc3R5bGUgPSB0b2tlbkxleGVyKHN0cmVhbSwgc3RhdGUpO1xuICAgICAgaWYgKHN0eWxlICYmIHN0eWxlICE9IFwiY29tbWVudFwiKSB7XG4gICAgICAgIGlmIChmaWxsQWxpZ24pIGZpbGxBbGlnbi5hbGlnbiA9IHRydWU7XG4gICAgICAgIHN0YXRlLnByb3AgPSBzdHlsZSA9PSBcInB1bmN0dWF0aW9uXCIgJiYgc3RyZWFtLmN1cnJlbnQoKSA9PSBcIi5cIlxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc3R5bGU7XG4gICAgfSxcblxuICAgIGluZGVudDogZnVuY3Rpb24oc3RhdGUsIHRleHQpIHtcbiAgICAgIGlmIChzdGF0ZS50b2tlbml6ZSAhPSB0b2tlbkJhc2UpIHJldHVybiAwO1xuICAgICAgdmFyIHNjb3BlID0gc3RhdGUuc2NvcGU7XG4gICAgICB2YXIgY2xvc2VyID0gdGV4dCAmJiBcIl0pfVwiLmluZGV4T2YodGV4dC5jaGFyQXQoMCkpID4gLTE7XG4gICAgICBpZiAoY2xvc2VyKSB3aGlsZSAoc2NvcGUudHlwZSA9PSBcImNvZmZlZVwiICYmIHNjb3BlLnByZXYpIHNjb3BlID0gc2NvcGUucHJldjtcbiAgICAgIHZhciBjbG9zZXMgPSBjbG9zZXIgJiYgc2NvcGUudHlwZSA9PT0gdGV4dC5jaGFyQXQoMCk7XG4gICAgICBpZiAoc2NvcGUuYWxpZ24pXG4gICAgICAgIHJldHVybiBzY29wZS5hbGlnbk9mZnNldCAtIChjbG9zZXMgPyAxIDogMCk7XG4gICAgICBlbHNlXG4gICAgICAgIHJldHVybiAoY2xvc2VzID8gc2NvcGUucHJldiA6IHNjb3BlKS5vZmZzZXQ7XG4gICAgfSxcblxuICAgIGxpbmVDb21tZW50OiBcIiNcIixcbiAgICBmb2xkOiBcImluZGVudFwiXG4gIH07XG4gIHJldHVybiBleHRlcm5hbDtcbn0pO1xuXG4vLyBJQU5BIHJlZ2lzdGVyZWQgbWVkaWEgdHlwZVxuLy8gaHR0cHM6Ly93d3cuaWFuYS5vcmcvYXNzaWdubWVudHMvbWVkaWEtdHlwZXMvXG5Db2RlTWlycm9yLmRlZmluZU1JTUUoXCJhcHBsaWNhdGlvbi92bmQuY29mZmVlc2NyaXB0XCIsIFwiY29mZmVlc2NyaXB0XCIpO1xuXG5Db2RlTWlycm9yLmRlZmluZU1JTUUoXCJ0ZXh0L3gtY29mZmVlc2NyaXB0XCIsIFwiY29mZmVlc2NyaXB0XCIpO1xuQ29kZU1pcnJvci5kZWZpbmVNSU1FKFwidGV4dC9jb2ZmZWVzY3JpcHRcIiwgXCJjb2ZmZWVzY3JpcHRcIik7XG5cbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==