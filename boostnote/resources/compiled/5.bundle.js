(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"./node_modules/codemirror/addon/mode/multiplex.js":function(e,n,t){!function(e){"use strict";e.multiplexingMode=function(n){var t=Array.prototype.slice.call(arguments,1);function r(e,n,t,r){if("string"==typeof n){var o=e.indexOf(n,t);return r&&o>-1?o+n.length:o}var i=n.exec(t?e.slice(t):e);return i?i.index+t+(r?i[0].length:0):-1}return{startState:function(){return{outer:e.startState(n),innerActive:null,inner:null}},copyState:function(t){return{outer:e.copyState(n,t.outer),innerActive:t.innerActive,inner:t.innerActive&&e.copyState(t.innerActive.mode,t.inner)}},token:function(o,i){if(i.innerActive){var a=i.innerActive;if(d=o.string,!a.close&&o.sol())return i.innerActive=i.inner=null,this.token(o,i);if((u=a.close?r(d,a.close,o.pos,a.parseDelimiters):-1)==o.pos&&!a.parseDelimiters)return o.match(a.close),i.innerActive=i.inner=null,a.delimStyle&&a.delimStyle+" "+a.delimStyle+"-close";u>-1&&(o.string=d.slice(0,u));var l=a.mode.token(o,i.inner);return u>-1&&(o.string=d),u==o.pos&&a.parseDelimiters&&(i.innerActive=i.inner=null),a.innerStyle&&(l=l?l+" "+a.innerStyle:a.innerStyle),l}for(var s=1/0,d=o.string,c=0;c<t.length;++c){var u,p=t[c];if((u=r(d,p.open,o.pos))==o.pos){p.parseDelimiters||o.match(p.open),i.innerActive=p;var m=0;if(n.indent){var f=n.indent(i.outer,"","");f!==e.Pass&&(m=f)}return i.inner=e.startState(p.mode,m),p.delimStyle&&p.delimStyle+" "+p.delimStyle+"-open"}-1!=u&&u<s&&(s=u)}s!=1/0&&(o.string=d.slice(0,s));var g=n.token(o,i.outer);return s!=1/0&&(o.string=d),g},indent:function(t,r,o){var i=t.innerActive?t.innerActive.mode:n;return i.indent?i.indent(t.innerActive?t.inner:t.outer,r,o):e.Pass},blankLine:function(r){var o=r.innerActive?r.innerActive.mode:n;if(o.blankLine&&o.blankLine(r.innerActive?r.inner:r.outer),r.innerActive)"\n"===r.innerActive.close&&(r.innerActive=r.inner=null);else for(var i=0;i<t.length;++i){var a=t[i];"\n"===a.open&&(r.innerActive=a,r.inner=e.startState(a.mode,o.indent?o.indent(r.outer,"",""):0))}},electricChars:n.electricChars,innerMode:function(e){return e.inner?{state:e.inner,mode:e.innerActive.mode}:{state:e.outer,mode:n}}}}}(t("./node_modules/codemirror/lib/codemirror.js"))},"./node_modules/codemirror/addon/mode/simple.js":function(e,n,t){!function(e){"use strict";function n(e,n){if(!e.hasOwnProperty(n))throw new Error("Undefined state "+n+" in simple mode")}function t(e,n){if(!e)return/(?:)/;var t="";return e instanceof RegExp?(e.ignoreCase&&(t="i"),e=e.source):e=String(e),new RegExp((!1===n?"":"^")+"(?:"+e+")",t)}function r(e,r){(e.next||e.push)&&n(r,e.next||e.push),this.regex=t(e.regex),this.token=function(e){if(!e)return null;if(e.apply)return e;if("string"==typeof e)return e.replace(/\./g," ");for(var n=[],t=0;t<e.length;t++)n.push(e[t]&&e[t].replace(/\./g," "));return n}(e.token),this.data=e}function o(e,n){return function(t,r){if(r.pending){var o=r.pending.shift();return 0==r.pending.length&&(r.pending=null),t.pos+=o.text.length,o.token}if(r.local){if(r.local.end&&t.match(r.local.end)){var i=r.local.endToken||null;return r.local=r.localState=null,i}var l;return i=r.local.mode.token(t,r.localState),r.local.endScan&&(l=r.local.endScan.exec(t.current()))&&(t.pos=t.start+l.index),i}for(var s=e[r.state],d=0;d<s.length;d++){var c=s[d],u=(!c.data.sol||t.sol())&&t.match(c.regex);if(u){c.data.next?r.state=c.data.next:c.data.push?((r.stack||(r.stack=[])).push(r.state),r.state=c.data.push):c.data.pop&&r.stack&&r.stack.length&&(r.state=r.stack.pop()),c.data.mode&&a(n,r,c.data.mode,c.token),c.data.indent&&r.indent.push(t.indentation()+n.indentUnit),c.data.dedent&&r.indent.pop();var p=c.token;if(p&&p.apply&&(p=p(u)),u.length>2&&c.token&&"string"!=typeof c.token){r.pending=[];for(var m=2;m<u.length;m++)u[m]&&r.pending.push({text:u[m],token:c.token[m-1]});return t.backUp(u[0].length-(u[1]?u[1].length:0)),p[0]}return p&&p.join?p[0]:p}}return t.next(),null}}function i(e,n){if(e===n)return!0;if(!e||"object"!=typeof e||!n||"object"!=typeof n)return!1;var t=0;for(var r in e)if(e.hasOwnProperty(r)){if(!n.hasOwnProperty(r)||!i(e[r],n[r]))return!1;t++}for(var r in n)n.hasOwnProperty(r)&&t--;return 0==t}function a(n,r,o,a){var l;if(o.persistent)for(var s=r.persistentStates;s&&!l;s=s.next)(o.spec?i(o.spec,s.spec):o.mode==s.mode)&&(l=s);var d=l?l.mode:o.mode||e.getMode(n,o.spec),c=l?l.state:e.startState(d);o.persistent&&!l&&(r.persistentStates={mode:d,spec:o.spec,state:c,next:r.persistentStates}),r.localState=c,r.local={mode:d,end:o.end&&t(o.end),endScan:o.end&&!1!==o.forceEnd&&t(o.end,!1),endToken:a&&a.join?a[a.length-1]:a}}function l(n,t){return function(r,o,i){if(r.local&&r.local.mode.indent)return r.local.mode.indent(r.localState,o,i);if(null==r.indent||r.local||t.dontIndentStates&&function(e,n){for(var t=0;t<n.length;t++)if(n[t]===e)return!0}(r.state,t.dontIndentStates)>-1)return e.Pass;var a=r.indent.length-1,l=n[r.state];e:for(;;){for(var s=0;s<l.length;s++){var d=l[s];if(d.data.dedent&&!1!==d.data.dedentIfLineStart){var c=d.regex.exec(o);if(c&&c[0]){a--,(d.next||d.push)&&(l=n[d.next||d.push]),o=o.slice(c[0].length);continue e}}}break}return a<0?0:r.indent[a]}}e.defineSimpleMode=function(n,t){e.defineMode(n,(function(n){return e.simpleMode(n,t)}))},e.simpleMode=function(t,i){n(i,"start");var a={},s=i.meta||{},d=!1;for(var c in i)if(c!=s&&i.hasOwnProperty(c))for(var u=a[c]=[],p=i[c],m=0;m<p.length;m++){var f=p[m];u.push(new r(f,i)),(f.indent||f.dedent)&&(d=!0)}var g={startState:function(){return{state:"start",pending:null,local:null,localState:null,indent:d?[]:null}},copyState:function(n){var t={state:n.state,pending:n.pending,local:n.local,localState:null,indent:n.indent&&n.indent.slice(0)};n.localState&&(t.localState=e.copyState(n.local.mode,n.localState)),n.stack&&(t.stack=n.stack.slice(0));for(var r=n.persistentStates;r;r=r.next)t.persistentStates={mode:r.mode,spec:r.spec,state:r.state==n.localState?t.localState:e.copyState(r.mode,r.state),next:t.persistentStates};return t},token:o(a,t),innerMode:function(e){return e.local&&{mode:e.local.mode,state:e.localState}},indent:l(a,s)};if(s)for(var h in s)s.hasOwnProperty(h)&&(g[h]=s[h]);return g}}(t("./node_modules/codemirror/lib/codemirror.js"))},"./node_modules/codemirror/mode/handlebars/handlebars.js":function(e,n,t){!function(e){"use strict";e.defineSimpleMode("handlebars-tags",{start:[{regex:/\{\{\{/,push:"handlebars_raw",token:"tag"},{regex:/\{\{!--/,push:"dash_comment",token:"comment"},{regex:/\{\{!/,push:"comment",token:"comment"},{regex:/\{\{/,push:"handlebars",token:"tag"}],handlebars_raw:[{regex:/\}\}\}/,pop:!0,token:"tag"}],handlebars:[{regex:/\}\}/,pop:!0,token:"tag"},{regex:/"(?:[^\\"]|\\.)*"?/,token:"string"},{regex:/'(?:[^\\']|\\.)*'?/,token:"string"},{regex:/>|[#\/]([A-Za-z_]\w*)/,token:"keyword"},{regex:/(?:else|this)\b/,token:"keyword"},{regex:/\d+/i,token:"number"},{regex:/=|~|@|true|false/,token:"atom"},{regex:/(?:\.\.\/)*(?:[A-Za-z_][\w\.]*)+/,token:"variable-2"}],dash_comment:[{regex:/--\}\}/,pop:!0,token:"comment"},{regex:/./,token:"comment"}],comment:[{regex:/\}\}/,pop:!0,token:"comment"},{regex:/./,token:"comment"}],meta:{blockCommentStart:"{{--",blockCommentEnd:"--}}"}}),e.defineMode("handlebars",(function(n,t){var r=e.getMode(n,"handlebars-tags");return t&&t.base?e.multiplexingMode(e.getMode(n,t.base),{open:"{{",close:"}}",mode:r,parseDelimiters:!0}):r})),e.defineMIME("text/x-handlebars-template","handlebars")}(t("./node_modules/codemirror/lib/codemirror.js"),t("./node_modules/codemirror/addon/mode/simple.js"),t("./node_modules/codemirror/addon/mode/multiplex.js"))}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29kZW1pcnJvci9hZGRvbi9tb2RlL211bHRpcGxleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29kZW1pcnJvci9hZGRvbi9tb2RlL3NpbXBsZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29kZW1pcnJvci9tb2RlL2hhbmRsZWJhcnMvaGFuZGxlYmFycy5qcyJdLCJuYW1lcyI6WyJDb2RlTWlycm9yIiwibXVsdGlwbGV4aW5nTW9kZSIsIm91dGVyIiwib3RoZXJzIiwiQXJyYXkiLCJwcm90b3R5cGUiLCJzbGljZSIsImNhbGwiLCJhcmd1bWVudHMiLCJpbmRleE9mIiwic3RyaW5nIiwicGF0dGVybiIsImZyb20iLCJyZXR1cm5FbmQiLCJmb3VuZCIsImxlbmd0aCIsIm0iLCJleGVjIiwiaW5kZXgiLCJzdGFydFN0YXRlIiwiaW5uZXJBY3RpdmUiLCJpbm5lciIsImNvcHlTdGF0ZSIsInN0YXRlIiwibW9kZSIsInRva2VuIiwic3RyZWFtIiwiY3VySW5uZXIiLCJvbGRDb250ZW50IiwiY2xvc2UiLCJzb2wiLCJ0aGlzIiwicG9zIiwicGFyc2VEZWxpbWl0ZXJzIiwibWF0Y2giLCJkZWxpbVN0eWxlIiwiaW5uZXJUb2tlbiIsImlubmVyU3R5bGUiLCJjdXRPZmYiLCJJbmZpbml0eSIsImkiLCJvdGhlciIsIm9wZW4iLCJvdXRlckluZGVudCIsImluZGVudCIsInBvc3NpYmxlT3V0ZXJJbmRlbnQiLCJQYXNzIiwib3V0ZXJUb2tlbiIsInRleHRBZnRlciIsImxpbmUiLCJibGFua0xpbmUiLCJlbGVjdHJpY0NoYXJzIiwiaW5uZXJNb2RlIiwibW9kIiwiZW5zdXJlU3RhdGUiLCJzdGF0ZXMiLCJuYW1lIiwiaGFzT3duUHJvcGVydHkiLCJFcnJvciIsInRvUmVnZXgiLCJ2YWwiLCJjYXJldCIsImZsYWdzIiwiUmVnRXhwIiwiaWdub3JlQ2FzZSIsInNvdXJjZSIsIlN0cmluZyIsIlJ1bGUiLCJkYXRhIiwibmV4dCIsInB1c2giLCJyZWdleCIsImFwcGx5IiwicmVwbGFjZSIsInJlc3VsdCIsImFzVG9rZW4iLCJ0b2tlbkZ1bmN0aW9uIiwiY29uZmlnIiwicGVuZGluZyIsInBlbmQiLCJzaGlmdCIsInRleHQiLCJsb2NhbCIsImVuZCIsInRvayIsImVuZFRva2VuIiwibG9jYWxTdGF0ZSIsImVuZFNjYW4iLCJjdXJyZW50Iiwic3RhcnQiLCJjdXJTdGF0ZSIsInJ1bGUiLCJtYXRjaGVzIiwic3RhY2siLCJwb3AiLCJlbnRlckxvY2FsTW9kZSIsImluZGVudGF0aW9uIiwiaW5kZW50VW5pdCIsImRlZGVudCIsImoiLCJiYWNrVXAiLCJqb2luIiwiY21wIiwiYSIsImIiLCJwcm9wcyIsInByb3AiLCJzcGVjIiwicGVycyIsInBlcnNpc3RlbnQiLCJwIiwicGVyc2lzdGVudFN0YXRlcyIsImdldE1vZGUiLCJsU3RhdGUiLCJmb3JjZUVuZCIsImluZGVudEZ1bmN0aW9uIiwibWV0YSIsImRvbnRJbmRlbnRTdGF0ZXMiLCJhcnIiLCJydWxlcyIsInNjYW4iLCJkZWRlbnRJZkxpbmVTdGFydCIsImRlZmluZVNpbXBsZU1vZGUiLCJkZWZpbmVNb2RlIiwic2ltcGxlTW9kZSIsInN0YXRlc18iLCJoYXNJbmRlbnRhdGlvbiIsImxpc3QiLCJvcmlnIiwicyIsImhhbmRsZWJhcnNfcmF3IiwiaGFuZGxlYmFycyIsImRhc2hfY29tbWVudCIsImNvbW1lbnQiLCJibG9ja0NvbW1lbnRTdGFydCIsImJsb2NrQ29tbWVudEVuZCIsInBhcnNlckNvbmZpZyIsImJhc2UiLCJkZWZpbmVNSU1FIl0sIm1hcHBpbmdzIjoiOEhBVUcsU0FBU0EsR0FDWixhQUVBQSxFQUFXQyxpQkFBbUIsU0FBU0MsR0FFckMsSUFBSUMsRUFBU0MsTUFBTUMsVUFBVUMsTUFBTUMsS0FBS0MsVUFBVyxHQUVuRCxTQUFTQyxFQUFRQyxFQUFRQyxFQUFTQyxFQUFNQyxHQUN0QyxHQUFzQixpQkFBWEYsRUFBcUIsQ0FDOUIsSUFBSUcs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RUFBUTJELEVBQWFDLE1BQ3hDLENBQUMvRixLQUFNLEtBQU1iLE1BQU8sS0FBTUwsS0FBTTJHLEVBQVlsRyxpQkFBaUIsSUFIZmtHLEtBT2xEbkksRUFBVzBJLFdBQVcsNkJBQThCLGNBL0RsRHJGLENBQUksRUFBUSwrQ0FBeUIsRUFBUSxrREFBNEIsRUFBUSIsImZpbGUiOiI1LmJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIENvZGVNaXJyb3IsIGNvcHlyaWdodCAoYykgYnkgTWFyaWpuIEhhdmVyYmVrZSBhbmQgb3RoZXJzXG4vLyBEaXN0cmlidXRlZCB1bmRlciBhbiBNSVQgbGljZW5zZTogaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC9MSUNFTlNFXG5cbihmdW5jdGlvbihtb2QpIHtcbiAgaWYgKHR5cGVvZiBleHBvcnRzID09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZSA9PSBcIm9iamVjdFwiKSAvLyBDb21tb25KU1xuICAgIG1vZChyZXF1aXJlKFwiLi4vLi4vbGliL2NvZGVtaXJyb3JcIikpO1xuICBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSAvLyBBTURcbiAgICBkZWZpbmUoW1wiLi4vLi4vbGliL2NvZGVtaXJyb3JcIl0sIG1vZCk7XG4gIGVsc2UgLy8gUGxhaW4gYnJvd3NlciBlbnZcbiAgICBtb2QoQ29kZU1pcnJvcik7XG59KShmdW5jdGlvbihDb2RlTWlycm9yKSB7XG5cInVzZSBzdHJpY3RcIjtcblxuQ29kZU1pcnJvci5tdWx0aXBsZXhpbmdNb2RlID0gZnVuY3Rpb24ob3V0ZXIgLyosIG90aGVycyAqLykge1xuICAvLyBPdGhlcnMgc2hvdWxkIGJlIHtvcGVuLCBjbG9zZSwgbW9kZSBbLCBkZWxpbVN0eWxlXSBbLCBpbm5lclN0eWxlXX0gb2JqZWN0c1xuICB2YXIgb3RoZXJzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcblxuICBmdW5jdGlvbiBpbmRleE9mKHN0cmluZywgcGF0dGVybiwgZnJvbSwgcmV0dXJuRW5kKSB7XG4gICAgaWYgKHR5cGVvZiBwYXR0ZXJuID09IFwic3RyaW5nXCIpIHtcbiAgICAgIHZhciBmb3VuZCA9IHN0cmluZy5pbmRleE9mKHBhdHRlcm4sIGZyb20pO1xuICAgICAgcmV0dXJuIHJldHVybkVuZCAmJiBmb3VuZCA+IC0xID8gZm91bmQgKyBwYXR0ZXJuLmxlbmd0aCA6IGZvdW5kO1xuICAgIH1cbiAgICB2YXIgbSA9IHBhdHRlcm4uZXhlYyhmcm9tID8gc3RyaW5nLnNsaWNlKGZyb20pIDogc3RyaW5nKTtcbiAgICByZXR1cm4gbSA/IG0uaW5kZXggKyBmcm9tICsgKHJldHVybkVuZCA/IG1bMF0ubGVuZ3RoIDogMCkgOiAtMTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgc3RhcnRTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBvdXRlcjogQ29kZU1pcnJvci5zdGFydFN0YXRlKG91dGVyKSxcbiAgICAgICAgaW5uZXJBY3RpdmU6IG51bGwsXG4gICAgICAgIGlubmVyOiBudWxsXG4gICAgICB9O1xuICAgIH0sXG5cbiAgICBjb3B5U3RhdGU6IGZ1bmN0aW9uKHN0YXRlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBvdXRlcjogQ29kZU1pcnJvci5jb3B5U3RhdGUob3V0ZXIsIHN0YXRlLm91dGVyKSxcbiAgICAgICAgaW5uZXJBY3RpdmU6IHN0YXRlLmlubmVyQWN0aXZlLFxuICAgICAgICBpbm5lcjogc3RhdGUuaW5uZXJBY3RpdmUgJiYgQ29kZU1pcnJvci5jb3B5U3RhdGUoc3RhdGUuaW5uZXJBY3RpdmUubW9kZSwgc3RhdGUuaW5uZXIpXG4gICAgICB9O1xuICAgIH0sXG5cbiAgICB0b2tlbjogZnVuY3Rpb24oc3RyZWFtLCBzdGF0ZSkge1xuICAgICAgaWYgKCFzdGF0ZS5pbm5lckFjdGl2ZSkge1xuICAgICAgICB2YXIgY3V0T2ZmID0gSW5maW5pdHksIG9sZENvbnRlbnQgPSBzdHJlYW0uc3RyaW5nO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG90aGVycy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgIHZhciBvdGhlciA9IG90aGVyc1tpXTtcbiAgICAgICAgICB2YXIgZm91bmQgPSBpbmRleE9mKG9sZENvbnRlbnQsIG90aGVyLm9wZW4sIHN0cmVhbS5wb3MpO1xuICAgICAgICAgIGlmIChmb3VuZCA9PSBzdHJlYW0ucG9zKSB7XG4gICAgICAgICAgICBpZiAoIW90aGVyLnBhcnNlRGVsaW1pdGVycykgc3RyZWFtLm1hdGNoKG90aGVyLm9wZW4pO1xuICAgICAgICAgICAgc3RhdGUuaW5uZXJBY3RpdmUgPSBvdGhlcjtcblxuICAgICAgICAgICAgLy8gR2V0IHRoZSBvdXRlciBpbmRlbnQsIG1ha2luZyBzdXJlIHRvIGhhbmRsZSBDb2RlTWlycm9yLlBhc3NcbiAgICAgICAgICAgIHZhciBvdXRlckluZGVudCA9IDA7XG4gICAgICAgICAgICBpZiAob3V0ZXIuaW5kZW50KSB7XG4gICAgICAgICAgICAgIHZhciBwb3NzaWJsZU91dGVySW5kZW50ID0gb3V0ZXIuaW5kZW50KHN0YXRlLm91dGVyLCBcIlwiLCBcIlwiKTtcbiAgICAgICAgICAgICAgaWYgKHBvc3NpYmxlT3V0ZXJJbmRlbnQgIT09IENvZGVNaXJyb3IuUGFzcykgb3V0ZXJJbmRlbnQgPSBwb3NzaWJsZU91dGVySW5kZW50O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzdGF0ZS5pbm5lciA9IENvZGVNaXJyb3Iuc3RhcnRTdGF0ZShvdGhlci5tb2RlLCBvdXRlckluZGVudCk7XG4gICAgICAgICAgICByZXR1cm4gb3RoZXIuZGVsaW1TdHlsZSAmJiAob3RoZXIuZGVsaW1TdHlsZSArIFwiIFwiICsgb3RoZXIuZGVsaW1TdHlsZSArIFwiLW9wZW5cIik7XG4gICAgICAgICAgfSBlbHNlIGlmIChmb3VuZCAhPSAtMSAmJiBmb3VuZCA8IGN1dE9mZikge1xuICAgICAgICAgICAgY3V0T2ZmID0gZm91bmQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjdXRPZmYgIT0gSW5maW5pdHkpIHN0cmVhbS5zdHJpbmcgPSBvbGRDb250ZW50LnNsaWNlKDAsIGN1dE9mZik7XG4gICAgICAgIHZhciBvdXRlclRva2VuID0gb3V0ZXIudG9rZW4oc3RyZWFtLCBzdGF0ZS5vdXRlcik7XG4gICAgICAgIGlmIChjdXRPZmYgIT0gSW5maW5pdHkpIHN0cmVhbS5zdHJpbmcgPSBvbGRDb250ZW50O1xuICAgICAgICByZXR1cm4gb3V0ZXJUb2tlbjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBjdXJJbm5lciA9IHN0YXRlLmlubmVyQWN0aXZlLCBvbGRDb250ZW50ID0gc3RyZWFtLnN0cmluZztcbiAgICAgICAgaWYgKCFjdXJJbm5lci5jbG9zZSAmJiBzdHJlYW0uc29sKCkpIHtcbiAgICAgICAgICBzdGF0ZS5pbm5lckFjdGl2ZSA9IHN0YXRlLmlubmVyID0gbnVsbDtcbiAgICAgICAgICByZXR1cm4gdGhpcy50b2tlbihzdHJlYW0sIHN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZm91bmQgPSBjdXJJbm5lci5jbG9zZSA/IGluZGV4T2Yob2xkQ29udGVudCwgY3VySW5uZXIuY2xvc2UsIHN0cmVhbS5wb3MsIGN1cklubmVyLnBhcnNlRGVsaW1pdGVycykgOiAtMTtcbiAgICAgICAgaWYgKGZvdW5kID09IHN0cmVhbS5wb3MgJiYgIWN1cklubmVyLnBhcnNlRGVsaW1pdGVycykge1xuICAgICAgICAgIHN0cmVhbS5tYXRjaChjdXJJbm5lci5jbG9zZSk7XG4gICAgICAgICAgc3RhdGUuaW5uZXJBY3RpdmUgPSBzdGF0ZS5pbm5lciA9IG51bGw7XG4gICAgICAgICAgcmV0dXJuIGN1cklubmVyLmRlbGltU3R5bGUgJiYgKGN1cklubmVyLmRlbGltU3R5bGUgKyBcIiBcIiArIGN1cklubmVyLmRlbGltU3R5bGUgKyBcIi1jbG9zZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZm91bmQgPiAtMSkgc3RyZWFtLnN0cmluZyA9IG9sZENvbnRlbnQuc2xpY2UoMCwgZm91bmQpO1xuICAgICAgICB2YXIgaW5uZXJUb2tlbiA9IGN1cklubmVyLm1vZGUudG9rZW4oc3RyZWFtLCBzdGF0ZS5pbm5lcik7XG4gICAgICAgIGlmIChmb3VuZCA+IC0xKSBzdHJlYW0uc3RyaW5nID0gb2xkQ29udGVudDtcblxuICAgICAgICBpZiAoZm91bmQgPT0gc3RyZWFtLnBvcyAmJiBjdXJJbm5lci5wYXJzZURlbGltaXRlcnMpXG4gICAgICAgICAgc3RhdGUuaW5uZXJBY3RpdmUgPSBzdGF0ZS5pbm5lciA9IG51bGw7XG5cbiAgICAgICAgaWYgKGN1cklubmVyLmlubmVyU3R5bGUpIHtcbiAgICAgICAgICBpZiAoaW5uZXJUb2tlbikgaW5uZXJUb2tlbiA9IGlubmVyVG9rZW4gKyBcIiBcIiArIGN1cklubmVyLmlubmVyU3R5bGU7XG4gICAgICAgICAgZWxzZSBpbm5lclRva2VuID0gY3VySW5uZXIuaW5uZXJTdHlsZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBpbm5lclRva2VuO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBpbmRlbnQ6IGZ1bmN0aW9uKHN0YXRlLCB0ZXh0QWZ0ZXIsIGxpbmUpIHtcbiAgICAgIHZhciBtb2RlID0gc3RhdGUuaW5uZXJBY3RpdmUgPyBzdGF0ZS5pbm5lckFjdGl2ZS5tb2RlIDogb3V0ZXI7XG4gICAgICBpZiAoIW1vZGUuaW5kZW50KSByZXR1cm4gQ29kZU1pcnJvci5QYXNzO1xuICAgICAgcmV0dXJuIG1vZGUuaW5kZW50KHN0YXRlLmlubmVyQWN0aXZlID8gc3RhdGUuaW5uZXIgOiBzdGF0ZS5vdXRlciwgdGV4dEFmdGVyLCBsaW5lKTtcbiAgICB9LFxuXG4gICAgYmxhbmtMaW5lOiBmdW5jdGlvbihzdGF0ZSkge1xuICAgICAgdmFyIG1vZGUgPSBzdGF0ZS5pbm5lckFjdGl2ZSA/IHN0YXRlLmlubmVyQWN0aXZlLm1vZGUgOiBvdXRlcjtcbiAgICAgIGlmIChtb2RlLmJsYW5rTGluZSkge1xuICAgICAgICBtb2RlLmJsYW5rTGluZShzdGF0ZS5pbm5lckFjdGl2ZSA/IHN0YXRlLmlubmVyIDogc3RhdGUub3V0ZXIpO1xuICAgICAgfVxuICAgICAgaWYgKCFzdGF0ZS5pbm5lckFjdGl2ZSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG90aGVycy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgIHZhciBvdGhlciA9IG90aGVyc1tpXTtcbiAgICAgICAgICBpZiAob3RoZXIub3BlbiA9PT0gXCJcXG5cIikge1xuICAgICAgICAgICAgc3RhdGUuaW5uZXJBY3RpdmUgPSBvdGhlcjtcbiAgICAgICAgICAgIHN0YXRlLmlubmVyID0gQ29kZU1pcnJvci5zdGFydFN0YXRlKG90aGVyLm1vZGUsIG1vZGUuaW5kZW50ID8gbW9kZS5pbmRlbnQoc3RhdGUub3V0ZXIsIFwiXCIsIFwiXCIpIDogMCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHN0YXRlLmlubmVyQWN0aXZlLmNsb3NlID09PSBcIlxcblwiKSB7XG4gICAgICAgIHN0YXRlLmlubmVyQWN0aXZlID0gc3RhdGUuaW5uZXIgPSBudWxsO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBlbGVjdHJpY0NoYXJzOiBvdXRlci5lbGVjdHJpY0NoYXJzLFxuXG4gICAgaW5uZXJNb2RlOiBmdW5jdGlvbihzdGF0ZSkge1xuICAgICAgcmV0dXJuIHN0YXRlLmlubmVyID8ge3N0YXRlOiBzdGF0ZS5pbm5lciwgbW9kZTogc3RhdGUuaW5uZXJBY3RpdmUubW9kZX0gOiB7c3RhdGU6IHN0YXRlLm91dGVyLCBtb2RlOiBvdXRlcn07XG4gICAgfVxuICB9O1xufTtcblxufSk7XG4iLCIvLyBDb2RlTWlycm9yLCBjb3B5cmlnaHQgKGMpIGJ5IE1hcmlqbiBIYXZlcmJla2UgYW5kIG90aGVyc1xuLy8gRGlzdHJpYnV0ZWQgdW5kZXIgYW4gTUlUIGxpY2Vuc2U6IGh0dHBzOi8vY29kZW1pcnJvci5uZXQvTElDRU5TRVxuXG4oZnVuY3Rpb24obW9kKSB7XG4gIGlmICh0eXBlb2YgZXhwb3J0cyA9PSBcIm9iamVjdFwiICYmIHR5cGVvZiBtb2R1bGUgPT0gXCJvYmplY3RcIikgLy8gQ29tbW9uSlNcbiAgICBtb2QocmVxdWlyZShcIi4uLy4uL2xpYi9jb2RlbWlycm9yXCIpKTtcbiAgZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkgLy8gQU1EXG4gICAgZGVmaW5lKFtcIi4uLy4uL2xpYi9jb2RlbWlycm9yXCJdLCBtb2QpO1xuICBlbHNlIC8vIFBsYWluIGJyb3dzZXIgZW52XG4gICAgbW9kKENvZGVNaXJyb3IpO1xufSkoZnVuY3Rpb24oQ29kZU1pcnJvcikge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICBDb2RlTWlycm9yLmRlZmluZVNpbXBsZU1vZGUgPSBmdW5jdGlvbihuYW1lLCBzdGF0ZXMpIHtcbiAgICBDb2RlTWlycm9yLmRlZmluZU1vZGUobmFtZSwgZnVuY3Rpb24oY29uZmlnKSB7XG4gICAgICByZXR1cm4gQ29kZU1pcnJvci5zaW1wbGVNb2RlKGNvbmZpZywgc3RhdGVzKTtcbiAgICB9KTtcbiAgfTtcblxuICBDb2RlTWlycm9yLnNpbXBsZU1vZGUgPSBmdW5jdGlvbihjb25maWcsIHN0YXRlcykge1xuICAgIGVuc3VyZVN0YXRlKHN0YXRlcywgXCJzdGFydFwiKTtcbiAgICB2YXIgc3RhdGVzXyA9IHt9LCBtZXRhID0gc3RhdGVzLm1ldGEgfHwge30sIGhhc0luZGVudGF0aW9uID0gZmFsc2U7XG4gICAgZm9yICh2YXIgc3RhdGUgaW4gc3RhdGVzKSBpZiAoc3RhdGUgIT0gbWV0YSAmJiBzdGF0ZXMuaGFzT3duUHJvcGVydHkoc3RhdGUpKSB7XG4gICAgICB2YXIgbGlzdCA9IHN0YXRlc19bc3RhdGVdID0gW10sIG9yaWcgPSBzdGF0ZXNbc3RhdGVdO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcmlnLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBkYXRhID0gb3JpZ1tpXTtcbiAgICAgICAgbGlzdC5wdXNoKG5ldyBSdWxlKGRhdGEsIHN0YXRlcykpO1xuICAgICAgICBpZiAoZGF0YS5pbmRlbnQgfHwgZGF0YS5kZWRlbnQpIGhhc0luZGVudGF0aW9uID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgdmFyIG1vZGUgPSB7XG4gICAgICBzdGFydFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHtzdGF0ZTogXCJzdGFydFwiLCBwZW5kaW5nOiBudWxsLFxuICAgICAgICAgICAgICAgIGxvY2FsOiBudWxsLCBsb2NhbFN0YXRlOiBudWxsLFxuICAgICAgICAgICAgICAgIGluZGVudDogaGFzSW5kZW50YXRpb24gPyBbXSA6IG51bGx9O1xuICAgICAgfSxcbiAgICAgIGNvcHlTdGF0ZTogZnVuY3Rpb24oc3RhdGUpIHtcbiAgICAgICAgdmFyIHMgPSB7c3RhdGU6IHN0YXRlLnN0YXRlLCBwZW5kaW5nOiBzdGF0ZS5wZW5kaW5nLFxuICAgICAgICAgICAgICAgICBsb2NhbDogc3RhdGUubG9jYWwsIGxvY2FsU3RhdGU6IG51bGwsXG4gICAgICAgICAgICAgICAgIGluZGVudDogc3RhdGUuaW5kZW50ICYmIHN0YXRlLmluZGVudC5zbGljZSgwKX07XG4gICAgICAgIGlmIChzdGF0ZS5sb2NhbFN0YXRlKVxuICAgICAgICAgIHMubG9jYWxTdGF0ZSA9IENvZGVNaXJyb3IuY29weVN0YXRlKHN0YXRlLmxvY2FsLm1vZGUsIHN0YXRlLmxvY2FsU3RhdGUpO1xuICAgICAgICBpZiAoc3RhdGUuc3RhY2spXG4gICAgICAgICAgcy5zdGFjayA9IHN0YXRlLnN0YWNrLnNsaWNlKDApO1xuICAgICAgICBmb3IgKHZhciBwZXJzID0gc3RhdGUucGVyc2lzdGVudFN0YXRlczsgcGVyczsgcGVycyA9IHBlcnMubmV4dClcbiAgICAgICAgICBzLnBlcnNpc3RlbnRTdGF0ZXMgPSB7bW9kZTogcGVycy5tb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGVjOiBwZXJzLnNwZWMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlOiBwZXJzLnN0YXRlID09IHN0YXRlLmxvY2FsU3RhdGUgPyBzLmxvY2FsU3RhdGUgOiBDb2RlTWlycm9yLmNvcHlTdGF0ZShwZXJzLm1vZGUsIHBlcnMuc3RhdGUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0OiBzLnBlcnNpc3RlbnRTdGF0ZXN9O1xuICAgICAgICByZXR1cm4gcztcbiAgICAgIH0sXG4gICAgICB0b2tlbjogdG9rZW5GdW5jdGlvbihzdGF0ZXNfLCBjb25maWcpLFxuICAgICAgaW5uZXJNb2RlOiBmdW5jdGlvbihzdGF0ZSkgeyByZXR1cm4gc3RhdGUubG9jYWwgJiYge21vZGU6IHN0YXRlLmxvY2FsLm1vZGUsIHN0YXRlOiBzdGF0ZS5sb2NhbFN0YXRlfTsgfSxcbiAgICAgIGluZGVudDogaW5kZW50RnVuY3Rpb24oc3RhdGVzXywgbWV0YSlcbiAgICB9O1xuICAgIGlmIChtZXRhKSBmb3IgKHZhciBwcm9wIGluIG1ldGEpIGlmIChtZXRhLmhhc093blByb3BlcnR5KHByb3ApKVxuICAgICAgbW9kZVtwcm9wXSA9IG1ldGFbcHJvcF07XG4gICAgcmV0dXJuIG1vZGU7XG4gIH07XG5cbiAgZnVuY3Rpb24gZW5zdXJlU3RhdGUoc3RhdGVzLCBuYW1lKSB7XG4gICAgaWYgKCFzdGF0ZXMuaGFzT3duUHJvcGVydHkobmFtZSkpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmRlZmluZWQgc3RhdGUgXCIgKyBuYW1lICsgXCIgaW4gc2ltcGxlIG1vZGVcIik7XG4gIH1cblxuICBmdW5jdGlvbiB0b1JlZ2V4KHZhbCwgY2FyZXQpIHtcbiAgICBpZiAoIXZhbCkgcmV0dXJuIC8oPzopLztcbiAgICB2YXIgZmxhZ3MgPSBcIlwiO1xuICAgIGlmICh2YWwgaW5zdGFuY2VvZiBSZWdFeHApIHtcbiAgICAgIGlmICh2YWwuaWdub3JlQ2FzZSkgZmxhZ3MgPSBcImlcIjtcbiAgICAgIHZhbCA9IHZhbC5zb3VyY2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhbCA9IFN0cmluZyh2YWwpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFJlZ0V4cCgoY2FyZXQgPT09IGZhbHNlID8gXCJcIiA6IFwiXlwiKSArIFwiKD86XCIgKyB2YWwgKyBcIilcIiwgZmxhZ3MpO1xuICB9XG5cbiAgZnVuY3Rpb24gYXNUb2tlbih2YWwpIHtcbiAgICBpZiAoIXZhbCkgcmV0dXJuIG51bGw7XG4gICAgaWYgKHZhbC5hcHBseSkgcmV0dXJuIHZhbFxuICAgIGlmICh0eXBlb2YgdmFsID09IFwic3RyaW5nXCIpIHJldHVybiB2YWwucmVwbGFjZSgvXFwuL2csIFwiIFwiKTtcbiAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YWwubGVuZ3RoOyBpKyspXG4gICAgICByZXN1bHQucHVzaCh2YWxbaV0gJiYgdmFsW2ldLnJlcGxhY2UoL1xcLi9nLCBcIiBcIikpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiBSdWxlKGRhdGEsIHN0YXRlcykge1xuICAgIGlmIChkYXRhLm5leHQgfHwgZGF0YS5wdXNoKSBlbnN1cmVTdGF0ZShzdGF0ZXMsIGRhdGEubmV4dCB8fCBkYXRhLnB1c2gpO1xuICAgIHRoaXMucmVnZXggPSB0b1JlZ2V4KGRhdGEucmVnZXgpO1xuICAgIHRoaXMudG9rZW4gPSBhc1Rva2VuKGRhdGEudG9rZW4pO1xuICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gIH1cblxuICBmdW5jdGlvbiB0b2tlbkZ1bmN0aW9uKHN0YXRlcywgY29uZmlnKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHN0cmVhbSwgc3RhdGUpIHtcbiAgICAgIGlmIChzdGF0ZS5wZW5kaW5nKSB7XG4gICAgICAgIHZhciBwZW5kID0gc3RhdGUucGVuZGluZy5zaGlmdCgpO1xuICAgICAgICBpZiAoc3RhdGUucGVuZGluZy5sZW5ndGggPT0gMCkgc3RhdGUucGVuZGluZyA9IG51bGw7XG4gICAgICAgIHN0cmVhbS5wb3MgKz0gcGVuZC50ZXh0Lmxlbmd0aDtcbiAgICAgICAgcmV0dXJuIHBlbmQudG9rZW47XG4gICAgICB9XG5cbiAgICAgIGlmIChzdGF0ZS5sb2NhbCkge1xuICAgICAgICBpZiAoc3RhdGUubG9jYWwuZW5kICYmIHN0cmVhbS5tYXRjaChzdGF0ZS5sb2NhbC5lbmQpKSB7XG4gICAgICAgICAgdmFyIHRvayA9IHN0YXRlLmxvY2FsLmVuZFRva2VuIHx8IG51bGw7XG4gICAgICAgICAgc3RhdGUubG9jYWwgPSBzdGF0ZS5sb2NhbFN0YXRlID0gbnVsbDtcbiAgICAgICAgICByZXR1cm4gdG9rO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciB0b2sgPSBzdGF0ZS5sb2NhbC5tb2RlLnRva2VuKHN0cmVhbSwgc3RhdGUubG9jYWxTdGF0ZSksIG07XG4gICAgICAgICAgaWYgKHN0YXRlLmxvY2FsLmVuZFNjYW4gJiYgKG0gPSBzdGF0ZS5sb2NhbC5lbmRTY2FuLmV4ZWMoc3RyZWFtLmN1cnJlbnQoKSkpKVxuICAgICAgICAgICAgc3RyZWFtLnBvcyA9IHN0cmVhbS5zdGFydCArIG0uaW5kZXg7XG4gICAgICAgICAgcmV0dXJuIHRvaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgY3VyU3RhdGUgPSBzdGF0ZXNbc3RhdGUuc3RhdGVdO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjdXJTdGF0ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgcnVsZSA9IGN1clN0YXRlW2ldO1xuICAgICAgICB2YXIgbWF0Y2hlcyA9ICghcnVsZS5kYXRhLnNvbCB8fCBzdHJlYW0uc29sKCkpICYmIHN0cmVhbS5tYXRjaChydWxlLnJlZ2V4KTtcbiAgICAgICAgaWYgKG1hdGNoZXMpIHtcbiAgICAgICAgICBpZiAocnVsZS5kYXRhLm5leHQpIHtcbiAgICAgICAgICAgIHN0YXRlLnN0YXRlID0gcnVsZS5kYXRhLm5leHQ7XG4gICAgICAgICAgfSBlbHNlIGlmIChydWxlLmRhdGEucHVzaCkge1xuICAgICAgICAgICAgKHN0YXRlLnN0YWNrIHx8IChzdGF0ZS5zdGFjayA9IFtdKSkucHVzaChzdGF0ZS5zdGF0ZSk7XG4gICAgICAgICAgICBzdGF0ZS5zdGF0ZSA9IHJ1bGUuZGF0YS5wdXNoO1xuICAgICAgICAgIH0gZWxzZSBpZiAocnVsZS5kYXRhLnBvcCAmJiBzdGF0ZS5zdGFjayAmJiBzdGF0ZS5zdGFjay5sZW5ndGgpIHtcbiAgICAgICAgICAgIHN0YXRlLnN0YXRlID0gc3RhdGUuc3RhY2sucG9wKCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHJ1bGUuZGF0YS5tb2RlKVxuICAgICAgICAgICAgZW50ZXJMb2NhbE1vZGUoY29uZmlnLCBzdGF0ZSwgcnVsZS5kYXRhLm1vZGUsIHJ1bGUudG9rZW4pO1xuICAgICAgICAgIGlmIChydWxlLmRhdGEuaW5kZW50KVxuICAgICAgICAgICAgc3RhdGUuaW5kZW50LnB1c2goc3RyZWFtLmluZGVudGF0aW9uKCkgKyBjb25maWcuaW5kZW50VW5pdCk7XG4gICAgICAgICAgaWYgKHJ1bGUuZGF0YS5kZWRlbnQpXG4gICAgICAgICAgICBzdGF0ZS5pbmRlbnQucG9wKCk7XG4gICAgICAgICAgdmFyIHRva2VuID0gcnVsZS50b2tlblxuICAgICAgICAgIGlmICh0b2tlbiAmJiB0b2tlbi5hcHBseSkgdG9rZW4gPSB0b2tlbihtYXRjaGVzKVxuICAgICAgICAgIGlmIChtYXRjaGVzLmxlbmd0aCA+IDIgJiYgcnVsZS50b2tlbiAmJiB0eXBlb2YgcnVsZS50b2tlbiAhPSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBzdGF0ZS5wZW5kaW5nID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMjsgaiA8IG1hdGNoZXMubGVuZ3RoOyBqKyspXG4gICAgICAgICAgICAgIGlmIChtYXRjaGVzW2pdKVxuICAgICAgICAgICAgICAgIHN0YXRlLnBlbmRpbmcucHVzaCh7dGV4dDogbWF0Y2hlc1tqXSwgdG9rZW46IHJ1bGUudG9rZW5baiAtIDFdfSk7XG4gICAgICAgICAgICBzdHJlYW0uYmFja1VwKG1hdGNoZXNbMF0ubGVuZ3RoIC0gKG1hdGNoZXNbMV0gPyBtYXRjaGVzWzFdLmxlbmd0aCA6IDApKTtcbiAgICAgICAgICAgIHJldHVybiB0b2tlblswXTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHRva2VuICYmIHRva2VuLmpvaW4pIHtcbiAgICAgICAgICAgIHJldHVybiB0b2tlblswXTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRva2VuO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgc3RyZWFtLm5leHQoKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBjbXAoYSwgYikge1xuICAgIGlmIChhID09PSBiKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoIWEgfHwgdHlwZW9mIGEgIT0gXCJvYmplY3RcIiB8fCAhYiB8fCB0eXBlb2YgYiAhPSBcIm9iamVjdFwiKSByZXR1cm4gZmFsc2U7XG4gICAgdmFyIHByb3BzID0gMDtcbiAgICBmb3IgKHZhciBwcm9wIGluIGEpIGlmIChhLmhhc093blByb3BlcnR5KHByb3ApKSB7XG4gICAgICBpZiAoIWIuaGFzT3duUHJvcGVydHkocHJvcCkgfHwgIWNtcChhW3Byb3BdLCBiW3Byb3BdKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgcHJvcHMrKztcbiAgICB9XG4gICAgZm9yICh2YXIgcHJvcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgcHJvcHMtLTtcbiAgICByZXR1cm4gcHJvcHMgPT0gMDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGVudGVyTG9jYWxNb2RlKGNvbmZpZywgc3RhdGUsIHNwZWMsIHRva2VuKSB7XG4gICAgdmFyIHBlcnM7XG4gICAgaWYgKHNwZWMucGVyc2lzdGVudCkgZm9yICh2YXIgcCA9IHN0YXRlLnBlcnNpc3RlbnRTdGF0ZXM7IHAgJiYgIXBlcnM7IHAgPSBwLm5leHQpXG4gICAgICBpZiAoc3BlYy5zcGVjID8gY21wKHNwZWMuc3BlYywgcC5zcGVjKSA6IHNwZWMubW9kZSA9PSBwLm1vZGUpIHBlcnMgPSBwO1xuICAgIHZhciBtb2RlID0gcGVycyA/IHBlcnMubW9kZSA6IHNwZWMubW9kZSB8fCBDb2RlTWlycm9yLmdldE1vZGUoY29uZmlnLCBzcGVjLnNwZWMpO1xuICAgIHZhciBsU3RhdGUgPSBwZXJzID8gcGVycy5zdGF0ZSA6IENvZGVNaXJyb3Iuc3RhcnRTdGF0ZShtb2RlKTtcbiAgICBpZiAoc3BlYy5wZXJzaXN0ZW50ICYmICFwZXJzKVxuICAgICAgc3RhdGUucGVyc2lzdGVudFN0YXRlcyA9IHttb2RlOiBtb2RlLCBzcGVjOiBzcGVjLnNwZWMsIHN0YXRlOiBsU3RhdGUsIG5leHQ6IHN0YXRlLnBlcnNpc3RlbnRTdGF0ZXN9O1xuXG4gICAgc3RhdGUubG9jYWxTdGF0ZSA9IGxTdGF0ZTtcbiAgICBzdGF0ZS5sb2NhbCA9IHttb2RlOiBtb2RlLFxuICAgICAgICAgICAgICAgICAgIGVuZDogc3BlYy5lbmQgJiYgdG9SZWdleChzcGVjLmVuZCksXG4gICAgICAgICAgICAgICAgICAgZW5kU2Nhbjogc3BlYy5lbmQgJiYgc3BlYy5mb3JjZUVuZCAhPT0gZmFsc2UgJiYgdG9SZWdleChzcGVjLmVuZCwgZmFsc2UpLFxuICAgICAgICAgICAgICAgICAgIGVuZFRva2VuOiB0b2tlbiAmJiB0b2tlbi5qb2luID8gdG9rZW5bdG9rZW4ubGVuZ3RoIC0gMV0gOiB0b2tlbn07XG4gIH1cblxuICBmdW5jdGlvbiBpbmRleE9mKHZhbCwgYXJyKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIGlmIChhcnJbaV0gPT09IHZhbCkgcmV0dXJuIHRydWU7XG4gIH1cblxuICBmdW5jdGlvbiBpbmRlbnRGdW5jdGlvbihzdGF0ZXMsIG1ldGEpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oc3RhdGUsIHRleHRBZnRlciwgbGluZSkge1xuICAgICAgaWYgKHN0YXRlLmxvY2FsICYmIHN0YXRlLmxvY2FsLm1vZGUuaW5kZW50KVxuICAgICAgICByZXR1cm4gc3RhdGUubG9jYWwubW9kZS5pbmRlbnQoc3RhdGUubG9jYWxTdGF0ZSwgdGV4dEFmdGVyLCBsaW5lKTtcbiAgICAgIGlmIChzdGF0ZS5pbmRlbnQgPT0gbnVsbCB8fCBzdGF0ZS5sb2NhbCB8fCBtZXRhLmRvbnRJbmRlbnRTdGF0ZXMgJiYgaW5kZXhPZihzdGF0ZS5zdGF0ZSwgbWV0YS5kb250SW5kZW50U3RhdGVzKSA+IC0xKVxuICAgICAgICByZXR1cm4gQ29kZU1pcnJvci5QYXNzO1xuXG4gICAgICB2YXIgcG9zID0gc3RhdGUuaW5kZW50Lmxlbmd0aCAtIDEsIHJ1bGVzID0gc3RhdGVzW3N0YXRlLnN0YXRlXTtcbiAgICAgIHNjYW46IGZvciAoOzspIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBydWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciBydWxlID0gcnVsZXNbaV07XG4gICAgICAgICAgaWYgKHJ1bGUuZGF0YS5kZWRlbnQgJiYgcnVsZS5kYXRhLmRlZGVudElmTGluZVN0YXJ0ICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgdmFyIG0gPSBydWxlLnJlZ2V4LmV4ZWModGV4dEFmdGVyKTtcbiAgICAgICAgICAgIGlmIChtICYmIG1bMF0pIHtcbiAgICAgICAgICAgICAgcG9zLS07XG4gICAgICAgICAgICAgIGlmIChydWxlLm5leHQgfHwgcnVsZS5wdXNoKSBydWxlcyA9IHN0YXRlc1tydWxlLm5leHQgfHwgcnVsZS5wdXNoXTtcbiAgICAgICAgICAgICAgdGV4dEFmdGVyID0gdGV4dEFmdGVyLnNsaWNlKG1bMF0ubGVuZ3RoKTtcbiAgICAgICAgICAgICAgY29udGludWUgc2NhbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICByZXR1cm4gcG9zIDwgMCA/IDAgOiBzdGF0ZS5pbmRlbnRbcG9zXTtcbiAgICB9O1xuICB9XG59KTtcbiIsIi8vIENvZGVNaXJyb3IsIGNvcHlyaWdodCAoYykgYnkgTWFyaWpuIEhhdmVyYmVrZSBhbmQgb3RoZXJzXG4vLyBEaXN0cmlidXRlZCB1bmRlciBhbiBNSVQgbGljZW5zZTogaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC9MSUNFTlNFXG5cbihmdW5jdGlvbihtb2QpIHtcbiAgaWYgKHR5cGVvZiBleHBvcnRzID09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZSA9PSBcIm9iamVjdFwiKSAvLyBDb21tb25KU1xuICAgIG1vZChyZXF1aXJlKFwiLi4vLi4vbGliL2NvZGVtaXJyb3JcIiksIHJlcXVpcmUoXCIuLi8uLi9hZGRvbi9tb2RlL3NpbXBsZVwiKSwgcmVxdWlyZShcIi4uLy4uL2FkZG9uL21vZGUvbXVsdGlwbGV4XCIpKTtcbiAgZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkgLy8gQU1EXG4gICAgZGVmaW5lKFtcIi4uLy4uL2xpYi9jb2RlbWlycm9yXCIsIFwiLi4vLi4vYWRkb24vbW9kZS9zaW1wbGVcIiwgXCIuLi8uLi9hZGRvbi9tb2RlL211bHRpcGxleFwiXSwgbW9kKTtcbiAgZWxzZSAvLyBQbGFpbiBicm93c2VyIGVudlxuICAgIG1vZChDb2RlTWlycm9yKTtcbn0pKGZ1bmN0aW9uKENvZGVNaXJyb3IpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgQ29kZU1pcnJvci5kZWZpbmVTaW1wbGVNb2RlKFwiaGFuZGxlYmFycy10YWdzXCIsIHtcbiAgICBzdGFydDogW1xuICAgICAgeyByZWdleDogL1xce1xce1xcey8sIHB1c2g6IFwiaGFuZGxlYmFyc19yYXdcIiwgdG9rZW46IFwidGFnXCIgfSxcbiAgICAgIHsgcmVnZXg6IC9cXHtcXHshLS0vLCBwdXNoOiBcImRhc2hfY29tbWVudFwiLCB0b2tlbjogXCJjb21tZW50XCIgfSxcbiAgICAgIHsgcmVnZXg6IC9cXHtcXHshLywgICBwdXNoOiBcImNvbW1lbnRcIiwgdG9rZW46IFwiY29tbWVudFwiIH0sXG4gICAgICB7IHJlZ2V4OiAvXFx7XFx7LywgICAgcHVzaDogXCJoYW5kbGViYXJzXCIsIHRva2VuOiBcInRhZ1wiIH1cbiAgICBdLFxuICAgIGhhbmRsZWJhcnNfcmF3OiBbXG4gICAgICB7IHJlZ2V4OiAvXFx9XFx9XFx9LywgcG9wOiB0cnVlLCB0b2tlbjogXCJ0YWdcIiB9LFxuICAgIF0sXG4gICAgaGFuZGxlYmFyczogW1xuICAgICAgeyByZWdleDogL1xcfVxcfS8sIHBvcDogdHJ1ZSwgdG9rZW46IFwidGFnXCIgfSxcblxuICAgICAgLy8gRG91YmxlIGFuZCBzaW5nbGUgcXVvdGVzXG4gICAgICB7IHJlZ2V4OiAvXCIoPzpbXlxcXFxcIl18XFxcXC4pKlwiPy8sIHRva2VuOiBcInN0cmluZ1wiIH0sXG4gICAgICB7IHJlZ2V4OiAvJyg/OlteXFxcXCddfFxcXFwuKSonPy8sIHRva2VuOiBcInN0cmluZ1wiIH0sXG5cbiAgICAgIC8vIEhhbmRsZWJhcnMga2V5d29yZHNcbiAgICAgIHsgcmVnZXg6IC8+fFsjXFwvXShbQS1aYS16X11cXHcqKS8sIHRva2VuOiBcImtleXdvcmRcIiB9LFxuICAgICAgeyByZWdleDogLyg/OmVsc2V8dGhpcylcXGIvLCB0b2tlbjogXCJrZXl3b3JkXCIgfSxcblxuICAgICAgLy8gTnVtZXJhbFxuICAgICAgeyByZWdleDogL1xcZCsvaSwgdG9rZW46IFwibnVtYmVyXCIgfSxcblxuICAgICAgLy8gQXRvbXMgbGlrZSA9IGFuZCAuXG4gICAgICB7IHJlZ2V4OiAvPXx+fEB8dHJ1ZXxmYWxzZS8sIHRva2VuOiBcImF0b21cIiB9LFxuXG4gICAgICAvLyBQYXRoc1xuICAgICAgeyByZWdleDogLyg/OlxcLlxcLlxcLykqKD86W0EtWmEtel9dW1xcd1xcLl0qKSsvLCB0b2tlbjogXCJ2YXJpYWJsZS0yXCIgfVxuICAgIF0sXG4gICAgZGFzaF9jb21tZW50OiBbXG4gICAgICB7IHJlZ2V4OiAvLS1cXH1cXH0vLCBwb3A6IHRydWUsIHRva2VuOiBcImNvbW1lbnRcIiB9LFxuXG4gICAgICAvLyBDb21tZW50ZWQgY29kZVxuICAgICAgeyByZWdleDogLy4vLCB0b2tlbjogXCJjb21tZW50XCJ9XG4gICAgXSxcbiAgICBjb21tZW50OiBbXG4gICAgICB7IHJlZ2V4OiAvXFx9XFx9LywgcG9wOiB0cnVlLCB0b2tlbjogXCJjb21tZW50XCIgfSxcbiAgICAgIHsgcmVnZXg6IC8uLywgdG9rZW46IFwiY29tbWVudFwiIH1cbiAgICBdLFxuICAgIG1ldGE6IHtcbiAgICAgIGJsb2NrQ29tbWVudFN0YXJ0OiBcInt7LS1cIixcbiAgICAgIGJsb2NrQ29tbWVudEVuZDogXCItLX19XCJcbiAgICB9XG4gIH0pO1xuXG4gIENvZGVNaXJyb3IuZGVmaW5lTW9kZShcImhhbmRsZWJhcnNcIiwgZnVuY3Rpb24oY29uZmlnLCBwYXJzZXJDb25maWcpIHtcbiAgICB2YXIgaGFuZGxlYmFycyA9IENvZGVNaXJyb3IuZ2V0TW9kZShjb25maWcsIFwiaGFuZGxlYmFycy10YWdzXCIpO1xuICAgIGlmICghcGFyc2VyQ29uZmlnIHx8ICFwYXJzZXJDb25maWcuYmFzZSkgcmV0dXJuIGhhbmRsZWJhcnM7XG4gICAgcmV0dXJuIENvZGVNaXJyb3IubXVsdGlwbGV4aW5nTW9kZShcbiAgICAgIENvZGVNaXJyb3IuZ2V0TW9kZShjb25maWcsIHBhcnNlckNvbmZpZy5iYXNlKSxcbiAgICAgIHtvcGVuOiBcInt7XCIsIGNsb3NlOiBcIn19XCIsIG1vZGU6IGhhbmRsZWJhcnMsIHBhcnNlRGVsaW1pdGVyczogdHJ1ZX1cbiAgICApO1xuICB9KTtcblxuICBDb2RlTWlycm9yLmRlZmluZU1JTUUoXCJ0ZXh0L3gtaGFuZGxlYmFycy10ZW1wbGF0ZVwiLCBcImhhbmRsZWJhcnNcIik7XG59KTtcbiJdLCJzb3VyY2VSb290IjoiIn0=