(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{"./node_modules/codemirror/mode/ruby/ruby.js":function(e,t,n){!function(e){"use strict";e.defineMode("ruby",(function(t){function wordObj(e){for(var t={},n=0,r=e.length;n<r;++n)t[e[n]]=!0;return t}var n,r=wordObj(["alias","and","BEGIN","begin","break","case","class","def","defined?","do","else","elsif","END","end","ensure","false","for","if","in","module","next","not","or","redo","rescue","retry","return","self","super","then","true","undef","unless","until","when","while","yield","nil","raise","throw","catch","fail","loop","callcc","caller","lambda","proc","public","protected","private","require","load","require_relative","extend","autoload","__END__","__FILE__","__LINE__","__dir__"]),i=wordObj(["def","class","case","for","while","until","module","then","catch","loop","proc","begin"]),o=wordObj(["end","until"]),a={"[":"]","{":"}","(":")"},u={"]":"[","}":"{",")":"("};function d(e,t,n){return n.tokenize.push(e),e(t,n)}function l(e,t){if(e.sol()&&e.match("=begin")&&e.eol())return t.tokenize.push(readBlockComment),"comment";if(e.eatSpace())return null;var r,i,o,u=e.next();if("`"==u||"'"==u||'"'==u)return d(c(u,"string",'"'==u||"`"==u),e,t);if("/"==u)return function(e){for(var t,n=e.pos,r=0,i=!1,o=!1;null!=(t=e.next());)if(o)o=!1;else{if("[{(".indexOf(t)>-1)r++;else if("]})".indexOf(t)>-1){if(--r<0)break}else if("/"==t&&0==r){i=!0;break}o="\\"==t}return e.backUp(e.pos-n),i}(e)?d(c(u,"string-2",!0),e,t):"operator";if("%"==u){var l="string",f=!0;e.eat("s")?l="atom":e.eat(/[WQ]/)?l="string":e.eat(/[r]/)?l="string-2":e.eat(/[wxq]/)&&(l="string",f=!1);var s=e.eat(/[^\w\s=]/);return s?(a.propertyIsEnumerable(s)&&(s=a[s]),d(c(s,l,f,!0),e,t)):"operator"}if("#"==u)return e.skipToEnd(),"comment";if("<"==u&&(r=e.match(/^<([-~])[\`\"\']?([a-zA-Z_?]\w*)[\`\"\']?(?:;|$)/)))return d((i=r[2],o=r[1],function(e,t){return o&&e.eatSpace(),e.match(i)?t.tokenize.pop():e.skipToEnd(),"string"}),e,t);if("0"==u)return e.eat("x")?e.eatWhile(/[\da-fA-F]/):e.eat("b")?e.eatWhile(/[01]/):e.eatWhile(/[0-7]/),"number";if(/\d/.test(u))return e.match(/^[\d_]*(?:\.[\d_]+)?(?:[eE][+\-]?[\d_]+)?/),"number";if("?"==u){for(;e.match(/^\\[CM]-/););return e.eat("\\")?e.eatWhile(/\w/):e.next(),"string"}if(":"==u)return e.eat("'")?d(c("'","atom",!1),e,t):e.eat('"')?d(c('"',"atom",!0),e,t):e.eat(/[\<\>]/)?(e.eat(/[\<\>]/),"atom"):e.eat(/[\+\-\*\/\&\|\:\!]/)?"atom":e.eat(/[a-zA-Z$@_\xa1-\uffff]/)?(e.eatWhile(/[\w$\xa1-\uffff]/),e.eat(/[\?\!\=]/),"atom"):"operator";if("@"==u&&e.match(/^@?[a-zA-Z_\xa1-\uffff]/))return e.eat("@"),e.eatWhile(/[\w\xa1-\uffff]/),"variable-2";if("$"==u)return e.eat(/[a-zA-Z_]/)?e.eatWhile(/[\w]/):e.eat(/\d/)?e.eat(/\d/):e.next(),"variable-3";if(/[a-zA-Z_\xa1-\uffff]/.test(u))return e.eatWhile(/[\w\xa1-\uffff]/),e.eat(/[\?\!]/),e.eat(":")?"atom":"ident";if("|"!=u||!t.varList&&"{"!=t.lastTok&&"do"!=t.lastTok){if(/[\(\)\[\]{}\\;]/.test(u))return n=u,null;if("-"==u&&e.eat(">"))return"arrow";if(/[=+\-\/*:\.^%<>~|]/.test(u)){var p=e.eatWhile(/[=+\-\/*:\.^%<>~|]/);return"."!=u||p||(n="."),"operator"}return null}return n="|",null}function f(e){return e||(e=1),function(t,n){if("}"==t.peek()){if(1==e)return n.tokenize.pop(),n.tokenize[n.tokenize.length-1](t,n);n.tokenize[n.tokenize.length-1]=f(e-1)}else"{"==t.peek()&&(n.tokenize[n.tokenize.length-1]=f(e+1));return l(t,n)}}function s(){var e=!1;return function(t,n){return e?(n.tokenize.pop(),n.tokenize[n.tokenize.length-1](t,n)):(e=!0,l(t,n))}}function c(e,t,n,r){return function(i,o){var a,u=!1;for("read-quoted-paused"===o.context.type&&(o.context=o.context.prev,i.eat("}"));null!=(a=i.next());){if(a==e&&(r||!u)){o.tokenize.pop();break}if(n&&"#"==a&&!u){if(i.eat("{")){"}"==e&&(o.context={prev:o.context,type:"read-quoted-paused"}),o.tokenize.push(f());break}if(/[@\$]/.test(i.peek())){o.tokenize.push(s());break}}u=!u&&"\\"==a}return t}}function readBlockComment(e,t){return e.sol()&&e.match("=end")&&e.eol()&&t.tokenize.pop(),e.skipToEnd(),"comment"}return{startState:function(){return{tokenize:[l],indented:0,context:{type:"top",indented:-t.indentUnit},continuedLine:!1,lastTok:null,varList:!1}},token:function(e,t){n=null,e.sol()&&(t.indented=e.indentation());var a,u=t.tokenize[t.tokenize.length-1](e,t),d=n;if("ident"==u){var l=e.current();"keyword"==(u="."==t.lastTok?"property":r.propertyIsEnumerable(e.current())?"keyword":/^[A-Z]/.test(l)?"tag":"def"==t.lastTok||"class"==t.lastTok||t.varList?"def":"variable")&&(d=l,i.propertyIsEnumerable(l)?a="indent":o.propertyIsEnumerable(l)?a="dedent":"if"!=l&&"unless"!=l||e.column()!=e.indentation()?"do"==l&&t.context.indented<t.indented&&(a="indent"):a="indent")}return(n||u&&"comment"!=u)&&(t.lastTok=d),"|"==n&&(t.varList=!t.varList),"indent"==a||/[\(\[\{]/.test(n)?t.context={prev:t.context,type:n||u,indented:t.indented}:("dedent"==a||/[\)\]\}]/.test(n))&&t.context.prev&&(t.context=t.context.prev),e.eol()&&(t.continuedLine="\\"==n||"operator"==u),u},indent:function(n,r){if(n.tokenize[n.tokenize.length-1]!=l)return e.Pass;var i=r&&r.charAt(0),o=n.context,a=o.type==u[i]||"keyword"==o.type&&/^(?:end|until|else|elsif|when|rescue)\b/.test(r);return o.indented+(a?0:t.indentUnit)+(n.continuedLine?t.indentUnit:0)},electricInput:/^\s*(?:end|rescue|elsif|else|\})$/,lineComment:"#",fold:"indent"}})),e.defineMIME("text/x-ruby","ruby")}(n("./node_modules/codemirror/lib/codemirror.js"))}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29kZW1pcnJvci9tb2RlL3J1YnkvcnVieS5qcyJdLCJuYW1lcyI6WyJDb2RlTWlycm9yIiwiZGVmaW5lTW9kZSIsImNvbmZpZyIsIndvcmRPYmoiLCJ3b3JkcyIsIm8iLCJpIiwiZSIsImxlbmd0aCIsImN1clB1bmMiLCJrZXl3b3JkcyIsImluZGVudFdvcmRzIiwiZGVkZW50V29yZHMiLCJvcGVuaW5nIiwiY2xvc2luZyIsImNoYWluIiwibmV3dG9rIiwic3RyZWFtIiwic3RhdGUiLCJ0b2tlbml6ZSIsInB1c2giLCJ0b2tlbkJhc2UiLCJzb2wiLCJtYXRjaCIsImVvbCIsInJlYWRCbG9ja0NvbW1lbnQiLCJlYXRTcGFjZSIsIm0iLCJwaHJhc2UiLCJtYXlJbmRlbnQiLCJjaCIsIm5leHQiLCJyZWFkUXVvdGVkIiwic3RhcnQiLCJwb3MiLCJkZXB0aCIsImZvdW5kIiwiZXNjYXBlZCIsImluZGV4T2YiLCJiYWNrVXAiLCJyZWdleHBBaGVhZCIsInN0eWxlIiwiZW1iZWQiLCJlYXQiLCJkZWxpbSIsInByb3BlcnR5SXNFbnVtZXJhYmxlIiwic2tpcFRvRW5kIiwicG9wIiwiZWF0V2hpbGUiLCJ0ZXN0IiwidmFyTGlzdCIsImxhc3RUb2siLCJtb3JlIiwidG9rZW5CYXNlVW50aWxCcmFjZSIsInBlZWsiLCJ0b2tlbkJhc2VPbmNlIiwiYWxyZWFkeUNhbGxlZCIsInF1b3RlIiwidW5lc2NhcGVkIiwiY29udGV4dCIsInR5cGUiLCJwcmV2Iiwic3RhcnRTdGF0ZSIsImluZGVudGVkIiwiaW5kZW50VW5pdCIsImNvbnRpbnVlZExpbmUiLCJ0b2tlbiIsImluZGVudGF0aW9uIiwia3d0eXBlIiwidGhpc1RvayIsIndvcmQiLCJjdXJyZW50IiwiY29sdW1uIiwiaW5kZW50IiwidGV4dEFmdGVyIiwiUGFzcyIsImZpcnN0Q2hhciIsImNoYXJBdCIsImN0IiwiY2xvc2VkIiwiZWxlY3RyaWNJbnB1dCIsImxpbmVDb21t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QUFVekMsRUFBTXlDLFFBQVFFLE1BRTVCNUMsRUFBT08sUUFDVE4sRUFBTStDLGNBQTRCLE1BQVh4RCxHQUE0QixZQUFUZ0MsR0FDckNBLEdBR1RnQyxPQUFRLFNBQVN2RCxFQUFPd0QsR0FDdEIsR0FBSXhELEVBQU1DLFNBQVNELEVBQU1DLFNBQVNYLE9BQU8sSUFBTWEsRUFBVyxPQUFPckIsRUFBVzJFLEtBQzVFLElBQUlDLEVBQVlGLEdBQWFBLEVBQVVHLE9BQU8sR0FDMUNDLEVBQUs1RCxFQUFNeUMsUUFDWG9CLEVBQVNELEVBQUdsQixNQUFROUMsRUFBUThELElBQ25CLFdBQVhFLEVBQUdsQixNQUFxQiwwQ0FBMENYLEtBQUt5QixHQUN6RSxPQUFPSSxFQUFHZixVQUFZZ0IsRUFBUyxFQUFJN0UsRUFBTzhELGFBQ3ZDOUMsRUFBTStDLGNBQWdCL0QsRUFBTzhELFdBQWEsSUFHL0NnQixjQUFlLG9DQUNmQyxZQUFhLElBQ2JDLEtBQU0sYUFJVmxGLEVBQVdtRixXQUFXLGNBQWUsUUFsU2pDQyxDQUFJLEVBQVEiLCJmaWxlIjoiODUuYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29kZU1pcnJvciwgY29weXJpZ2h0IChjKSBieSBNYXJpam4gSGF2ZXJiZWtlIGFuZCBvdGhlcnNcbi8vIERpc3RyaWJ1dGVkIHVuZGVyIGFuIE1JVCBsaWNlbnNlOiBodHRwczovL2NvZGVtaXJyb3IubmV0L0xJQ0VOU0VcblxuKGZ1bmN0aW9uKG1vZCkge1xuICBpZiAodHlwZW9mIGV4cG9ydHMgPT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbW9kdWxlID09IFwib2JqZWN0XCIpIC8vIENvbW1vbkpTXG4gICAgbW9kKHJlcXVpcmUoXCIuLi8uLi9saWIvY29kZW1pcnJvclwiKSk7XG4gIGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIC8vIEFNRFxuICAgIGRlZmluZShbXCIuLi8uLi9saWIvY29kZW1pcnJvclwiXSwgbW9kKTtcbiAgZWxzZSAvLyBQbGFpbiBicm93c2VyIGVudlxuICAgIG1vZChDb2RlTWlycm9yKTtcbn0pKGZ1bmN0aW9uKENvZGVNaXJyb3IpIHtcblwidXNlIHN0cmljdFwiO1xuXG5Db2RlTWlycm9yLmRlZmluZU1vZGUoXCJydWJ5XCIsIGZ1bmN0aW9uKGNvbmZpZykge1xuICBmdW5jdGlvbiB3b3JkT2JqKHdvcmRzKSB7XG4gICAgdmFyIG8gPSB7fTtcbiAgICBmb3IgKHZhciBpID0gMCwgZSA9IHdvcmRzLmxlbmd0aDsgaSA8IGU7ICsraSkgb1t3b3Jkc1tpXV0gPSB0cnVlO1xuICAgIHJldHVybiBvO1xuICB9XG4gIHZhciBrZXl3b3JkcyA9IHdvcmRPYmooW1xuICAgIFwiYWxpYXNcIiwgXCJhbmRcIiwgXCJCRUdJTlwiLCBcImJlZ2luXCIsIFwiYnJlYWtcIiwgXCJjYXNlXCIsIFwiY2xhc3NcIiwgXCJkZWZcIiwgXCJkZWZpbmVkP1wiLCBcImRvXCIsIFwiZWxzZVwiLFxuICAgIFwiZWxzaWZcIiwgXCJFTkRcIiwgXCJlbmRcIiwgXCJlbnN1cmVcIiwgXCJmYWxzZVwiLCBcImZvclwiLCBcImlmXCIsIFwiaW5cIiwgXCJtb2R1bGVcIiwgXCJuZXh0XCIsIFwibm90XCIsIFwib3JcIixcbiAgICBcInJlZG9cIiwgXCJyZXNjdWVcIiwgXCJyZXRyeVwiLCBcInJldHVyblwiLCBcInNlbGZcIiwgXCJzdXBlclwiLCBcInRoZW5cIiwgXCJ0cnVlXCIsIFwidW5kZWZcIiwgXCJ1bmxlc3NcIixcbiAgICBcInVudGlsXCIsIFwid2hlblwiLCBcIndoaWxlXCIsIFwieWllbGRcIiwgXCJuaWxcIiwgXCJyYWlzZVwiLCBcInRocm93XCIsIFwiY2F0Y2hcIiwgXCJmYWlsXCIsIFwibG9vcFwiLCBcImNhbGxjY1wiLFxuICAgIFwiY2FsbGVyXCIsIFwibGFtYmRhXCIsIFwicHJvY1wiLCBcInB1YmxpY1wiLCBcInByb3RlY3RlZFwiLCBcInByaXZhdGVcIiwgXCJyZXF1aXJlXCIsIFwibG9hZFwiLFxuICAgIFwicmVxdWlyZV9yZWxhdGl2ZVwiLCBcImV4dGVuZFwiLCBcImF1dG9sb2FkXCIsIFwiX19FTkRfX1wiLCBcIl9fRklMRV9fXCIsIFwiX19MSU5FX19cIiwgXCJfX2Rpcl9fXCJcbiAgXSk7XG4gIHZhciBpbmRlbnRXb3JkcyA9IHdvcmRPYmooW1wiZGVmXCIsIFwiY2xhc3NcIiwgXCJjYXNlXCIsIFwiZm9yXCIsIFwid2hpbGVcIiwgXCJ1bnRpbFwiLCBcIm1vZHVsZVwiLCBcInRoZW5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjYXRjaFwiLCBcImxvb3BcIiwgXCJwcm9jXCIsIFwiYmVnaW5cIl0pO1xuICB2YXIgZGVkZW50V29yZHMgPSB3b3JkT2JqKFtcImVuZFwiLCBcInVudGlsXCJdKTtcbiAgdmFyIG9wZW5pbmcgPSB7XCJbXCI6IFwiXVwiLCBcIntcIjogXCJ9XCIsIFwiKFwiOiBcIilcIn07XG4gIHZhciBjbG9zaW5nID0ge1wiXVwiOiBcIltcIiwgXCJ9XCI6IFwie1wiLCBcIilcIjogXCIoXCJ9O1xuICB2YXIgY3VyUHVuYztcblxuICBmdW5jdGlvbiBjaGFpbihuZXd0b2ssIHN0cmVhbSwgc3RhdGUpIHtcbiAgICBzdGF0ZS50b2tlbml6ZS5wdXNoKG5ld3Rvayk7XG4gICAgcmV0dXJuIG5ld3RvayhzdHJlYW0sIHN0YXRlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRva2VuQmFzZShzdHJlYW0sIHN0YXRlKSB7XG4gICAgaWYgKHN0cmVhbS5zb2woKSAmJiBzdHJlYW0ubWF0Y2goXCI9YmVnaW5cIikgJiYgc3RyZWFtLmVvbCgpKSB7XG4gICAgICBzdGF0ZS50b2tlbml6ZS5wdXNoKHJlYWRCbG9ja0NvbW1lbnQpO1xuICAgICAgcmV0dXJuIFwiY29tbWVudFwiO1xuICAgIH1cbiAgICBpZiAoc3RyZWFtLmVhdFNwYWNlKCkpIHJldHVybiBudWxsO1xuICAgIHZhciBjaCA9IHN0cmVhbS5uZXh0KCksIG07XG4gICAgaWYgKGNoID09IFwiYFwiIHx8IGNoID09IFwiJ1wiIHx8IGNoID09ICdcIicpIHtcbiAgICAgIHJldHVybiBjaGFpbihyZWFkUXVvdGVkKGNoLCBcInN0cmluZ1wiLCBjaCA9PSAnXCInIHx8IGNoID09IFwiYFwiKSwgc3RyZWFtLCBzdGF0ZSk7XG4gICAgfSBlbHNlIGlmIChjaCA9PSBcIi9cIikge1xuICAgICAgaWYgKHJlZ2V4cEFoZWFkKHN0cmVhbSkpXG4gICAgICAgIHJldHVybiBjaGFpbihyZWFkUXVvdGVkKGNoLCBcInN0cmluZy0yXCIsIHRydWUpLCBzdHJlYW0sIHN0YXRlKTtcbiAgICAgIGVsc2VcbiAgICAgICAgcmV0dXJuIFwib3BlcmF0b3JcIjtcbiAgICB9IGVsc2UgaWYgKGNoID09IFwiJVwiKSB7XG4gICAgICB2YXIgc3R5bGUgPSBcInN0cmluZ1wiLCBlbWJlZCA9IHRydWU7XG4gICAgICBpZiAoc3RyZWFtLmVhdChcInNcIikpIHN0eWxlID0gXCJhdG9tXCI7XG4gICAgICBlbHNlIGlmIChzdHJlYW0uZWF0KC9bV1FdLykpIHN0eWxlID0gXCJzdHJpbmdcIjtcbiAgICAgIGVsc2UgaWYgKHN0cmVhbS5lYXQoL1tyXS8pKSBzdHlsZSA9IFwic3RyaW5nLTJcIjtcbiAgICAgIGVsc2UgaWYgKHN0cmVhbS5lYXQoL1t3eHFdLykpIHsgc3R5bGUgPSBcInN0cmluZ1wiOyBlbWJlZCA9IGZhbHNlOyB9XG4gICAgICB2YXIgZGVsaW0gPSBzdHJlYW0uZWF0KC9bXlxcd1xccz1dLyk7XG4gICAgICBpZiAoIWRlbGltKSByZXR1cm4gXCJvcGVyYXRvclwiO1xuICAgICAgaWYgKG9wZW5pbmcucHJvcGVydHlJc0VudW1lcmFibGUoZGVsaW0pKSBkZWxpbSA9IG9wZW5pbmdbZGVsaW1dO1xuICAgICAgcmV0dXJuIGNoYWluKHJlYWRRdW90ZWQoZGVsaW0sIHN0eWxlLCBlbWJlZCwgdHJ1ZSksIHN0cmVhbSwgc3RhdGUpO1xuICAgIH0gZWxzZSBpZiAoY2ggPT0gXCIjXCIpIHtcbiAgICAgIHN0cmVhbS5za2lwVG9FbmQoKTtcbiAgICAgIHJldHVybiBcImNvbW1lbnRcIjtcbiAgICB9IGVsc2UgaWYgKGNoID09IFwiPFwiICYmIChtID0gc3RyZWFtLm1hdGNoKC9ePChbLX5dKVtcXGBcXFwiXFwnXT8oW2EtekEtWl8/XVxcdyopW1xcYFxcXCJcXCddPyg/Ojt8JCkvKSkpIHtcbiAgICAgIHJldHVybiBjaGFpbihyZWFkSGVyZURvYyhtWzJdLCBtWzFdKSwgc3RyZWFtLCBzdGF0ZSk7XG4gICAgfSBlbHNlIGlmIChjaCA9PSBcIjBcIikge1xuICAgICAgaWYgKHN0cmVhbS5lYXQoXCJ4XCIpKSBzdHJlYW0uZWF0V2hpbGUoL1tcXGRhLWZBLUZdLyk7XG4gICAgICBlbHNlIGlmIChzdHJlYW0uZWF0KFwiYlwiKSkgc3RyZWFtLmVhdFdoaWxlKC9bMDFdLyk7XG4gICAgICBlbHNlIHN0cmVhbS5lYXRXaGlsZSgvWzAtN10vKTtcbiAgICAgIHJldHVybiBcIm51bWJlclwiO1xuICAgIH0gZWxzZSBpZiAoL1xcZC8udGVzdChjaCkpIHtcbiAgICAgIHN0cmVhbS5tYXRjaCgvXltcXGRfXSooPzpcXC5bXFxkX10rKT8oPzpbZUVdWytcXC1dP1tcXGRfXSspPy8pO1xuICAgICAgcmV0dXJuIFwibnVtYmVyXCI7XG4gICAgfSBlbHNlIGlmIChjaCA9PSBcIj9cIikge1xuICAgICAgd2hpbGUgKHN0cmVhbS5tYXRjaCgvXlxcXFxbQ01dLS8pKSB7fVxuICAgICAgaWYgKHN0cmVhbS5lYXQoXCJcXFxcXCIpKSBzdHJlYW0uZWF0V2hpbGUoL1xcdy8pO1xuICAgICAgZWxzZSBzdHJlYW0ubmV4dCgpO1xuICAgICAgcmV0dXJuIFwic3RyaW5nXCI7XG4gICAgfSBlbHNlIGlmIChjaCA9PSBcIjpcIikge1xuICAgICAgaWYgKHN0cmVhbS5lYXQoXCInXCIpKSByZXR1cm4gY2hhaW4ocmVhZFF1b3RlZChcIidcIiwgXCJhdG9tXCIsIGZhbHNlKSwgc3RyZWFtLCBzdGF0ZSk7XG4gICAgICBpZiAoc3RyZWFtLmVhdCgnXCInKSkgcmV0dXJuIGNoYWluKHJlYWRRdW90ZWQoJ1wiJywgXCJhdG9tXCIsIHRydWUpLCBzdHJlYW0sIHN0YXRlKTtcblxuICAgICAgLy8gOj4gOj4+IDo8IDo8PCBhcmUgdmFsaWQgc3ltYm9sc1xuICAgICAgaWYgKHN0cmVhbS5lYXQoL1tcXDxcXD5dLykpIHtcbiAgICAgICAgc3RyZWFtLmVhdCgvW1xcPFxcPl0vKTtcbiAgICAgICAgcmV0dXJuIFwiYXRvbVwiO1xuICAgICAgfVxuXG4gICAgICAvLyA6KyA6LSA6LyA6KiA6fCA6JiA6ISBhcmUgdmFsaWQgc3ltYm9sc1xuICAgICAgaWYgKHN0cmVhbS5lYXQoL1tcXCtcXC1cXCpcXC9cXCZcXHxcXDpcXCFdLykpIHtcbiAgICAgICAgcmV0dXJuIFwiYXRvbVwiO1xuICAgICAgfVxuXG4gICAgICAvLyBTeW1ib2xzIGNhbid0IHN0YXJ0IGJ5IGEgZGlnaXRcbiAgICAgIGlmIChzdHJlYW0uZWF0KC9bYS16QS1aJEBfXFx4YTEtXFx1ZmZmZl0vKSkge1xuICAgICAgICBzdHJlYW0uZWF0V2hpbGUoL1tcXHckXFx4YTEtXFx1ZmZmZl0vKTtcbiAgICAgICAgLy8gT25seSBvbmUgPyAhID0gaXMgYWxsb3dlZCBhbmQgb25seSBhcyB0aGUgbGFzdCBjaGFyYWN0ZXJcbiAgICAgICAgc3RyZWFtLmVhdCgvW1xcP1xcIVxcPV0vKTtcbiAgICAgICAgcmV0dXJuIFwiYXRvbVwiO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFwib3BlcmF0b3JcIjtcbiAgICB9IGVsc2UgaWYgKGNoID09IFwiQFwiICYmIHN0cmVhbS5tYXRjaCgvXkA/W2EtekEtWl9cXHhhMS1cXHVmZmZmXS8pKSB7XG4gICAgICBzdHJlYW0uZWF0KFwiQFwiKTtcbiAgICAgIHN0cmVhbS5lYXRXaGlsZSgvW1xcd1xceGExLVxcdWZmZmZdLyk7XG4gICAgICByZXR1cm4gXCJ2YXJpYWJsZS0yXCI7XG4gICAgfSBlbHNlIGlmIChjaCA9PSBcIiRcIikge1xuICAgICAgaWYgKHN0cmVhbS5lYXQoL1thLXpBLVpfXS8pKSB7XG4gICAgICAgIHN0cmVhbS5lYXRXaGlsZSgvW1xcd10vKTtcbiAgICAgIH0gZWxzZSBpZiAoc3RyZWFtLmVhdCgvXFxkLykpIHtcbiAgICAgICAgc3RyZWFtLmVhdCgvXFxkLyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdHJlYW0ubmV4dCgpOyAvLyBNdXN0IGJlIGEgc3BlY2lhbCBnbG9iYWwgbGlrZSAkOiBvciAkIVxuICAgICAgfVxuICAgICAgcmV0dXJuIFwidmFyaWFibGUtM1wiO1xuICAgIH0gZWxzZSBpZiAoL1thLXpBLVpfXFx4YTEtXFx1ZmZmZl0vLnRlc3QoY2gpKSB7XG4gICAgICBzdHJlYW0uZWF0V2hpbGUoL1tcXHdcXHhhMS1cXHVmZmZmXS8pO1xuICAgICAgc3RyZWFtLmVhdCgvW1xcP1xcIV0vKTtcbiAgICAgIGlmIChzdHJlYW0uZWF0KFwiOlwiKSkgcmV0dXJuIFwiYXRvbVwiO1xuICAgICAgcmV0dXJuIFwiaWRlbnRcIjtcbiAgICB9IGVsc2UgaWYgKGNoID09IFwifFwiICYmIChzdGF0ZS52YXJMaXN0IHx8IHN0YXRlLmxhc3RUb2sgPT0gXCJ7XCIgfHwgc3RhdGUubGFzdFRvayA9PSBcImRvXCIpKSB7XG4gICAgICBjdXJQdW5jID0gXCJ8XCI7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9IGVsc2UgaWYgKC9bXFwoXFwpXFxbXFxde31cXFxcO10vLnRlc3QoY2gpKSB7XG4gICAgICBjdXJQdW5jID0gY2g7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9IGVsc2UgaWYgKGNoID09IFwiLVwiICYmIHN0cmVhbS5lYXQoXCI+XCIpKSB7XG4gICAgICByZXR1cm4gXCJhcnJvd1wiO1xuICAgIH0gZWxzZSBpZiAoL1s9K1xcLVxcLyo6XFwuXiU8Pn58XS8udGVzdChjaCkpIHtcbiAgICAgIHZhciBtb3JlID0gc3RyZWFtLmVhdFdoaWxlKC9bPStcXC1cXC8qOlxcLl4lPD5+fF0vKTtcbiAgICAgIGlmIChjaCA9PSBcIi5cIiAmJiAhbW9yZSkgY3VyUHVuYyA9IFwiLlwiO1xuICAgICAgcmV0dXJuIFwib3BlcmF0b3JcIjtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmVnZXhwQWhlYWQoc3RyZWFtKSB7XG4gICAgdmFyIHN0YXJ0ID0gc3RyZWFtLnBvcywgZGVwdGggPSAwLCBuZXh0LCBmb3VuZCA9IGZhbHNlLCBlc2NhcGVkID0gZmFsc2VcbiAgICB3aGlsZSAoKG5leHQgPSBzdHJlYW0ubmV4dCgpKSAhPSBudWxsKSB7XG4gICAgICBpZiAoIWVzY2FwZWQpIHtcbiAgICAgICAgaWYgKFwiW3soXCIuaW5kZXhPZihuZXh0KSA+IC0xKSB7XG4gICAgICAgICAgZGVwdGgrK1xuICAgICAgICB9IGVsc2UgaWYgKFwiXX0pXCIuaW5kZXhPZihuZXh0KSA+IC0xKSB7XG4gICAgICAgICAgZGVwdGgtLVxuICAgICAgICAgIGlmIChkZXB0aCA8IDApIGJyZWFrXG4gICAgICAgIH0gZWxzZSBpZiAobmV4dCA9PSBcIi9cIiAmJiBkZXB0aCA9PSAwKSB7XG4gICAgICAgICAgZm91bmQgPSB0cnVlXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgICBlc2NhcGVkID0gbmV4dCA9PSBcIlxcXFxcIlxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZXNjYXBlZCA9IGZhbHNlXG4gICAgICB9XG4gICAgfVxuICAgIHN0cmVhbS5iYWNrVXAoc3RyZWFtLnBvcyAtIHN0YXJ0KVxuICAgIHJldHVybiBmb3VuZFxuICB9XG5cbiAgZnVuY3Rpb24gdG9rZW5CYXNlVW50aWxCcmFjZShkZXB0aCkge1xuICAgIGlmICghZGVwdGgpIGRlcHRoID0gMTtcbiAgICByZXR1cm4gZnVuY3Rpb24oc3RyZWFtLCBzdGF0ZSkge1xuICAgICAgaWYgKHN0cmVhbS5wZWVrKCkgPT0gXCJ9XCIpIHtcbiAgICAgICAgaWYgKGRlcHRoID09IDEpIHtcbiAgICAgICAgICBzdGF0ZS50b2tlbml6ZS5wb3AoKTtcbiAgICAgICAgICByZXR1cm4gc3RhdGUudG9rZW5pemVbc3RhdGUudG9rZW5pemUubGVuZ3RoLTFdKHN0cmVhbSwgc3RhdGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0YXRlLnRva2VuaXplW3N0YXRlLnRva2VuaXplLmxlbmd0aCAtIDFdID0gdG9rZW5CYXNlVW50aWxCcmFjZShkZXB0aCAtIDEpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHN0cmVhbS5wZWVrKCkgPT0gXCJ7XCIpIHtcbiAgICAgICAgc3RhdGUudG9rZW5pemVbc3RhdGUudG9rZW5pemUubGVuZ3RoIC0gMV0gPSB0b2tlbkJhc2VVbnRpbEJyYWNlKGRlcHRoICsgMSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdG9rZW5CYXNlKHN0cmVhbSwgc3RhdGUpO1xuICAgIH07XG4gIH1cbiAgZnVuY3Rpb24gdG9rZW5CYXNlT25jZSgpIHtcbiAgICB2YXIgYWxyZWFkeUNhbGxlZCA9IGZhbHNlO1xuICAgIHJldHVybiBmdW5jdGlvbihzdHJlYW0sIHN0YXRlKSB7XG4gICAgICBpZiAoYWxyZWFkeUNhbGxlZCkge1xuICAgICAgICBzdGF0ZS50b2tlbml6ZS5wb3AoKTtcbiAgICAgICAgcmV0dXJuIHN0YXRlLnRva2VuaXplW3N0YXRlLnRva2VuaXplLmxlbmd0aC0xXShzdHJlYW0sIHN0YXRlKTtcbiAgICAgIH1cbiAgICAgIGFscmVhZHlDYWxsZWQgPSB0cnVlO1xuICAgICAgcmV0dXJuIHRva2VuQmFzZShzdHJlYW0sIHN0YXRlKTtcbiAgICB9O1xuICB9XG4gIGZ1bmN0aW9uIHJlYWRRdW90ZWQocXVvdGUsIHN0eWxlLCBlbWJlZCwgdW5lc2NhcGVkKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHN0cmVhbSwgc3RhdGUpIHtcbiAgICAgIHZhciBlc2NhcGVkID0gZmFsc2UsIGNoO1xuXG4gICAgICBpZiAoc3RhdGUuY29udGV4dC50eXBlID09PSAncmVhZC1xdW90ZWQtcGF1c2VkJykge1xuICAgICAgICBzdGF0ZS5jb250ZXh0ID0gc3RhdGUuY29udGV4dC5wcmV2O1xuICAgICAgICBzdHJlYW0uZWF0KFwifVwiKTtcbiAgICAgIH1cblxuICAgICAgd2hpbGUgKChjaCA9IHN0cmVhbS5uZXh0KCkpICE9IG51bGwpIHtcbiAgICAgICAgaWYgKGNoID09IHF1b3RlICYmICh1bmVzY2FwZWQgfHwgIWVzY2FwZWQpKSB7XG4gICAgICAgICAgc3RhdGUudG9rZW5pemUucG9wKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVtYmVkICYmIGNoID09IFwiI1wiICYmICFlc2NhcGVkKSB7XG4gICAgICAgICAgaWYgKHN0cmVhbS5lYXQoXCJ7XCIpKSB7XG4gICAgICAgICAgICBpZiAocXVvdGUgPT0gXCJ9XCIpIHtcbiAgICAgICAgICAgICAgc3RhdGUuY29udGV4dCA9IHtwcmV2OiBzdGF0ZS5jb250ZXh0LCB0eXBlOiAncmVhZC1xdW90ZWQtcGF1c2VkJ307XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdGF0ZS50b2tlbml6ZS5wdXNoKHRva2VuQmFzZVVudGlsQnJhY2UoKSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9IGVsc2UgaWYgKC9bQFxcJF0vLnRlc3Qoc3RyZWFtLnBlZWsoKSkpIHtcbiAgICAgICAgICAgIHN0YXRlLnRva2VuaXplLnB1c2godG9rZW5CYXNlT25jZSgpKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlc2NhcGVkID0gIWVzY2FwZWQgJiYgY2ggPT0gXCJcXFxcXCI7XG4gICAgICB9XG4gICAgICByZXR1cm4gc3R5bGU7XG4gICAgfTtcbiAgfVxuICBmdW5jdGlvbiByZWFkSGVyZURvYyhwaHJhc2UsIG1heUluZGVudCkge1xuICAgIHJldHVybiBmdW5jdGlvbihzdHJlYW0sIHN0YXRlKSB7XG4gICAgICBpZiAobWF5SW5kZW50KSBzdHJlYW0uZWF0U3BhY2UoKVxuICAgICAgaWYgKHN0cmVhbS5tYXRjaChwaHJhc2UpKSBzdGF0ZS50b2tlbml6ZS5wb3AoKTtcbiAgICAgIGVsc2Ugc3RyZWFtLnNraXBUb0VuZCgpO1xuICAgICAgcmV0dXJuIFwic3RyaW5nXCI7XG4gICAgfTtcbiAgfVxuICBmdW5jdGlvbiByZWFkQmxvY2tDb21tZW50KHN0cmVhbSwgc3RhdGUpIHtcbiAgICBpZiAoc3RyZWFtLnNvbCgpICYmIHN0cmVhbS5tYXRjaChcIj1lbmRcIikgJiYgc3RyZWFtLmVvbCgpKVxuICAgICAgc3RhdGUudG9rZW5pemUucG9wKCk7XG4gICAgc3RyZWFtLnNraXBUb0VuZCgpO1xuICAgIHJldHVybiBcImNvbW1lbnRcIjtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgc3RhcnRTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4ge3Rva2VuaXplOiBbdG9rZW5CYXNlXSxcbiAgICAgICAgICAgICAgaW5kZW50ZWQ6IDAsXG4gICAgICAgICAgICAgIGNvbnRleHQ6IHt0eXBlOiBcInRvcFwiLCBpbmRlbnRlZDogLWNvbmZpZy5pbmRlbnRVbml0fSxcbiAgICAgICAgICAgICAgY29udGludWVkTGluZTogZmFsc2UsXG4gICAgICAgICAgICAgIGxhc3RUb2s6IG51bGwsXG4gICAgICAgICAgICAgIHZhckxpc3Q6IGZhbHNlfTtcbiAgICB9LFxuXG4gICAgdG9rZW46IGZ1bmN0aW9uKHN0cmVhbSwgc3RhdGUpIHtcbiAgICAgIGN1clB1bmMgPSBudWxsO1xuICAgICAgaWYgKHN0cmVhbS5zb2woKSkgc3RhdGUuaW5kZW50ZWQgPSBzdHJlYW0uaW5kZW50YXRpb24oKTtcbiAgICAgIHZhciBzdHlsZSA9IHN0YXRlLnRva2VuaXplW3N0YXRlLnRva2VuaXplLmxlbmd0aC0xXShzdHJlYW0sIHN0YXRlKSwga3d0eXBlO1xuICAgICAgdmFyIHRoaXNUb2sgPSBjdXJQdW5jO1xuICAgICAgaWYgKHN0eWxlID09IFwiaWRlbnRcIikge1xuICAgICAgICB2YXIgd29yZCA9IHN0cmVhbS5jdXJyZW50KCk7XG4gICAgICAgIHN0eWxlID0gc3RhdGUubGFzdFRvayA9PSBcIi5cIiA/IFwicHJvcGVydHlcIlxuICAgICAgICAgIDoga2V5d29yZHMucHJvcGVydHlJc0VudW1lcmFibGUoc3RyZWFtLmN1cnJlbnQoKSkgPyBcImtleXdvcmRcIlxuICAgICAgICAgIDogL15bQS1aXS8udGVzdCh3b3JkKSA/IFwidGFnXCJcbiAgICAgICAgICA6IChzdGF0ZS5sYXN0VG9rID09IFwiZGVmXCIgfHwgc3RhdGUubGFzdFRvayA9PSBcImNsYXNzXCIgfHwgc3RhdGUudmFyTGlzdCkgPyBcImRlZlwiXG4gICAgICAgICAgOiBcInZhcmlhYmxlXCI7XG4gICAgICAgIGlmIChzdHlsZSA9PSBcImtleXdvcmRcIikge1xuICAgICAgICAgIHRoaXNUb2sgPSB3b3JkO1xuICAgICAgICAgIGlmIChpbmRlbnRXb3Jkcy5wcm9wZXJ0eUlzRW51bWVyYWJsZSh3b3JkKSkga3d0eXBlID0gXCJpbmRlbnRcIjtcbiAgICAgICAgICBlbHNlIGlmIChkZWRlbnRXb3Jkcy5wcm9wZXJ0eUlzRW51bWVyYWJsZSh3b3JkKSkga3d0eXBlID0gXCJkZWRlbnRcIjtcbiAgICAgICAgICBlbHNlIGlmICgod29yZCA9PSBcImlmXCIgfHwgd29yZCA9PSBcInVubGVzc1wiKSAmJiBzdHJlYW0uY29sdW1uKCkgPT0gc3RyZWFtLmluZGVudGF0aW9uKCkpXG4gICAgICAgICAgICBrd3R5cGUgPSBcImluZGVudFwiO1xuICAgICAgICAgIGVsc2UgaWYgKHdvcmQgPT0gXCJkb1wiICYmIHN0YXRlLmNvbnRleHQuaW5kZW50ZWQgPCBzdGF0ZS5pbmRlbnRlZClcbiAgICAgICAgICAgIGt3dHlwZSA9IFwiaW5kZW50XCI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChjdXJQdW5jIHx8IChzdHlsZSAmJiBzdHlsZSAhPSBcImNvbW1lbnRcIikpIHN0YXRlLmxhc3RUb2sgPSB0aGlzVG9rO1xuICAgICAgaWYgKGN1clB1bmMgPT0gXCJ8XCIpIHN0YXRlLnZhckxpc3QgPSAhc3RhdGUudmFyTGlzdDtcblxuICAgICAgaWYgKGt3dHlwZSA9PSBcImluZGVudFwiIHx8IC9bXFwoXFxbXFx7XS8udGVzdChjdXJQdW5jKSlcbiAgICAgICAgc3RhdGUuY29udGV4dCA9IHtwcmV2OiBzdGF0ZS5jb250ZXh0LCB0eXBlOiBjdXJQdW5jIHx8IHN0eWxlLCBpbmRlbnRlZDogc3RhdGUuaW5kZW50ZWR9O1xuICAgICAgZWxzZSBpZiAoKGt3dHlwZSA9PSBcImRlZGVudFwiIHx8IC9bXFwpXFxdXFx9XS8udGVzdChjdXJQdW5jKSkgJiYgc3RhdGUuY29udGV4dC5wcmV2KVxuICAgICAgICBzdGF0ZS5jb250ZXh0ID0gc3RhdGUuY29udGV4dC5wcmV2O1xuXG4gICAgICBpZiAoc3RyZWFtLmVvbCgpKVxuICAgICAgICBzdGF0ZS5jb250aW51ZWRMaW5lID0gKGN1clB1bmMgPT0gXCJcXFxcXCIgfHwgc3R5bGUgPT0gXCJvcGVyYXRvclwiKTtcbiAgICAgIHJldHVybiBzdHlsZTtcbiAgICB9LFxuXG4gICAgaW5kZW50OiBmdW5jdGlvbihzdGF0ZSwgdGV4dEFmdGVyKSB7XG4gICAgICBpZiAoc3RhdGUudG9rZW5pemVbc3RhdGUudG9rZW5pemUubGVuZ3RoLTFdICE9IHRva2VuQmFzZSkgcmV0dXJuIENvZGVNaXJyb3IuUGFzcztcbiAgICAgIHZhciBmaXJzdENoYXIgPSB0ZXh0QWZ0ZXIgJiYgdGV4dEFmdGVyLmNoYXJBdCgwKTtcbiAgICAgIHZhciBjdCA9IHN0YXRlLmNvbnRleHQ7XG4gICAgICB2YXIgY2xvc2VkID0gY3QudHlwZSA9PSBjbG9zaW5nW2ZpcnN0Q2hhcl0gfHxcbiAgICAgICAgY3QudHlwZSA9PSBcImtleXdvcmRcIiAmJiAvXig/OmVuZHx1bnRpbHxlbHNlfGVsc2lmfHdoZW58cmVzY3VlKVxcYi8udGVzdCh0ZXh0QWZ0ZXIpO1xuICAgICAgcmV0dXJuIGN0LmluZGVudGVkICsgKGNsb3NlZCA/IDAgOiBjb25maWcuaW5kZW50VW5pdCkgK1xuICAgICAgICAoc3RhdGUuY29udGludWVkTGluZSA/IGNvbmZpZy5pbmRlbnRVbml0IDogMCk7XG4gICAgfSxcblxuICAgIGVsZWN0cmljSW5wdXQ6IC9eXFxzKig/OmVuZHxyZXNjdWV8ZWxzaWZ8ZWxzZXxcXH0pJC8sXG4gICAgbGluZUNvbW1lbnQ6IFwiI1wiLFxuICAgIGZvbGQ6IFwiaW5kZW50XCJcbiAgfTtcbn0pO1xuXG5Db2RlTWlycm9yLmRlZmluZU1JTUUoXCJ0ZXh0L3gtcnVieVwiLCBcInJ1YnlcIik7XG5cbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==