(window.webpackJsonp=window.webpackJsonp||[]).push([[114],{"./node_modules/codemirror/mode/xquery/xquery.js":function(e,t,n){!function(e){"use strict";e.defineMode("xquery",(function(){var e=function(){function e(e){return{type:e,style:"keyword"}}for(var t=e("operator"),n={type:"atom",style:"atom"},r={type:"axis_specifier",style:"qualifier"},i={",":{type:"punctuation",style:null}},a=["after","all","allowing","ancestor","ancestor-or-self","any","array","as","ascending","at","attribute","base-uri","before","boundary-space","by","case","cast","castable","catch","child","collation","comment","construction","contains","content","context","copy","copy-namespaces","count","decimal-format","declare","default","delete","descendant","descendant-or-self","descending","diacritics","different","distance","document","document-node","element","else","empty","empty-sequence","encoding","end","entire","every","exactly","except","external","first","following","following-sibling","for","from","ftand","ftnot","ft-option","ftor","function","fuzzy","greatest","group","if","import","in","inherit","insensitive","insert","instance","intersect","into","invoke","is","item","language","last","lax","least","let","levels","lowercase","map","modify","module","most","namespace","next","no","node","nodes","no-inherit","no-preserve","not","occurs","of","only","option","order","ordered","ordering","paragraph","paragraphs","parent","phrase","preceding","preceding-sibling","preserve","previous","processing-instruction","relationship","rename","replace","return","revalidation","same","satisfies","schema","schema-attribute","schema-element","score","self","sensitive","sentence","sentences","sequence","skip","sliding","some","stable","start","stemming","stop","strict","strip","switch","text","then","thesaurus","times","to","transform","treat","try","tumbling","type","typeswitch","union","unordered","update","updating","uppercase","using","validate","value","variable","version","weight","when","where","wildcards","window","with","without","word","words","xquery"],o=0,s=a.length;o<s;o++)i[a[o]]=e(a[o]);var c=["xs:anyAtomicType","xs:anySimpleType","xs:anyType","xs:anyURI","xs:base64Binary","xs:boolean","xs:byte","xs:date","xs:dateTime","xs:dateTimeStamp","xs:dayTimeDuration","xs:decimal","xs:double","xs:duration","xs:ENTITIES","xs:ENTITY","xs:float","xs:gDay","xs:gMonth","xs:gMonthDay","xs:gYear","xs:gYearMonth","xs:hexBinary","xs:ID","xs:IDREF","xs:IDREFS","xs:int","xs:integer","xs:item","xs:java","xs:language","xs:long","xs:Name","xs:NCName","xs:negativeInteger","xs:NMTOKEN","xs:NMTOKENS","xs:nonNegativeInteger","xs:nonPositiveInteger","xs:normalizedString","xs:NOTATION","xs:numeric","xs:positiveInteger","xs:precisionDecimal","xs:QName","xs:short","xs:string","xs:time","xs:token","xs:unsignedByte","xs:unsignedInt","xs:unsignedLong","xs:unsignedShort","xs:untyped","xs:untypedAtomic","xs:yearMonthDuration"];for(o=0,s=c.length;o<s;o++)i[c[o]]=n;var u=["eq","ne","lt","le","gt","ge",":=","=",">",">=","<","<=",".","|","?","and","or","div","idiv","mod","*","/","+","-"];for(o=0,s=u.length;o<s;o++)i[u[o]]=t;var l=["self::","attribute::","child::","descendant::","descendant-or-self::","parent::","ancestor::","ancestor-or-self::","following::","preceding::","following-sibling::","preceding-sibling::"];for(o=0,s=l.length;o<s;o++)i[l[o]]=r;return i}();function t(e,t,n){return t.tokenize=n,n(e,t)}function n(d,p){var x=d.next(),g=!1,y=function(e){return'"'===e.current()?e.match(/^[^\"]+\"\:/,!1):"'"===e.current()&&e.match(/^[^\"]+\'\:/,!1)}(d);if("<"==x){if(d.match("!--",!0))return t(d,p,s);if(d.match("![CDATA",!1))return p.tokenize=c,"tag";if(d.match("?",!1))return t(d,p,u);var h=d.eat("/");d.eatSpace();for(var k,b="";k=d.eat(/[^\s\u00a0=<>\"\'\/?]/);)b+=k;return t(d,p,function(e,t){return function(r,i){return r.eatSpace(),t&&r.eat(">")?(m(i),i.tokenize=n,"tag"):(r.eat("/")||f(i,{type:"tag",name:e,tokenize:n}),r.eat(">")?(i.tokenize=n,"tag"):(i.tokenize=o,"tag"))}}(b,h))}if("{"==x)return f(p,{type:"codeblock"}),null;if("}"==x)return m(p),null;if(isInXmlBlock(p))return">"==x?"tag":"/"==x&&d.eat(">")?(m(p),"tag"):"variable";if(/\d/.test(x))return d.match(/^\d*(?:\.\d*)?(?:E[+\-]?\d+)?/),"atom";if("("===x&&d.eat(":"))return f(p,{type:"comment"}),t(d,p,r);if(y||'"'!==x&&"'"!==x){if("$"===x)return t(d,p,a);if(":"===x&&d.eat("="))return"keyword";if("("===x)return f(p,{type:"paren"}),null;if(")"===x)return m(p),null;if("["===x)return f(p,{type:"bracket"}),null;if("]"===x)return m(p),null;var v=e.propertyIsEnumerable(x)&&e[x];if(y&&'"'===x)for(;'"'!==d.next(););if(y&&"'"===x)for(;"'"!==d.next(););v||d.eatWhile(/[\w\$_-]/);var w=d.eat(":");!d.eat(":")&&w&&d.eatWhile(/[\w\$_-]/),d.match(/^[ \t]*\(/,!1)&&(g=!0);var z=d.current();return v=e.propertyIsEnumerable(z)&&e[z],g&&!v&&(v={type:"function_call",style:"variable def"}),function(e){return l(e,"xmlconstructor")}(p)?(m(p),"variable"):("element"!=z&&"attribute"!=z&&"axis_specifier"!=v.type||f(p,{type:"xmlconstructor"}),v?v.style:"variable")}return t(d,p,i(x))}function r(e,t){for(var n,r=!1,i=!1,a=0;n=e.next();){if(")"==n&&r){if(!(a>0)){m(t);break}a--}else":"==n&&i&&a++;r=":"==n,i="("==n}return"comment"}function i(e,t){return function(r,a){var o;if(function(e){return l(e,"string")}(a)&&r.current()==e)return m(a),t&&(a.tokenize=t),"string";if(f(a,{type:"string",name:e,tokenize:i(e,t)}),r.match("{",!1)&&isInXmlAttributeBlock(a))return a.tokenize=n,"string";for(;o=r.next();){if(o==e){m(a),t&&(a.tokenize=t);break}if(r.match("{",!1)&&isInXmlAttributeBlock(a))return a.tokenize=n,"string"}return"string"}}function a(e,t){var r=/[\w\$_-]/;if(e.eat('"')){for(;'"'!==e.next(););e.eat(":")}else e.eatWhile(r),e.match(":=",!1)||e.eat(":");return e.eatWhile(r),t.tokenize=n,"variable"}function o(e,r){var a=e.next();return"/"==a&&e.eat(">")?(isInXmlAttributeBlock(r)&&m(r),isInXmlBlock(r)&&m(r),"tag"):">"==a?(isInXmlAttributeBlock(r)&&m(r),"tag"):"="==a?null:'"'==a||"'"==a?t(e,r,i(a,o)):(isInXmlAttributeBlock(r)||f(r,{type:"attribute",tokenize:o}),e.eat(/[a-zA-Z_:]/),e.eatWhile(/[-a-zA-Z0-9_:.]/),e.eatSpace(),(e.match(">",!1)||e.match("/",!1))&&(m(r),r.tokenize=n),"attribute")}function s(e,t){for(var r;r=e.next();)if("-"==r&&e.match("->",!0))return t.tokenize=n,"comment"}function c(e,t){for(var r;r=e.next();)if("]"==r&&e.match("]",!0))return t.tokenize=n,"comment"}function u(e,t){for(var r;r=e.next();)if("?"==r&&e.match(">",!0))return t.tokenize=n,"comment meta"}function isInXmlBlock(e){return l(e,"tag")}function isInXmlAttributeBlock(e){return l(e,"attribute")}function l(e,t){return e.stack.length&&e.stack[e.stack.length-1].type==t}function f(e,t){e.stack.push(t)}function m(e){e.stack.pop();var t=e.stack.length&&e.stack[e.stack.length-1].tokenize;e.tokenize=t||n}return{startState:function(){return{tokenize:n,cc:[],stack:[]}},token:function(e,t){return e.eatSpace()?null:t.tokenize(e,t)},blockCommentStart:"(:",blockCommentEnd:":)"}})),e.defineMIME("application/xquery","xquery")}(n("./node_modules/codemirror/lib/codemirror.js"))}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29kZW1pcnJvci9tb2RlL3hxdWVyeS94cXVlcnkuanMiXSwibmFtZXMiOlsiQ29kZU1pcnJvciIsImRlZmluZU1vZGUiLCJrZXl3b3JkcyIsImt3IiwidHlwZSIsInN0eWxlIiwib3BlcmF0b3IiLCJhdG9tIiwicXVhbGlmaWVyIiwia3dPYmoiLCJiYXNpYyIsImkiLCJsIiwibGVuZ3RoIiwidHlwZXMiLCJvcGVyYXRvcnMiLCJheGlzX3NwZWNpZmllcnMiLCJjaGFpbiIsInN0cmVhbSIsInN0YXRlIiwiZiIsInRva2VuaXplIiwidG9rZW5CYXNlIiwiY2giLCJuZXh0IiwibWlnaHRCZUZ1bmN0aW9uIiwiaXNFUU5hbWUiLCJjdXJyZW50IiwibWF0Y2giLCJpc0VRTmFtZUFoZWFkIiwidG9rZW5YTUxDb21tZW50IiwidG9rZW5DREFUQSIsInRva2VuUHJlUHJvY2Vzc2luZyIsImlzY2xvc2UiLCJlYXQiLCJlYXRTcGFjZSIsImMiLCJ0YWdOYW1lIiwibmFtZSIsInBvcFN0YXRlU3RhY2siLCJwdXNoU3RhdGVTdGFjayIsInRva2VuQXR0cmlidXRlIiwidG9rZW5UYWciLCJpc0luWG1sQmxvY2siLCJ0ZXN0IiwidG9rZW5Db21tZW50IiwidG9rZW5WYXJpYWJsZSIsImtub3duIiwicHJvcGVydHlJc0VudW1lcmFibGUiLCJlYXRXaGlsZSIsImZvdW5kQ29sb24iLCJ3b3JkIiwiaXNJbiIsImlzSW5YbWxDb25zdHJ1Y3RvciIsInRva2VuU3RyaW5nIiwibWF5YmVFbmQiLCJtYXliZU5lc3RlZCIsIm5lc3RlZENvdW50IiwicXVvdGUiLCJpc0luU3RyaW5nIiwiaXNJblhtbEF0dHJpYnV0ZUJsb2NrIiwiaXNWYXJpYWJsZUNoYXIiLCJzdGFjayIsIm5ld1N0YXRlIiwicHVzaCIsInBvcCIsInJlaW5zdGF0ZVRva2VuaXplIiwic3RhcnRTdGF0ZSIsImNjIiwidG9rZW4iLCJibG9ja0NvbW1lbnRTdGFydCIsImJs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VCxNQUFRQSxFQUc1RSxTQUFTb0MsRUFBZXJCLEVBQU80QyxHQUM3QjVDLEVBQU0yQyxNQUFNRSxLQUFLRCxHQUduQixTQUFTeEIsRUFBY3BCLEdBQ3JCQSxFQUFNMkMsTUFBTUcsTUFDWixJQUFJQyxFQUFvQi9DLEVBQU0yQyxNQUFNakQsUUFBVU0sRUFBTTJDLE1BQU0zQyxFQUFNMkMsTUFBTWpELE9BQU8sR0FBR1EsU0FDaEZGLEVBQU1FLFNBQVc2QyxHQUFxQjVDLEVBSXhDLE1BQU8sQ0FDTDZDLFdBQVksV0FDVixNQUFPLENBQ0w5QyxTQUFVQyxFQUNWOEMsR0FBSSxHQUNKTixNQUFPLEtBSVhPLE1BQU8sU0FBU25ELEVBQVFDLEdBQ3RCLE9BQUlELEVBQU9pQixXQUFtQixLQUNsQmhCLEVBQU1FLFNBQVNILEVBQVFDLElBSXJDbUQsa0JBQW1CLEtBQ25CQyxnQkFBaUIsU0FNckJ2RSxFQUFXd0UsV0FBVyxxQkFBc0IsVUF4YnhDQyxDQUFJLEVBQVEiLCJmaWxlIjoiMTE0LmJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIENvZGVNaXJyb3IsIGNvcHlyaWdodCAoYykgYnkgTWFyaWpuIEhhdmVyYmVrZSBhbmQgb3RoZXJzXG4vLyBEaXN0cmlidXRlZCB1bmRlciBhbiBNSVQgbGljZW5zZTogaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC9MSUNFTlNFXG5cbihmdW5jdGlvbihtb2QpIHtcbiAgaWYgKHR5cGVvZiBleHBvcnRzID09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZSA9PSBcIm9iamVjdFwiKSAvLyBDb21tb25KU1xuICAgIG1vZChyZXF1aXJlKFwiLi4vLi4vbGliL2NvZGVtaXJyb3JcIikpO1xuICBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSAvLyBBTURcbiAgICBkZWZpbmUoW1wiLi4vLi4vbGliL2NvZGVtaXJyb3JcIl0sIG1vZCk7XG4gIGVsc2UgLy8gUGxhaW4gYnJvd3NlciBlbnZcbiAgICBtb2QoQ29kZU1pcnJvcik7XG59KShmdW5jdGlvbihDb2RlTWlycm9yKSB7XG5cInVzZSBzdHJpY3RcIjtcblxuQ29kZU1pcnJvci5kZWZpbmVNb2RlKFwieHF1ZXJ5XCIsIGZ1bmN0aW9uKCkge1xuXG4gIC8vIFRoZSBrZXl3b3JkcyBvYmplY3QgaXMgc2V0IHRvIHRoZSByZXN1bHQgb2YgdGhpcyBzZWxmIGV4ZWN1dGluZ1xuICAvLyBmdW5jdGlvbi4gRWFjaCBrZXl3b3JkIGlzIGEgcHJvcGVydHkgb2YgdGhlIGtleXdvcmRzIG9iamVjdCB3aG9zZVxuICAvLyB2YWx1ZSBpcyB7dHlwZTogYXR5cGUsIHN0eWxlOiBhc3R5bGV9XG4gIHZhciBrZXl3b3JkcyA9IGZ1bmN0aW9uKCl7XG4gICAgLy8gY29udmVuaWVuY2UgZnVuY3Rpb25zIHVzZWQgdG8gYnVpbGQga2V5d29yZHMgb2JqZWN0XG4gICAgZnVuY3Rpb24ga3codHlwZSkge3JldHVybiB7dHlwZTogdHlwZSwgc3R5bGU6IFwia2V5d29yZFwifTt9XG4gICAgdmFyIG9wZXJhdG9yID0ga3coXCJvcGVyYXRvclwiKVxuICAgICAgLCBhdG9tID0ge3R5cGU6IFwiYXRvbVwiLCBzdHlsZTogXCJhdG9tXCJ9XG4gICAgICAsIHB1bmN0dWF0aW9uID0ge3R5cGU6IFwicHVuY3R1YXRpb25cIiwgc3R5bGU6IG51bGx9XG4gICAgICAsIHF1YWxpZmllciA9IHt0eXBlOiBcImF4aXNfc3BlY2lmaWVyXCIsIHN0eWxlOiBcInF1YWxpZmllclwifTtcblxuICAgIC8vIGt3T2JqIGlzIHdoYXQgaXMgcmV0dXJuIGZyb20gdGhpcyBmdW5jdGlvbiBhdCB0aGUgZW5kXG4gICAgdmFyIGt3T2JqID0ge1xuICAgICAgJywnOiBwdW5jdHVhdGlvblxuICAgIH07XG5cbiAgICAvLyBhIGxpc3Qgb2YgJ2Jhc2ljJyBrZXl3b3Jkcy4gRm9yIGVhY2ggYWRkIGEgcHJvcGVydHkgdG8ga3dPYmogd2l0aCB0aGUgdmFsdWUgb2ZcbiAgICAvLyB7dHlwZTogYmFzaWNbaV0sIHN0eWxlOiBcImtleXdvcmRcIn0gZS5nLiAnYWZ0ZXInIC0tPiB7dHlwZTogXCJhZnRlclwiLCBzdHlsZTogXCJrZXl3b3JkXCJ9XG4gICAgdmFyIGJhc2ljID0gWydhZnRlcicsICdhbGwnLCAnYWxsb3dpbmcnLCAnYW5jZXN0b3InLCAnYW5jZXN0b3Itb3Itc2VsZicsICdhbnknLCAnYXJyYXknLCAnYXMnLFxuICAgICdhc2NlbmRpbmcnLCAnYXQnLCAnYXR0cmlidXRlJywgJ2Jhc2UtdXJpJywgJ2JlZm9yZScsICdib3VuZGFyeS1zcGFjZScsICdieScsICdjYXNlJywgJ2Nhc3QnLFxuICAgICdjYXN0YWJsZScsICdjYXRjaCcsICdjaGlsZCcsICdjb2xsYXRpb24nLCAnY29tbWVudCcsICdjb25zdHJ1Y3Rpb24nLCAnY29udGFpbnMnLCAnY29udGVudCcsXG4gICAgJ2NvbnRleHQnLCAnY29weScsICdjb3B5LW5hbWVzcGFjZXMnLCAnY291bnQnLCAnZGVjaW1hbC1mb3JtYXQnLCAnZGVjbGFyZScsICdkZWZhdWx0JywgJ2RlbGV0ZScsXG4gICAgJ2Rlc2NlbmRhbnQnLCAnZGVzY2VuZGFudC1vci1zZWxmJywgJ2Rlc2NlbmRpbmcnLCAnZGlhY3JpdGljcycsICdkaWZmZXJlbnQnLCAnZGlzdGFuY2UnLFxuICAgICdkb2N1bWVudCcsICdkb2N1bWVudC1ub2RlJywgJ2VsZW1lbnQnLCAnZWxzZScsICdlbXB0eScsICdlbXB0eS1zZXF1ZW5jZScsICdlbmNvZGluZycsICdlbmQnLFxuICAgICdlbnRpcmUnLCAnZXZlcnknLCAnZXhhY3RseScsICdleGNlcHQnLCAnZXh0ZXJuYWwnLCAnZmlyc3QnLCAnZm9sbG93aW5nJywgJ2ZvbGxvd2luZy1zaWJsaW5nJyxcbiAgICAnZm9yJywgJ2Zyb20nLCAnZnRhbmQnLCAnZnRub3QnLCAnZnQtb3B0aW9uJywgJ2Z0b3InLCAnZnVuY3Rpb24nLCAnZnV6enknLCAnZ3JlYXRlc3QnLCAnZ3JvdXAnLFxuICAgICdpZicsICdpbXBvcnQnLCAnaW4nLCAnaW5oZXJpdCcsICdpbnNlbnNpdGl2ZScsICdpbnNlcnQnLCAnaW5zdGFuY2UnLCAnaW50ZXJzZWN0JywgJ2ludG8nLFxuICAgICdpbnZva2UnLCAnaXMnLCAnaXRlbScsICdsYW5ndWFnZScsICdsYXN0JywgJ2xheCcsICdsZWFzdCcsICdsZXQnLCAnbGV2ZWxzJywgJ2xvd2VyY2FzZScsICdtYXAnLFxuICAgICdtb2RpZnknLCAnbW9kdWxlJywgJ21vc3QnLCAnbmFtZXNwYWNlJywgJ25leHQnLCAnbm8nLCAnbm9kZScsICdub2RlcycsICduby1pbmhlcml0JyxcbiAgICAnbm8tcHJlc2VydmUnLCAnbm90JywgJ29jY3VycycsICdvZicsICdvbmx5JywgJ29wdGlvbicsICdvcmRlcicsICdvcmRlcmVkJywgJ29yZGVyaW5nJyxcbiAgICAncGFyYWdyYXBoJywgJ3BhcmFncmFwaHMnLCAncGFyZW50JywgJ3BocmFzZScsICdwcmVjZWRpbmcnLCAncHJlY2VkaW5nLXNpYmxpbmcnLCAncHJlc2VydmUnLFxuICAgICdwcmV2aW91cycsICdwcm9jZXNzaW5nLWluc3RydWN0aW9uJywgJ3JlbGF0aW9uc2hpcCcsICdyZW5hbWUnLCAncmVwbGFjZScsICdyZXR1cm4nLFxuICAgICdyZXZhbGlkYXRpb24nLCAnc2FtZScsICdzYXRpc2ZpZXMnLCAnc2NoZW1hJywgJ3NjaGVtYS1hdHRyaWJ1dGUnLCAnc2NoZW1hLWVsZW1lbnQnLCAnc2NvcmUnLFxuICAgICdzZWxmJywgJ3NlbnNpdGl2ZScsICdzZW50ZW5jZScsICdzZW50ZW5jZXMnLCAnc2VxdWVuY2UnLCAnc2tpcCcsICdzbGlkaW5nJywgJ3NvbWUnLCAnc3RhYmxlJyxcbiAgICAnc3RhcnQnLCAnc3RlbW1pbmcnLCAnc3RvcCcsICdzdHJpY3QnLCAnc3RyaXAnLCAnc3dpdGNoJywgJ3RleHQnLCAndGhlbicsICd0aGVzYXVydXMnLCAndGltZXMnLFxuICAgICd0bycsICd0cmFuc2Zvcm0nLCAndHJlYXQnLCAndHJ5JywgJ3R1bWJsaW5nJywgJ3R5cGUnLCAndHlwZXN3aXRjaCcsICd1bmlvbicsICd1bm9yZGVyZWQnLFxuICAgICd1cGRhdGUnLCAndXBkYXRpbmcnLCAndXBwZXJjYXNlJywgJ3VzaW5nJywgJ3ZhbGlkYXRlJywgJ3ZhbHVlJywgJ3ZhcmlhYmxlJywgJ3ZlcnNpb24nLFxuICAgICd3ZWlnaHQnLCAnd2hlbicsICd3aGVyZScsICd3aWxkY2FyZHMnLCAnd2luZG93JywgJ3dpdGgnLCAnd2l0aG91dCcsICd3b3JkJywgJ3dvcmRzJywgJ3hxdWVyeSddO1xuICAgIGZvcih2YXIgaT0wLCBsPWJhc2ljLmxlbmd0aDsgaSA8IGw7IGkrKykgeyBrd09ialtiYXNpY1tpXV0gPSBrdyhiYXNpY1tpXSk7fTtcblxuICAgIC8vIGEgbGlzdCBvZiB0eXBlcy4gRm9yIGVhY2ggYWRkIGEgcHJvcGVydHkgdG8ga3dPYmogd2l0aCB0aGUgdmFsdWUgb2ZcbiAgICAvLyB7dHlwZTogXCJhdG9tXCIsIHN0eWxlOiBcImF0b21cIn1cbiAgICB2YXIgdHlwZXMgPSBbJ3hzOmFueUF0b21pY1R5cGUnLCAneHM6YW55U2ltcGxlVHlwZScsICd4czphbnlUeXBlJywgJ3hzOmFueVVSSScsXG4gICAgJ3hzOmJhc2U2NEJpbmFyeScsICd4czpib29sZWFuJywgJ3hzOmJ5dGUnLCAneHM6ZGF0ZScsICd4czpkYXRlVGltZScsICd4czpkYXRlVGltZVN0YW1wJyxcbiAgICAneHM6ZGF5VGltZUR1cmF0aW9uJywgJ3hzOmRlY2ltYWwnLCAneHM6ZG91YmxlJywgJ3hzOmR1cmF0aW9uJywgJ3hzOkVOVElUSUVTJywgJ3hzOkVOVElUWScsXG4gICAgJ3hzOmZsb2F0JywgJ3hzOmdEYXknLCAneHM6Z01vbnRoJywgJ3hzOmdNb250aERheScsICd4czpnWWVhcicsICd4czpnWWVhck1vbnRoJywgJ3hzOmhleEJpbmFyeScsXG4gICAgJ3hzOklEJywgJ3hzOklEUkVGJywgJ3hzOklEUkVGUycsICd4czppbnQnLCAneHM6aW50ZWdlcicsICd4czppdGVtJywgJ3hzOmphdmEnLCAneHM6bGFuZ3VhZ2UnLFxuICAgICd4czpsb25nJywgJ3hzOk5hbWUnLCAneHM6TkNOYW1lJywgJ3hzOm5lZ2F0aXZlSW50ZWdlcicsICd4czpOTVRPS0VOJywgJ3hzOk5NVE9LRU5TJyxcbiAgICAneHM6bm9uTmVnYXRpdmVJbnRlZ2VyJywgJ3hzOm5vblBvc2l0aXZlSW50ZWdlcicsICd4czpub3JtYWxpemVkU3RyaW5nJywgJ3hzOk5PVEFUSU9OJyxcbiAgICAneHM6bnVtZXJpYycsICd4czpwb3NpdGl2ZUludGVnZXInLCAneHM6cHJlY2lzaW9uRGVjaW1hbCcsICd4czpRTmFtZScsICd4czpzaG9ydCcsICd4czpzdHJpbmcnLFxuICAgICd4czp0aW1lJywgJ3hzOnRva2VuJywgJ3hzOnVuc2lnbmVkQnl0ZScsICd4czp1bnNpZ25lZEludCcsICd4czp1bnNpZ25lZExvbmcnLFxuICAgICd4czp1bnNpZ25lZFNob3J0JywgJ3hzOnVudHlwZWQnLCAneHM6dW50eXBlZEF0b21pYycsICd4czp5ZWFyTW9udGhEdXJhdGlvbiddO1xuICAgIGZvcih2YXIgaT0wLCBsPXR5cGVzLmxlbmd0aDsgaSA8IGw7IGkrKykgeyBrd09ialt0eXBlc1tpXV0gPSBhdG9tO307XG5cbiAgICAvLyBlYWNoIG9wZXJhdG9yIHdpbGwgYWRkIGEgcHJvcGVydHkgdG8ga3dPYmogd2l0aCB2YWx1ZSBvZiB7dHlwZTogXCJvcGVyYXRvclwiLCBzdHlsZTogXCJrZXl3b3JkXCJ9XG4gICAgdmFyIG9wZXJhdG9ycyA9IFsnZXEnLCAnbmUnLCAnbHQnLCAnbGUnLCAnZ3QnLCAnZ2UnLCAnOj0nLCAnPScsICc+JywgJz49JywgJzwnLCAnPD0nLCAnLicsICd8JywgJz8nLCAnYW5kJywgJ29yJywgJ2RpdicsICdpZGl2JywgJ21vZCcsICcqJywgJy8nLCAnKycsICctJ107XG4gICAgZm9yKHZhciBpPTAsIGw9b3BlcmF0b3JzLmxlbmd0aDsgaSA8IGw7IGkrKykgeyBrd09ialtvcGVyYXRvcnNbaV1dID0gb3BlcmF0b3I7fTtcblxuICAgIC8vIGVhY2ggYXhpc19zcGVjaWZpZXJzIHdpbGwgYWRkIGEgcHJvcGVydHkgdG8ga3dPYmogd2l0aCB2YWx1ZSBvZiB7dHlwZTogXCJheGlzX3NwZWNpZmllclwiLCBzdHlsZTogXCJxdWFsaWZpZXJcIn1cbiAgICB2YXIgYXhpc19zcGVjaWZpZXJzID0gW1wic2VsZjo6XCIsIFwiYXR0cmlidXRlOjpcIiwgXCJjaGlsZDo6XCIsIFwiZGVzY2VuZGFudDo6XCIsIFwiZGVzY2VuZGFudC1vci1zZWxmOjpcIiwgXCJwYXJlbnQ6OlwiLFxuICAgIFwiYW5jZXN0b3I6OlwiLCBcImFuY2VzdG9yLW9yLXNlbGY6OlwiLCBcImZvbGxvd2luZzo6XCIsIFwicHJlY2VkaW5nOjpcIiwgXCJmb2xsb3dpbmctc2libGluZzo6XCIsIFwicHJlY2VkaW5nLXNpYmxpbmc6OlwiXTtcbiAgICBmb3IodmFyIGk9MCwgbD1heGlzX3NwZWNpZmllcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7IGt3T2JqW2F4aXNfc3BlY2lmaWVyc1tpXV0gPSBxdWFsaWZpZXI7IH07XG5cbiAgICByZXR1cm4ga3dPYmo7XG4gIH0oKTtcblxuICBmdW5jdGlvbiBjaGFpbihzdHJlYW0sIHN0YXRlLCBmKSB7XG4gICAgc3RhdGUudG9rZW5pemUgPSBmO1xuICAgIHJldHVybiBmKHN0cmVhbSwgc3RhdGUpO1xuICB9XG5cbiAgLy8gdGhlIHByaW1hcnkgbW9kZSB0b2tlbml6ZXJcbiAgZnVuY3Rpb24gdG9rZW5CYXNlKHN0cmVhbSwgc3RhdGUpIHtcbiAgICB2YXIgY2ggPSBzdHJlYW0ubmV4dCgpLFxuICAgICAgICBtaWdodEJlRnVuY3Rpb24gPSBmYWxzZSxcbiAgICAgICAgaXNFUU5hbWUgPSBpc0VRTmFtZUFoZWFkKHN0cmVhbSk7XG5cbiAgICAvLyBhbiBYTUwgdGFnIChpZiBub3QgaW4gc29tZSBzdWIsIGNoYWluZWQgdG9rZW5pemVyKVxuICAgIGlmIChjaCA9PSBcIjxcIikge1xuICAgICAgaWYoc3RyZWFtLm1hdGNoKFwiIS0tXCIsIHRydWUpKVxuICAgICAgICByZXR1cm4gY2hhaW4oc3RyZWFtLCBzdGF0ZSwgdG9rZW5YTUxDb21tZW50KTtcblxuICAgICAgaWYoc3RyZWFtLm1hdGNoKFwiIVtDREFUQVwiLCBmYWxzZSkpIHtcbiAgICAgICAgc3RhdGUudG9rZW5pemUgPSB0b2tlbkNEQVRBO1xuICAgICAgICByZXR1cm4gXCJ0YWdcIjtcbiAgICAgIH1cblxuICAgICAgaWYoc3RyZWFtLm1hdGNoKFwiP1wiLCBmYWxzZSkpIHtcbiAgICAgICAgcmV0dXJuIGNoYWluKHN0cmVhbSwgc3RhdGUsIHRva2VuUHJlUHJvY2Vzc2luZyk7XG4gICAgICB9XG5cbiAgICAgIHZhciBpc2Nsb3NlID0gc3RyZWFtLmVhdChcIi9cIik7XG4gICAgICBzdHJlYW0uZWF0U3BhY2UoKTtcbiAgICAgIHZhciB0YWdOYW1lID0gXCJcIiwgYztcbiAgICAgIHdoaWxlICgoYyA9IHN0cmVhbS5lYXQoL1teXFxzXFx1MDBhMD08PlxcXCJcXCdcXC8/XS8pKSkgdGFnTmFtZSArPSBjO1xuXG4gICAgICByZXR1cm4gY2hhaW4oc3RyZWFtLCBzdGF0ZSwgdG9rZW5UYWcodGFnTmFtZSwgaXNjbG9zZSkpO1xuICAgIH1cbiAgICAvLyBzdGFydCBjb2RlIGJsb2NrXG4gICAgZWxzZSBpZihjaCA9PSBcIntcIikge1xuICAgICAgcHVzaFN0YXRlU3RhY2soc3RhdGUsIHsgdHlwZTogXCJjb2RlYmxvY2tcIn0pO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIC8vIGVuZCBjb2RlIGJsb2NrXG4gICAgZWxzZSBpZihjaCA9PSBcIn1cIikge1xuICAgICAgcG9wU3RhdGVTdGFjayhzdGF0ZSk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgLy8gaWYgd2UncmUgaW4gYW4gWE1MIGJsb2NrXG4gICAgZWxzZSBpZihpc0luWG1sQmxvY2soc3RhdGUpKSB7XG4gICAgICBpZihjaCA9PSBcIj5cIilcbiAgICAgICAgcmV0dXJuIFwidGFnXCI7XG4gICAgICBlbHNlIGlmKGNoID09IFwiL1wiICYmIHN0cmVhbS5lYXQoXCI+XCIpKSB7XG4gICAgICAgIHBvcFN0YXRlU3RhY2soc3RhdGUpO1xuICAgICAgICByZXR1cm4gXCJ0YWdcIjtcbiAgICAgIH1cbiAgICAgIGVsc2VcbiAgICAgICAgcmV0dXJuIFwidmFyaWFibGVcIjtcbiAgICB9XG4gICAgLy8gaWYgYSBudW1iZXJcbiAgICBlbHNlIGlmICgvXFxkLy50ZXN0KGNoKSkge1xuICAgICAgc3RyZWFtLm1hdGNoKC9eXFxkKig/OlxcLlxcZCopPyg/OkVbK1xcLV0/XFxkKyk/Lyk7XG4gICAgICByZXR1cm4gXCJhdG9tXCI7XG4gICAgfVxuICAgIC8vIGNvbW1lbnQgc3RhcnRcbiAgICBlbHNlIGlmIChjaCA9PT0gXCIoXCIgJiYgc3RyZWFtLmVhdChcIjpcIikpIHtcbiAgICAgIHB1c2hTdGF0ZVN0YWNrKHN0YXRlLCB7IHR5cGU6IFwiY29tbWVudFwifSk7XG4gICAgICByZXR1cm4gY2hhaW4oc3RyZWFtLCBzdGF0ZSwgdG9rZW5Db21tZW50KTtcbiAgICB9XG4gICAgLy8gcXVvdGVkIHN0cmluZ1xuICAgIGVsc2UgaWYgKCFpc0VRTmFtZSAmJiAoY2ggPT09ICdcIicgfHwgY2ggPT09IFwiJ1wiKSlcbiAgICAgIHJldHVybiBjaGFpbihzdHJlYW0sIHN0YXRlLCB0b2tlblN0cmluZyhjaCkpO1xuICAgIC8vIHZhcmlhYmxlXG4gICAgZWxzZSBpZihjaCA9PT0gXCIkXCIpIHtcbiAgICAgIHJldHVybiBjaGFpbihzdHJlYW0sIHN0YXRlLCB0b2tlblZhcmlhYmxlKTtcbiAgICB9XG4gICAgLy8gYXNzaWdubWVudFxuICAgIGVsc2UgaWYoY2ggPT09XCI6XCIgJiYgc3RyZWFtLmVhdChcIj1cIikpIHtcbiAgICAgIHJldHVybiBcImtleXdvcmRcIjtcbiAgICB9XG4gICAgLy8gb3BlbiBwYXJlblxuICAgIGVsc2UgaWYoY2ggPT09IFwiKFwiKSB7XG4gICAgICBwdXNoU3RhdGVTdGFjayhzdGF0ZSwgeyB0eXBlOiBcInBhcmVuXCJ9KTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAvLyBjbG9zZSBwYXJlblxuICAgIGVsc2UgaWYoY2ggPT09IFwiKVwiKSB7XG4gICAgICBwb3BTdGF0ZVN0YWNrKHN0YXRlKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAvLyBvcGVuIHBhcmVuXG4gICAgZWxzZSBpZihjaCA9PT0gXCJbXCIpIHtcbiAgICAgIHB1c2hTdGF0ZVN0YWNrKHN0YXRlLCB7IHR5cGU6IFwiYnJhY2tldFwifSk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgLy8gY2xvc2UgcGFyZW5cbiAgICBlbHNlIGlmKGNoID09PSBcIl1cIikge1xuICAgICAgcG9wU3RhdGVTdGFjayhzdGF0ZSk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB2YXIga25vd24gPSBrZXl3b3Jkcy5wcm9wZXJ0eUlzRW51bWVyYWJsZShjaCkgJiYga2V5d29yZHNbY2hdO1xuXG4gICAgICAvLyBpZiB0aGVyZSdzIGEgRVFOYW1lIGFoZWFkLCBjb25zdW1lIHRoZSByZXN0IG9mIHRoZSBzdHJpbmcgcG9ydGlvbiwgaXQncyBsaWtlbHkgYSBmdW5jdGlvblxuICAgICAgaWYoaXNFUU5hbWUgJiYgY2ggPT09ICdcXFwiJykgd2hpbGUoc3RyZWFtLm5leHQoKSAhPT0gJ1wiJyl7fVxuICAgICAgaWYoaXNFUU5hbWUgJiYgY2ggPT09ICdcXCcnKSB3aGlsZShzdHJlYW0ubmV4dCgpICE9PSAnXFwnJyl7fVxuXG4gICAgICAvLyBnb2JibGUgdXAgYSB3b3JkIGlmIHRoZSBjaGFyYWN0ZXIgaXMgbm90IGtub3duXG4gICAgICBpZigha25vd24pIHN0cmVhbS5lYXRXaGlsZSgvW1xcd1xcJF8tXS8pO1xuXG4gICAgICAvLyBnb2JibGUgYSBjb2xvbiBpbiB0aGUgY2FzZSB0aGF0IGlzIGEgbGliIGZ1bmMgdHlwZSBjYWxsIGZuOmRvY1xuICAgICAgdmFyIGZvdW5kQ29sb24gPSBzdHJlYW0uZWF0KFwiOlwiKTtcblxuICAgICAgLy8gaWYgdGhlcmUncyBub3QgYSBzZWNvbmQgY29sb24sIGdvYmJsZSBhbm90aGVyIHdvcmQuIE90aGVyd2lzZSwgaXQncyBwcm9iYWJseSBhbiBheGlzIHNwZWNpZmllclxuICAgICAgLy8gd2hpY2ggc2hvdWxkIGdldCBtYXRjaGVkIGFzIGEga2V5d29yZFxuICAgICAgaWYoIXN0cmVhbS5lYXQoXCI6XCIpICYmIGZvdW5kQ29sb24pIHtcbiAgICAgICAgc3RyZWFtLmVhdFdoaWxlKC9bXFx3XFwkXy1dLyk7XG4gICAgICB9XG4gICAgICAvLyBpZiB0aGUgbmV4dCBub24gd2hpdGVzcGFjZSBjaGFyYWN0ZXIgaXMgYW4gb3BlbiBwYXJlbiwgdGhpcyBpcyBwcm9iYWJseSBhIGZ1bmN0aW9uIChpZiBub3QgYSBrZXl3b3JkIG9mIG90aGVyIHNvcnQpXG4gICAgICBpZihzdHJlYW0ubWF0Y2goL15bIFxcdF0qXFwoLywgZmFsc2UpKSB7XG4gICAgICAgIG1pZ2h0QmVGdW5jdGlvbiA9IHRydWU7XG4gICAgICB9XG4gICAgICAvLyBpcyB0aGUgd29yZCBhIGtleXdvcmQ/XG4gICAgICB2YXIgd29yZCA9IHN0cmVhbS5jdXJyZW50KCk7XG4gICAgICBrbm93biA9IGtleXdvcmRzLnByb3BlcnR5SXNFbnVtZXJhYmxlKHdvcmQpICYmIGtleXdvcmRzW3dvcmRdO1xuXG4gICAgICAvLyBpZiB3ZSB0aGluayBpdCdzIGEgZnVuY3Rpb24gY2FsbCBidXQgbm90IHlldCBrbm93bixcbiAgICAgIC8vIHNldCBzdHlsZSB0byB2YXJpYWJsZSBmb3Igbm93IGZvciBsYWNrIG9mIHNvbWV0aGluZyBiZXR0ZXJcbiAgICAgIGlmKG1pZ2h0QmVGdW5jdGlvbiAmJiAha25vd24pIGtub3duID0ge3R5cGU6IFwiZnVuY3Rpb25fY2FsbFwiLCBzdHlsZTogXCJ2YXJpYWJsZSBkZWZcIn07XG5cbiAgICAgIC8vIGlmIHRoZSBwcmV2aW91cyB3b3JkIHdhcyBlbGVtZW50LCBhdHRyaWJ1dGUsIGF4aXMgc3BlY2lmaWVyLCB0aGlzIHdvcmQgc2hvdWxkIGJlIHRoZSBuYW1lIG9mIHRoYXRcbiAgICAgIGlmKGlzSW5YbWxDb25zdHJ1Y3RvcihzdGF0ZSkpIHtcbiAgICAgICAgcG9wU3RhdGVTdGFjayhzdGF0ZSk7XG4gICAgICAgIHJldHVybiBcInZhcmlhYmxlXCI7XG4gICAgICB9XG4gICAgICAvLyBhcyBwcmV2aW91c2x5IGNoZWNrZWQsIGlmIHRoZSB3b3JkIGlzIGVsZW1lbnQsYXR0cmlidXRlLCBheGlzIHNwZWNpZmllciwgY2FsbCBpdCBhbiBcInhtbGNvbnN0cnVjdG9yXCIgYW5kXG4gICAgICAvLyBwdXNoIHRoZSBzdGFjayBzbyB3ZSBrbm93IHRvIGxvb2sgZm9yIGl0IG9uIHRoZSBuZXh0IHdvcmRcbiAgICAgIGlmKHdvcmQgPT0gXCJlbGVtZW50XCIgfHwgd29yZCA9PSBcImF0dHJpYnV0ZVwiIHx8IGtub3duLnR5cGUgPT0gXCJheGlzX3NwZWNpZmllclwiKSBwdXNoU3RhdGVTdGFjayhzdGF0ZSwge3R5cGU6IFwieG1sY29uc3RydWN0b3JcIn0pO1xuXG4gICAgICAvLyBpZiB0aGUgd29yZCBpcyBrbm93biwgcmV0dXJuIHRoZSBkZXRhaWxzIG9mIHRoYXQgZWxzZSBqdXN0IGNhbGwgdGhpcyBhIGdlbmVyaWMgJ3dvcmQnXG4gICAgICByZXR1cm4ga25vd24gPyBrbm93bi5zdHlsZSA6IFwidmFyaWFibGVcIjtcbiAgICB9XG4gIH1cblxuICAvLyBoYW5kbGUgY29tbWVudHMsIGluY2x1ZGluZyBuZXN0ZWRcbiAgZnVuY3Rpb24gdG9rZW5Db21tZW50KHN0cmVhbSwgc3RhdGUpIHtcbiAgICB2YXIgbWF5YmVFbmQgPSBmYWxzZSwgbWF5YmVOZXN0ZWQgPSBmYWxzZSwgbmVzdGVkQ291bnQgPSAwLCBjaDtcbiAgICB3aGlsZSAoY2ggPSBzdHJlYW0ubmV4dCgpKSB7XG4gICAgICBpZiAoY2ggPT0gXCIpXCIgJiYgbWF5YmVFbmQpIHtcbiAgICAgICAgaWYobmVzdGVkQ291bnQgPiAwKVxuICAgICAgICAgIG5lc3RlZENvdW50LS07XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHBvcFN0YXRlU3RhY2soc3RhdGUpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIGlmKGNoID09IFwiOlwiICYmIG1heWJlTmVzdGVkKSB7XG4gICAgICAgIG5lc3RlZENvdW50Kys7XG4gICAgICB9XG4gICAgICBtYXliZUVuZCA9IChjaCA9PSBcIjpcIik7XG4gICAgICBtYXliZU5lc3RlZCA9IChjaCA9PSBcIihcIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIFwiY29tbWVudFwiO1xuICB9XG5cbiAgLy8gdG9rZW5pemVyIGZvciBzdHJpbmcgbGl0ZXJhbHNcbiAgLy8gb3B0aW9uYWxseSBwYXNzIGEgdG9rZW5pemVyIGZ1bmN0aW9uIHRvIHNldCBzdGF0ZS50b2tlbml6ZSBiYWNrIHRvIHdoZW4gZmluaXNoZWRcbiAgZnVuY3Rpb24gdG9rZW5TdHJpbmcocXVvdGUsIGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oc3RyZWFtLCBzdGF0ZSkge1xuICAgICAgdmFyIGNoO1xuXG4gICAgICBpZihpc0luU3RyaW5nKHN0YXRlKSAmJiBzdHJlYW0uY3VycmVudCgpID09IHF1b3RlKSB7XG4gICAgICAgIHBvcFN0YXRlU3RhY2soc3RhdGUpO1xuICAgICAgICBpZihmKSBzdGF0ZS50b2tlbml6ZSA9IGY7XG4gICAgICAgIHJldHVybiBcInN0cmluZ1wiO1xuICAgICAgfVxuXG4gICAgICBwdXNoU3RhdGVTdGFjayhzdGF0ZSwgeyB0eXBlOiBcInN0cmluZ1wiLCBuYW1lOiBxdW90ZSwgdG9rZW5pemU6IHRva2VuU3RyaW5nKHF1b3RlLCBmKSB9KTtcblxuICAgICAgLy8gaWYgd2UncmUgaW4gYSBzdHJpbmcgYW5kIGluIGFuIFhNTCBibG9jaywgYWxsb3cgYW4gZW1iZWRkZWQgY29kZSBibG9ja1xuICAgICAgaWYoc3RyZWFtLm1hdGNoKFwie1wiLCBmYWxzZSkgJiYgaXNJblhtbEF0dHJpYnV0ZUJsb2NrKHN0YXRlKSkge1xuICAgICAgICBzdGF0ZS50b2tlbml6ZSA9IHRva2VuQmFzZTtcbiAgICAgICAgcmV0dXJuIFwic3RyaW5nXCI7XG4gICAgICB9XG5cblxuICAgICAgd2hpbGUgKGNoID0gc3RyZWFtLm5leHQoKSkge1xuICAgICAgICBpZiAoY2ggPT0gIHF1b3RlKSB7XG4gICAgICAgICAgcG9wU3RhdGVTdGFjayhzdGF0ZSk7XG4gICAgICAgICAgaWYoZikgc3RhdGUudG9rZW5pemUgPSBmO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIC8vIGlmIHdlJ3JlIGluIGEgc3RyaW5nIGFuZCBpbiBhbiBYTUwgYmxvY2ssIGFsbG93IGFuIGVtYmVkZGVkIGNvZGUgYmxvY2sgaW4gYW4gYXR0cmlidXRlXG4gICAgICAgICAgaWYoc3RyZWFtLm1hdGNoKFwie1wiLCBmYWxzZSkgJiYgaXNJblhtbEF0dHJpYnV0ZUJsb2NrKHN0YXRlKSkge1xuICAgICAgICAgICAgc3RhdGUudG9rZW5pemUgPSB0b2tlbkJhc2U7XG4gICAgICAgICAgICByZXR1cm4gXCJzdHJpbmdcIjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gXCJzdHJpbmdcIjtcbiAgICB9O1xuICB9XG5cbiAgLy8gdG9rZW5pemVyIGZvciB2YXJpYWJsZXNcbiAgZnVuY3Rpb24gdG9rZW5WYXJpYWJsZShzdHJlYW0sIHN0YXRlKSB7XG4gICAgdmFyIGlzVmFyaWFibGVDaGFyID0gL1tcXHdcXCRfLV0vO1xuXG4gICAgLy8gYSB2YXJpYWJsZSBtYXkgc3RhcnQgd2l0aCBhIHF1b3RlZCBFUU5hbWUgc28gaWYgdGhlIG5leHQgY2hhcmFjdGVyIGlzIHF1b3RlLCBjb25zdW1lIHRvIHRoZSBuZXh0IHF1b3RlXG4gICAgaWYoc3RyZWFtLmVhdChcIlxcXCJcIikpIHtcbiAgICAgIHdoaWxlKHN0cmVhbS5uZXh0KCkgIT09ICdcXFwiJyl7fTtcbiAgICAgIHN0cmVhbS5lYXQoXCI6XCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHJlYW0uZWF0V2hpbGUoaXNWYXJpYWJsZUNoYXIpO1xuICAgICAgaWYoIXN0cmVhbS5tYXRjaChcIjo9XCIsIGZhbHNlKSkgc3RyZWFtLmVhdChcIjpcIik7XG4gICAgfVxuICAgIHN0cmVhbS5lYXRXaGlsZShpc1ZhcmlhYmxlQ2hhcik7XG4gICAgc3RhdGUudG9rZW5pemUgPSB0b2tlbkJhc2U7XG4gICAgcmV0dXJuIFwidmFyaWFibGVcIjtcbiAgfVxuXG4gIC8vIHRva2VuaXplciBmb3IgWE1MIHRhZ3NcbiAgZnVuY3Rpb24gdG9rZW5UYWcobmFtZSwgaXNjbG9zZSkge1xuICAgIHJldHVybiBmdW5jdGlvbihzdHJlYW0sIHN0YXRlKSB7XG4gICAgICBzdHJlYW0uZWF0U3BhY2UoKTtcbiAgICAgIGlmKGlzY2xvc2UgJiYgc3RyZWFtLmVhdChcIj5cIikpIHtcbiAgICAgICAgcG9wU3RhdGVTdGFjayhzdGF0ZSk7XG4gICAgICAgIHN0YXRlLnRva2VuaXplID0gdG9rZW5CYXNlO1xuICAgICAgICByZXR1cm4gXCJ0YWdcIjtcbiAgICAgIH1cbiAgICAgIC8vIHNlbGYgY2xvc2luZyB0YWcgd2l0aG91dCBhdHRyaWJ1dGVzP1xuICAgICAgaWYoIXN0cmVhbS5lYXQoXCIvXCIpKVxuICAgICAgICBwdXNoU3RhdGVTdGFjayhzdGF0ZSwgeyB0eXBlOiBcInRhZ1wiLCBuYW1lOiBuYW1lLCB0b2tlbml6ZTogdG9rZW5CYXNlfSk7XG4gICAgICBpZighc3RyZWFtLmVhdChcIj5cIikpIHtcbiAgICAgICAgc3RhdGUudG9rZW5pemUgPSB0b2tlbkF0dHJpYnV0ZTtcbiAgICAgICAgcmV0dXJuIFwidGFnXCI7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgc3RhdGUudG9rZW5pemUgPSB0b2tlbkJhc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gXCJ0YWdcIjtcbiAgICB9O1xuICB9XG5cbiAgLy8gdG9rZW5pemVyIGZvciBYTUwgYXR0cmlidXRlc1xuICBmdW5jdGlvbiB0b2tlbkF0dHJpYnV0ZShzdHJlYW0sIHN0YXRlKSB7XG4gICAgdmFyIGNoID0gc3RyZWFtLm5leHQoKTtcblxuICAgIGlmKGNoID09IFwiL1wiICYmIHN0cmVhbS5lYXQoXCI+XCIpKSB7XG4gICAgICBpZihpc0luWG1sQXR0cmlidXRlQmxvY2soc3RhdGUpKSBwb3BTdGF0ZVN0YWNrKHN0YXRlKTtcbiAgICAgIGlmKGlzSW5YbWxCbG9jayhzdGF0ZSkpIHBvcFN0YXRlU3RhY2soc3RhdGUpO1xuICAgICAgcmV0dXJuIFwidGFnXCI7XG4gICAgfVxuICAgIGlmKGNoID09IFwiPlwiKSB7XG4gICAgICBpZihpc0luWG1sQXR0cmlidXRlQmxvY2soc3RhdGUpKSBwb3BTdGF0ZVN0YWNrKHN0YXRlKTtcbiAgICAgIHJldHVybiBcInRhZ1wiO1xuICAgIH1cbiAgICBpZihjaCA9PSBcIj1cIilcbiAgICAgIHJldHVybiBudWxsO1xuICAgIC8vIHF1b3RlZCBzdHJpbmdcbiAgICBpZiAoY2ggPT0gJ1wiJyB8fCBjaCA9PSBcIidcIilcbiAgICAgIHJldHVybiBjaGFpbihzdHJlYW0sIHN0YXRlLCB0b2tlblN0cmluZyhjaCwgdG9rZW5BdHRyaWJ1dGUpKTtcblxuICAgIGlmKCFpc0luWG1sQXR0cmlidXRlQmxvY2soc3RhdGUpKVxuICAgICAgcHVzaFN0YXRlU3RhY2soc3RhdGUsIHsgdHlwZTogXCJhdHRyaWJ1dGVcIiwgdG9rZW5pemU6IHRva2VuQXR0cmlidXRlfSk7XG5cbiAgICBzdHJlYW0uZWF0KC9bYS16QS1aXzpdLyk7XG4gICAgc3RyZWFtLmVhdFdoaWxlKC9bLWEtekEtWjAtOV86Ll0vKTtcbiAgICBzdHJlYW0uZWF0U3BhY2UoKTtcblxuICAgIC8vIHRoZSBjYXNlIHdoZXJlIHRoZSBhdHRyaWJ1dGUgaGFzIG5vdCB2YWx1ZSBhbmQgdGhlIHRhZyB3YXMgY2xvc2VkXG4gICAgaWYoc3RyZWFtLm1hdGNoKFwiPlwiLCBmYWxzZSkgfHwgc3RyZWFtLm1hdGNoKFwiL1wiLCBmYWxzZSkpIHtcbiAgICAgIHBvcFN0YXRlU3RhY2soc3RhdGUpO1xuICAgICAgc3RhdGUudG9rZW5pemUgPSB0b2tlbkJhc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIFwiYXR0cmlidXRlXCI7XG4gIH1cblxuICAvLyBoYW5kbGUgY29tbWVudHMsIGluY2x1ZGluZyBuZXN0ZWRcbiAgZnVuY3Rpb24gdG9rZW5YTUxDb21tZW50KHN0cmVhbSwgc3RhdGUpIHtcbiAgICB2YXIgY2g7XG4gICAgd2hpbGUgKGNoID0gc3RyZWFtLm5leHQoKSkge1xuICAgICAgaWYgKGNoID09IFwiLVwiICYmIHN0cmVhbS5tYXRjaChcIi0+XCIsIHRydWUpKSB7XG4gICAgICAgIHN0YXRlLnRva2VuaXplID0gdG9rZW5CYXNlO1xuICAgICAgICByZXR1cm4gXCJjb21tZW50XCI7XG4gICAgICB9XG4gICAgfVxuICB9XG5cblxuICAvLyBoYW5kbGUgQ0RBVEFcbiAgZnVuY3Rpb24gdG9rZW5DREFUQShzdHJlYW0sIHN0YXRlKSB7XG4gICAgdmFyIGNoO1xuICAgIHdoaWxlIChjaCA9IHN0cmVhbS5uZXh0KCkpIHtcbiAgICAgIGlmIChjaCA9PSBcIl1cIiAmJiBzdHJlYW0ubWF0Y2goXCJdXCIsIHRydWUpKSB7XG4gICAgICAgIHN0YXRlLnRva2VuaXplID0gdG9rZW5CYXNlO1xuICAgICAgICByZXR1cm4gXCJjb21tZW50XCI7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gaGFuZGxlIHByZXByb2Nlc3NpbmcgaW5zdHJ1Y3Rpb25zXG4gIGZ1bmN0aW9uIHRva2VuUHJlUHJvY2Vzc2luZyhzdHJlYW0sIHN0YXRlKSB7XG4gICAgdmFyIGNoO1xuICAgIHdoaWxlIChjaCA9IHN0cmVhbS5uZXh0KCkpIHtcbiAgICAgIGlmIChjaCA9PSBcIj9cIiAmJiBzdHJlYW0ubWF0Y2goXCI+XCIsIHRydWUpKSB7XG4gICAgICAgIHN0YXRlLnRva2VuaXplID0gdG9rZW5CYXNlO1xuICAgICAgICByZXR1cm4gXCJjb21tZW50IG1ldGFcIjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuXG4gIC8vIGZ1bmN0aW9ucyB0byB0ZXN0IHRoZSBjdXJyZW50IGNvbnRleHQgb2YgdGhlIHN0YXRlXG4gIGZ1bmN0aW9uIGlzSW5YbWxCbG9jayhzdGF0ZSkgeyByZXR1cm4gaXNJbihzdGF0ZSwgXCJ0YWdcIik7IH1cbiAgZnVuY3Rpb24gaXNJblhtbEF0dHJpYnV0ZUJsb2NrKHN0YXRlKSB7IHJldHVybiBpc0luKHN0YXRlLCBcImF0dHJpYnV0ZVwiKTsgfVxuICBmdW5jdGlvbiBpc0luWG1sQ29uc3RydWN0b3Ioc3RhdGUpIHsgcmV0dXJuIGlzSW4oc3RhdGUsIFwieG1sY29uc3RydWN0b3JcIik7IH1cbiAgZnVuY3Rpb24gaXNJblN0cmluZyhzdGF0ZSkgeyByZXR1cm4gaXNJbihzdGF0ZSwgXCJzdHJpbmdcIik7IH1cblxuICBmdW5jdGlvbiBpc0VRTmFtZUFoZWFkKHN0cmVhbSkge1xuICAgIC8vIGFzc3VtZSB3ZSd2ZSBhbHJlYWR5IGVhdGVuIGEgcXVvdGUgKFwiKVxuICAgIGlmKHN0cmVhbS5jdXJyZW50KCkgPT09ICdcIicpXG4gICAgICByZXR1cm4gc3RyZWFtLm1hdGNoKC9eW15cXFwiXStcXFwiXFw6LywgZmFsc2UpO1xuICAgIGVsc2UgaWYoc3RyZWFtLmN1cnJlbnQoKSA9PT0gJ1xcJycpXG4gICAgICByZXR1cm4gc3RyZWFtLm1hdGNoKC9eW15cXFwiXStcXCdcXDovLCBmYWxzZSk7XG4gICAgZWxzZVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNJbihzdGF0ZSwgdHlwZSkge1xuICAgIHJldHVybiAoc3RhdGUuc3RhY2subGVuZ3RoICYmIHN0YXRlLnN0YWNrW3N0YXRlLnN0YWNrLmxlbmd0aCAtIDFdLnR5cGUgPT0gdHlwZSk7XG4gIH1cblxuICBmdW5jdGlvbiBwdXNoU3RhdGVTdGFjayhzdGF0ZSwgbmV3U3RhdGUpIHtcbiAgICBzdGF0ZS5zdGFjay5wdXNoKG5ld1N0YXRlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBvcFN0YXRlU3RhY2soc3RhdGUpIHtcbiAgICBzdGF0ZS5zdGFjay5wb3AoKTtcbiAgICB2YXIgcmVpbnN0YXRlVG9rZW5pemUgPSBzdGF0ZS5zdGFjay5sZW5ndGggJiYgc3RhdGUuc3RhY2tbc3RhdGUuc3RhY2subGVuZ3RoLTFdLnRva2VuaXplO1xuICAgIHN0YXRlLnRva2VuaXplID0gcmVpbnN0YXRlVG9rZW5pemUgfHwgdG9rZW5CYXNlO1xuICB9XG5cbiAgLy8gdGhlIGludGVyZmFjZSBmb3IgdGhlIG1vZGUgQVBJXG4gIHJldHVybiB7XG4gICAgc3RhcnRTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0b2tlbml6ZTogdG9rZW5CYXNlLFxuICAgICAgICBjYzogW10sXG4gICAgICAgIHN0YWNrOiBbXVxuICAgICAgfTtcbiAgICB9LFxuXG4gICAgdG9rZW46IGZ1bmN0aW9uKHN0cmVhbSwgc3RhdGUpIHtcbiAgICAgIGlmIChzdHJlYW0uZWF0U3BhY2UoKSkgcmV0dXJuIG51bGw7XG4gICAgICB2YXIgc3R5bGUgPSBzdGF0ZS50b2tlbml6ZShzdHJlYW0sIHN0YXRlKTtcbiAgICAgIHJldHVybiBzdHlsZTtcbiAgICB9LFxuXG4gICAgYmxvY2tDb21tZW50U3RhcnQ6IFwiKDpcIixcbiAgICBibG9ja0NvbW1lbnRFbmQ6IFwiOilcIlxuXG4gIH07XG5cbn0pO1xuXG5Db2RlTWlycm9yLmRlZmluZU1JTUUoXCJhcHBsaWNhdGlvbi94cXVlcnlcIiwgXCJ4cXVlcnlcIik7XG5cbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==