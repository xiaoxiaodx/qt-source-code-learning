(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"./node_modules/codemirror/addon/mode/multiplex.js":function(e,n,t){!function(e){"use strict";e.multiplexingMode=function(n){var t=Array.prototype.slice.call(arguments,1);function i(e,n,t,i){if("string"==typeof n){var r=e.indexOf(n,t);return i&&r>-1?r+n.length:r}var o=n.exec(t?e.slice(t):e);return o?o.index+t+(i?o[0].length:0):-1}return{startState:function(){return{outer:e.startState(n),innerActive:null,inner:null}},copyState:function(t){return{outer:e.copyState(n,t.outer),innerActive:t.innerActive,inner:t.innerActive&&e.copyState(t.innerActive.mode,t.inner)}},token:function(r,o){if(o.innerActive){var a=o.innerActive;if(l=r.string,!a.close&&r.sol())return o.innerActive=o.inner=null,this.token(r,o);if((u=a.close?i(l,a.close,r.pos,a.parseDelimiters):-1)==r.pos&&!a.parseDelimiters)return r.match(a.close),o.innerActive=o.inner=null,a.delimStyle&&a.delimStyle+" "+a.delimStyle+"-close";u>-1&&(r.string=l.slice(0,u));var s=a.mode.token(r,o.inner);return u>-1&&(r.string=l),u==r.pos&&a.parseDelimiters&&(o.innerActive=o.inner=null),a.innerStyle&&(s=s?s+" "+a.innerStyle:a.innerStyle),s}for(var c=1/0,l=r.string,d=0;d<t.length;++d){var u,m=t[d];if((u=i(l,m.open,r.pos))==r.pos){m.parseDelimiters||r.match(m.open),o.innerActive=m;var f=0;if(n.indent){var p=n.indent(o.outer,"","");p!==e.Pass&&(f=p)}return o.inner=e.startState(m.mode,f),m.delimStyle&&m.delimStyle+" "+m.delimStyle+"-open"}-1!=u&&u<c&&(c=u)}c!=1/0&&(r.string=l.slice(0,c));var v=n.token(r,o.outer);return c!=1/0&&(r.string=l),v},indent:function(t,i,r){var o=t.innerActive?t.innerActive.mode:n;return o.indent?o.indent(t.innerActive?t.inner:t.outer,i,r):e.Pass},blankLine:function(i){var r=i.innerActive?i.innerActive.mode:n;if(r.blankLine&&r.blankLine(i.innerActive?i.inner:i.outer),i.innerActive)"\n"===i.innerActive.close&&(i.innerActive=i.inner=null);else for(var o=0;o<t.length;++o){var a=t[o];"\n"===a.open&&(i.innerActive=a,i.inner=e.startState(a.mode,r.indent?r.indent(i.outer,"",""):0))}},electricChars:n.electricChars,innerMode:function(e){return e.inner?{state:e.inner,mode:e.innerActive.mode}:{state:e.outer,mode:n}}}}}(t("./node_modules/codemirror/lib/codemirror.js"))},"./node_modules/codemirror/mode/twig/twig.js":function(e,n,t){!function(e){"use strict";e.defineMode("twig:inner",(function(){var e=["and","as","autoescape","endautoescape","block","do","endblock","else","elseif","extends","for","endfor","embed","endembed","filter","endfilter","flush","from","if","endif","in","is","include","import","not","or","set","spaceless","endspaceless","with","endwith","trans","endtrans","blocktrans","endblocktrans","macro","endmacro","use","verbatim","endverbatim"],n=/^[+\-*&%=<>!?|~^]/,t=/^[:\[\(\{]/,i=["true","false","null","empty","defined","divisibleby","divisible by","even","odd","iterable","sameas","same as"],r=/^(\d[+\-\*\/])?\d+(\.\d+)?/;return e=new RegExp("(("+e.join(")|(")+"))\\b"),i=new RegExp("(("+i.join(")|(")+"))\\b"),{startState:function(){return{}},token:function(o,a){return function(o,a){var s=o.peek();if(a.incomment)return o.skipTo("#}")?(o.eatWhile(/\#|}/),a.incomment=!1):o.skipToEnd(),"comment";if(a.intag){if(a.operator){if(a.operator=!1,o.match(i))return"atom";if(o.match(r))return"number"}if(a.sign){if(a.sign=!1,o.match(i))return"atom";if(o.match(r))return"number"}if(a.instring)return s==a.instring&&(a.instring=!1),o.next(),"string";if("'"==s||'"'==s)return a.instring=s,o.next(),"string";if(o.match(a.intag+"}")||o.eat("-")&&o.match(a.intag+"}"))return a.intag=!1,"tag";if(o.match(n))return a.operator=!0,"operator";if(o.match(t))a.sign=!0;else if(o.eat(" ")||o.sol()){if(o.match(e))return"keyword";if(o.match(i))return"atom";if(o.match(r))return"number";o.sol()&&o.next()}else o.next();return"variable"}if(o.eat("{")){if(o.eat("#"))return a.incomment=!0,o.skipTo("#}")?(o.eatWhile(/\#|}/),a.incomment=!1):o.skipToEnd(),"comment";if(s=o.eat(/\{|%/))return a.intag=s,"{"==s&&(a.intag="}"),o.eat("-"),"tag"}o.next()}(o,a)}}})),e.defineMode("twig",(function(n,t){var i=e.getMode(n,"twig:inner");return t&&t.base?e.multiplexingMode(e.getMode(n,t.base),{open:/\{[{#%]/,close:/[}#%]\}/,mode:i,parseDelimiters:!0}):i})),e.defineMIME("text/x-twig","twig")}(t("./node_modules/codemirror/lib/codemirror.js"),t("./node_modules/codemirror/addon/mode/multiplex.js"))}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29kZW1pcnJvci9hZGRvbi9tb2RlL211bHRpcGxleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29kZW1pcnJvci9tb2RlL3R3aWcvdHdpZy5qcyJdLCJuYW1lcyI6WyJDb2RlTWlycm9yIiwibXVsdGlwbGV4aW5nTW9kZSIsIm91dGVyIiwib3RoZXJzIiwiQXJyYXkiLCJwcm90b3R5cGUiLCJzbGljZSIsImNhbGwiLCJhcmd1bWVudHMiLCJpbmRleE9mIiwic3RyaW5nIiwicGF0dGVybiIsImZyb20iLCJyZXR1cm5FbmQiLCJmb3VuZCIsImxlbmd0aCIsIm0iLCJleGVjIiwiaW5kZXgiLCJzdGFydFN0YXRlIiwiaW5uZXJBY3RpdmUiLCJpbm5lciIsImNvcHlTdGF0ZSIsInN0YXRlIiwibW9kZSIsInRva2VuIiwic3RyZWFtIiwiY3VySW5uZXIiLCJvbGRDb250ZW50IiwiY2xvc2UiLCJzb2wiLCJ0aGlzIiwicG9zIiwicGFyc2VEZWxpbWl0ZXJzIiwibWF0Y2giLCJkZWxpbVN0eWxlIiwiaW5uZXJUb2tlbiIsImlubmVyU3R5bGUiLCJjdXRPZmYiLCJJbmZpbml0eSIsImkiLCJvdGhlciIsIm9wZW4iLCJvdXRlckluZGVudCIsImluZGVudCIsInBvc3NpYmxlT3V0ZXJJbmRlbnQiLCJQYXNzIiwib3V0ZXJUb2tlbiIsInRleHRBZnRlciIsImxpbmUiLCJibGFua0xpbmUiLCJlbGVjdHJpY0NoYXJzIiwiaW5uZXJNb2RlIiwibW9kIiwiZGVmaW5lTW9kZSIsImtleXdvcmRzIiwib3BlcmF0b3IiLCJzaWduIiwiYXRvbSIsIm51bWJlciIsIlJlZ0V4cCIsImpvaW4iLCJjaCIsInBlZWsiLCJpbmNvbW1lbnQiLCJza2lwVG8iLCJlYXRXaGlsZSIsInNraXBUb0VuZCIsImludGFnIiwiaW5zdHJpbmciLCJuZXh0IiwiZWF0IiwidG9rZW5CYXNlIiwiY29uZmlnIiwicGFyc2VyQ29uZmlnIiwidHdp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LE1BR1g3QyxFQUFPNEMsT0FRRUUsQ0FBVTlDLEVBQVFILFFBSy9CdkIsRUFBV3NELFdBQVcsUUFBUSxTQUFTbUIsRUFBUUMsR0FDN0MsSUFBSUMsRUFBWTNFLEVBQVc0RSxRQUFRSCxFQUFRLGNBQzNDLE9BQUtDLEdBQWlCQSxFQUFhRyxLQUM1QjdFLEVBQVdDLGlCQUNoQkQsRUFBVzRFLFFBQVFILEVBQVFDLEVBQWFHLE1BQU8sQ0FDN0NuQyxLQUFNLFVBQVdiLE1BQU8sVUFBV0wsS0FBTW1ELEVBQVcxQyxpQkFBaUIsSUFIekIwQyxLQU9sRDNFLEVBQVc4RSxXQUFXLGNBQWUsUUF0SW5DekIsQ0FBSSxFQUFRLCtDQUEwQixFQUFRIiwiZmlsZSI6IjEwLmJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIENvZGVNaXJyb3IsIGNvcHlyaWdodCAoYykgYnkgTWFyaWpuIEhhdmVyYmVrZSBhbmQgb3RoZXJzXG4vLyBEaXN0cmlidXRlZCB1bmRlciBhbiBNSVQgbGljZW5zZTogaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC9MSUNFTlNFXG5cbihmdW5jdGlvbihtb2QpIHtcbiAgaWYgKHR5cGVvZiBleHBvcnRzID09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZSA9PSBcIm9iamVjdFwiKSAvLyBDb21tb25KU1xuICAgIG1vZChyZXF1aXJlKFwiLi4vLi4vbGliL2NvZGVtaXJyb3JcIikpO1xuICBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSAvLyBBTURcbiAgICBkZWZpbmUoW1wiLi4vLi4vbGliL2NvZGVtaXJyb3JcIl0sIG1vZCk7XG4gIGVsc2UgLy8gUGxhaW4gYnJvd3NlciBlbnZcbiAgICBtb2QoQ29kZU1pcnJvcik7XG59KShmdW5jdGlvbihDb2RlTWlycm9yKSB7XG5cInVzZSBzdHJpY3RcIjtcblxuQ29kZU1pcnJvci5tdWx0aXBsZXhpbmdNb2RlID0gZnVuY3Rpb24ob3V0ZXIgLyosIG90aGVycyAqLykge1xuICAvLyBPdGhlcnMgc2hvdWxkIGJlIHtvcGVuLCBjbG9zZSwgbW9kZSBbLCBkZWxpbVN0eWxlXSBbLCBpbm5lclN0eWxlXX0gb2JqZWN0c1xuICB2YXIgb3RoZXJzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcblxuICBmdW5jdGlvbiBpbmRleE9mKHN0cmluZywgcGF0dGVybiwgZnJvbSwgcmV0dXJuRW5kKSB7XG4gICAgaWYgKHR5cGVvZiBwYXR0ZXJuID09IFwic3RyaW5nXCIpIHtcbiAgICAgIHZhciBmb3VuZCA9IHN0cmluZy5pbmRleE9mKHBhdHRlcm4sIGZyb20pO1xuICAgICAgcmV0dXJuIHJldHVybkVuZCAmJiBmb3VuZCA+IC0xID8gZm91bmQgKyBwYXR0ZXJuLmxlbmd0aCA6IGZvdW5kO1xuICAgIH1cbiAgICB2YXIgbSA9IHBhdHRlcm4uZXhlYyhmcm9tID8gc3RyaW5nLnNsaWNlKGZyb20pIDogc3RyaW5nKTtcbiAgICByZXR1cm4gbSA/IG0uaW5kZXggKyBmcm9tICsgKHJldHVybkVuZCA/IG1bMF0ubGVuZ3RoIDogMCkgOiAtMTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgc3RhcnRTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBvdXRlcjogQ29kZU1pcnJvci5zdGFydFN0YXRlKG91dGVyKSxcbiAgICAgICAgaW5uZXJBY3RpdmU6IG51bGwsXG4gICAgICAgIGlubmVyOiBudWxsXG4gICAgICB9O1xuICAgIH0sXG5cbiAgICBjb3B5U3RhdGU6IGZ1bmN0aW9uKHN0YXRlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBvdXRlcjogQ29kZU1pcnJvci5jb3B5U3RhdGUob3V0ZXIsIHN0YXRlLm91dGVyKSxcbiAgICAgICAgaW5uZXJBY3RpdmU6IHN0YXRlLmlubmVyQWN0aXZlLFxuICAgICAgICBpbm5lcjogc3RhdGUuaW5uZXJBY3RpdmUgJiYgQ29kZU1pcnJvci5jb3B5U3RhdGUoc3RhdGUuaW5uZXJBY3RpdmUubW9kZSwgc3RhdGUuaW5uZXIpXG4gICAgICB9O1xuICAgIH0sXG5cbiAgICB0b2tlbjogZnVuY3Rpb24oc3RyZWFtLCBzdGF0ZSkge1xuICAgICAgaWYgKCFzdGF0ZS5pbm5lckFjdGl2ZSkge1xuICAgICAgICB2YXIgY3V0T2ZmID0gSW5maW5pdHksIG9sZENvbnRlbnQgPSBzdHJlYW0uc3RyaW5nO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG90aGVycy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgIHZhciBvdGhlciA9IG90aGVyc1tpXTtcbiAgICAgICAgICB2YXIgZm91bmQgPSBpbmRleE9mKG9sZENvbnRlbnQsIG90aGVyLm9wZW4sIHN0cmVhbS5wb3MpO1xuICAgICAgICAgIGlmIChmb3VuZCA9PSBzdHJlYW0ucG9zKSB7XG4gICAgICAgICAgICBpZiAoIW90aGVyLnBhcnNlRGVsaW1pdGVycykgc3RyZWFtLm1hdGNoKG90aGVyLm9wZW4pO1xuICAgICAgICAgICAgc3RhdGUuaW5uZXJBY3RpdmUgPSBvdGhlcjtcblxuICAgICAgICAgICAgLy8gR2V0IHRoZSBvdXRlciBpbmRlbnQsIG1ha2luZyBzdXJlIHRvIGhhbmRsZSBDb2RlTWlycm9yLlBhc3NcbiAgICAgICAgICAgIHZhciBvdXRlckluZGVudCA9IDA7XG4gICAgICAgICAgICBpZiAob3V0ZXIuaW5kZW50KSB7XG4gICAgICAgICAgICAgIHZhciBwb3NzaWJsZU91dGVySW5kZW50ID0gb3V0ZXIuaW5kZW50KHN0YXRlLm91dGVyLCBcIlwiLCBcIlwiKTtcbiAgICAgICAgICAgICAgaWYgKHBvc3NpYmxlT3V0ZXJJbmRlbnQgIT09IENvZGVNaXJyb3IuUGFzcykgb3V0ZXJJbmRlbnQgPSBwb3NzaWJsZU91dGVySW5kZW50O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzdGF0ZS5pbm5lciA9IENvZGVNaXJyb3Iuc3RhcnRTdGF0ZShvdGhlci5tb2RlLCBvdXRlckluZGVudCk7XG4gICAgICAgICAgICByZXR1cm4gb3RoZXIuZGVsaW1TdHlsZSAmJiAob3RoZXIuZGVsaW1TdHlsZSArIFwiIFwiICsgb3RoZXIuZGVsaW1TdHlsZSArIFwiLW9wZW5cIik7XG4gICAgICAgICAgfSBlbHNlIGlmIChmb3VuZCAhPSAtMSAmJiBmb3VuZCA8IGN1dE9mZikge1xuICAgICAgICAgICAgY3V0T2ZmID0gZm91bmQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjdXRPZmYgIT0gSW5maW5pdHkpIHN0cmVhbS5zdHJpbmcgPSBvbGRDb250ZW50LnNsaWNlKDAsIGN1dE9mZik7XG4gICAgICAgIHZhciBvdXRlclRva2VuID0gb3V0ZXIudG9rZW4oc3RyZWFtLCBzdGF0ZS5vdXRlcik7XG4gICAgICAgIGlmIChjdXRPZmYgIT0gSW5maW5pdHkpIHN0cmVhbS5zdHJpbmcgPSBvbGRDb250ZW50O1xuICAgICAgICByZXR1cm4gb3V0ZXJUb2tlbjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBjdXJJbm5lciA9IHN0YXRlLmlubmVyQWN0aXZlLCBvbGRDb250ZW50ID0gc3RyZWFtLnN0cmluZztcbiAgICAgICAgaWYgKCFjdXJJbm5lci5jbG9zZSAmJiBzdHJlYW0uc29sKCkpIHtcbiAgICAgICAgICBzdGF0ZS5pbm5lckFjdGl2ZSA9IHN0YXRlLmlubmVyID0gbnVsbDtcbiAgICAgICAgICByZXR1cm4gdGhpcy50b2tlbihzdHJlYW0sIHN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZm91bmQgPSBjdXJJbm5lci5jbG9zZSA/IGluZGV4T2Yob2xkQ29udGVudCwgY3VySW5uZXIuY2xvc2UsIHN0cmVhbS5wb3MsIGN1cklubmVyLnBhcnNlRGVsaW1pdGVycykgOiAtMTtcbiAgICAgICAgaWYgKGZvdW5kID09IHN0cmVhbS5wb3MgJiYgIWN1cklubmVyLnBhcnNlRGVsaW1pdGVycykge1xuICAgICAgICAgIHN0cmVhbS5tYXRjaChjdXJJbm5lci5jbG9zZSk7XG4gICAgICAgICAgc3RhdGUuaW5uZXJBY3RpdmUgPSBzdGF0ZS5pbm5lciA9IG51bGw7XG4gICAgICAgICAgcmV0dXJuIGN1cklubmVyLmRlbGltU3R5bGUgJiYgKGN1cklubmVyLmRlbGltU3R5bGUgKyBcIiBcIiArIGN1cklubmVyLmRlbGltU3R5bGUgKyBcIi1jbG9zZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZm91bmQgPiAtMSkgc3RyZWFtLnN0cmluZyA9IG9sZENvbnRlbnQuc2xpY2UoMCwgZm91bmQpO1xuICAgICAgICB2YXIgaW5uZXJUb2tlbiA9IGN1cklubmVyLm1vZGUudG9rZW4oc3RyZWFtLCBzdGF0ZS5pbm5lcik7XG4gICAgICAgIGlmIChmb3VuZCA+IC0xKSBzdHJlYW0uc3RyaW5nID0gb2xkQ29udGVudDtcblxuICAgICAgICBpZiAoZm91bmQgPT0gc3RyZWFtLnBvcyAmJiBjdXJJbm5lci5wYXJzZURlbGltaXRlcnMpXG4gICAgICAgICAgc3RhdGUuaW5uZXJBY3RpdmUgPSBzdGF0ZS5pbm5lciA9IG51bGw7XG5cbiAgICAgICAgaWYgKGN1cklubmVyLmlubmVyU3R5bGUpIHtcbiAgICAgICAgICBpZiAoaW5uZXJUb2tlbikgaW5uZXJUb2tlbiA9IGlubmVyVG9rZW4gKyBcIiBcIiArIGN1cklubmVyLmlubmVyU3R5bGU7XG4gICAgICAgICAgZWxzZSBpbm5lclRva2VuID0gY3VySW5uZXIuaW5uZXJTdHlsZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBpbm5lclRva2VuO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBpbmRlbnQ6IGZ1bmN0aW9uKHN0YXRlLCB0ZXh0QWZ0ZXIsIGxpbmUpIHtcbiAgICAgIHZhciBtb2RlID0gc3RhdGUuaW5uZXJBY3RpdmUgPyBzdGF0ZS5pbm5lckFjdGl2ZS5tb2RlIDogb3V0ZXI7XG4gICAgICBpZiAoIW1vZGUuaW5kZW50KSByZXR1cm4gQ29kZU1pcnJvci5QYXNzO1xuICAgICAgcmV0dXJuIG1vZGUuaW5kZW50KHN0YXRlLmlubmVyQWN0aXZlID8gc3RhdGUuaW5uZXIgOiBzdGF0ZS5vdXRlciwgdGV4dEFmdGVyLCBsaW5lKTtcbiAgICB9LFxuXG4gICAgYmxhbmtMaW5lOiBmdW5jdGlvbihzdGF0ZSkge1xuICAgICAgdmFyIG1vZGUgPSBzdGF0ZS5pbm5lckFjdGl2ZSA/IHN0YXRlLmlubmVyQWN0aXZlLm1vZGUgOiBvdXRlcjtcbiAgICAgIGlmIChtb2RlLmJsYW5rTGluZSkge1xuICAgICAgICBtb2RlLmJsYW5rTGluZShzdGF0ZS5pbm5lckFjdGl2ZSA/IHN0YXRlLmlubmVyIDogc3RhdGUub3V0ZXIpO1xuICAgICAgfVxuICAgICAgaWYgKCFzdGF0ZS5pbm5lckFjdGl2ZSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG90aGVycy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgIHZhciBvdGhlciA9IG90aGVyc1tpXTtcbiAgICAgICAgICBpZiAob3RoZXIub3BlbiA9PT0gXCJcXG5cIikge1xuICAgICAgICAgICAgc3RhdGUuaW5uZXJBY3RpdmUgPSBvdGhlcjtcbiAgICAgICAgICAgIHN0YXRlLmlubmVyID0gQ29kZU1pcnJvci5zdGFydFN0YXRlKG90aGVyLm1vZGUsIG1vZGUuaW5kZW50ID8gbW9kZS5pbmRlbnQoc3RhdGUub3V0ZXIsIFwiXCIsIFwiXCIpIDogMCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHN0YXRlLmlubmVyQWN0aXZlLmNsb3NlID09PSBcIlxcblwiKSB7XG4gICAgICAgIHN0YXRlLmlubmVyQWN0aXZlID0gc3RhdGUuaW5uZXIgPSBudWxsO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBlbGVjdHJpY0NoYXJzOiBvdXRlci5lbGVjdHJpY0NoYXJzLFxuXG4gICAgaW5uZXJNb2RlOiBmdW5jdGlvbihzdGF0ZSkge1xuICAgICAgcmV0dXJuIHN0YXRlLmlubmVyID8ge3N0YXRlOiBzdGF0ZS5pbm5lciwgbW9kZTogc3RhdGUuaW5uZXJBY3RpdmUubW9kZX0gOiB7c3RhdGU6IHN0YXRlLm91dGVyLCBtb2RlOiBvdXRlcn07XG4gICAgfVxuICB9O1xufTtcblxufSk7XG4iLCIvLyBDb2RlTWlycm9yLCBjb3B5cmlnaHQgKGMpIGJ5IE1hcmlqbiBIYXZlcmJla2UgYW5kIG90aGVyc1xuLy8gRGlzdHJpYnV0ZWQgdW5kZXIgYW4gTUlUIGxpY2Vuc2U6IGh0dHBzOi8vY29kZW1pcnJvci5uZXQvTElDRU5TRVxuXG4oZnVuY3Rpb24obW9kKSB7XG4gIGlmICh0eXBlb2YgZXhwb3J0cyA9PSBcIm9iamVjdFwiICYmIHR5cGVvZiBtb2R1bGUgPT0gXCJvYmplY3RcIikgLy8gQ29tbW9uSlNcbiAgICBtb2QocmVxdWlyZShcIi4uLy4uL2xpYi9jb2RlbWlycm9yXCIpLCAgcmVxdWlyZShcIi4uLy4uL2FkZG9uL21vZGUvbXVsdGlwbGV4XCIpKTtcbiAgZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkgLy8gQU1EXG4gICAgZGVmaW5lKFtcIi4uLy4uL2xpYi9jb2RlbWlycm9yXCIsIFwiLi4vLi4vYWRkb24vbW9kZS9tdWx0aXBsZXhcIl0sIG1vZCk7XG4gIGVsc2UgLy8gUGxhaW4gYnJvd3NlciBlbnZcbiAgICBtb2QoQ29kZU1pcnJvcik7XG59KShmdW5jdGlvbihDb2RlTWlycm9yKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIENvZGVNaXJyb3IuZGVmaW5lTW9kZShcInR3aWc6aW5uZXJcIiwgZnVuY3Rpb24oKSB7XG4gICAgdmFyIGtleXdvcmRzID0gW1wiYW5kXCIsIFwiYXNcIiwgXCJhdXRvZXNjYXBlXCIsIFwiZW5kYXV0b2VzY2FwZVwiLCBcImJsb2NrXCIsIFwiZG9cIiwgXCJlbmRibG9ja1wiLCBcImVsc2VcIiwgXCJlbHNlaWZcIiwgXCJleHRlbmRzXCIsIFwiZm9yXCIsIFwiZW5kZm9yXCIsIFwiZW1iZWRcIiwgXCJlbmRlbWJlZFwiLCBcImZpbHRlclwiLCBcImVuZGZpbHRlclwiLCBcImZsdXNoXCIsIFwiZnJvbVwiLCBcImlmXCIsIFwiZW5kaWZcIiwgXCJpblwiLCBcImlzXCIsIFwiaW5jbHVkZVwiLCBcImltcG9ydFwiLCBcIm5vdFwiLCBcIm9yXCIsIFwic2V0XCIsIFwic3BhY2VsZXNzXCIsIFwiZW5kc3BhY2VsZXNzXCIsIFwid2l0aFwiLCBcImVuZHdpdGhcIiwgXCJ0cmFuc1wiLCBcImVuZHRyYW5zXCIsIFwiYmxvY2t0cmFuc1wiLCBcImVuZGJsb2NrdHJhbnNcIiwgXCJtYWNyb1wiLCBcImVuZG1hY3JvXCIsIFwidXNlXCIsIFwidmVyYmF0aW1cIiwgXCJlbmR2ZXJiYXRpbVwiXSxcbiAgICAgICAgb3BlcmF0b3IgPSAvXlsrXFwtKiYlPTw+IT98fl5dLyxcbiAgICAgICAgc2lnbiA9IC9eWzpcXFtcXChcXHtdLyxcbiAgICAgICAgYXRvbSA9IFtcInRydWVcIiwgXCJmYWxzZVwiLCBcIm51bGxcIiwgXCJlbXB0eVwiLCBcImRlZmluZWRcIiwgXCJkaXZpc2libGVieVwiLCBcImRpdmlzaWJsZSBieVwiLCBcImV2ZW5cIiwgXCJvZGRcIiwgXCJpdGVyYWJsZVwiLCBcInNhbWVhc1wiLCBcInNhbWUgYXNcIl0sXG4gICAgICAgIG51bWJlciA9IC9eKFxcZFsrXFwtXFwqXFwvXSk/XFxkKyhcXC5cXGQrKT8vO1xuXG4gICAga2V5d29yZHMgPSBuZXcgUmVnRXhwKFwiKChcIiArIGtleXdvcmRzLmpvaW4oXCIpfChcIikgKyBcIikpXFxcXGJcIik7XG4gICAgYXRvbSA9IG5ldyBSZWdFeHAoXCIoKFwiICsgYXRvbS5qb2luKFwiKXwoXCIpICsgXCIpKVxcXFxiXCIpO1xuXG4gICAgZnVuY3Rpb24gdG9rZW5CYXNlIChzdHJlYW0sIHN0YXRlKSB7XG4gICAgICB2YXIgY2ggPSBzdHJlYW0ucGVlaygpO1xuXG4gICAgICAvL0NvbW1lbnRcbiAgICAgIGlmIChzdGF0ZS5pbmNvbW1lbnQpIHtcbiAgICAgICAgaWYgKCFzdHJlYW0uc2tpcFRvKFwiI31cIikpIHtcbiAgICAgICAgICBzdHJlYW0uc2tpcFRvRW5kKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RyZWFtLmVhdFdoaWxlKC9cXCN8fS8pO1xuICAgICAgICAgIHN0YXRlLmluY29tbWVudCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBcImNvbW1lbnRcIjtcbiAgICAgIC8vVGFnXG4gICAgICB9IGVsc2UgaWYgKHN0YXRlLmludGFnKSB7XG4gICAgICAgIC8vQWZ0ZXIgb3BlcmF0b3JcbiAgICAgICAgaWYgKHN0YXRlLm9wZXJhdG9yKSB7XG4gICAgICAgICAgc3RhdGUub3BlcmF0b3IgPSBmYWxzZTtcbiAgICAgICAgICBpZiAoc3RyZWFtLm1hdGNoKGF0b20pKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJhdG9tXCI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChzdHJlYW0ubWF0Y2gobnVtYmVyKSkge1xuICAgICAgICAgICAgcmV0dXJuIFwibnVtYmVyXCI7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vQWZ0ZXIgc2lnblxuICAgICAgICBpZiAoc3RhdGUuc2lnbikge1xuICAgICAgICAgIHN0YXRlLnNpZ24gPSBmYWxzZTtcbiAgICAgICAgICBpZiAoc3RyZWFtLm1hdGNoKGF0b20pKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJhdG9tXCI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChzdHJlYW0ubWF0Y2gobnVtYmVyKSkge1xuICAgICAgICAgICAgcmV0dXJuIFwibnVtYmVyXCI7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHN0YXRlLmluc3RyaW5nKSB7XG4gICAgICAgICAgaWYgKGNoID09IHN0YXRlLmluc3RyaW5nKSB7XG4gICAgICAgICAgICBzdGF0ZS5pbnN0cmluZyA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzdHJlYW0ubmV4dCgpO1xuICAgICAgICAgIHJldHVybiBcInN0cmluZ1wiO1xuICAgICAgICB9IGVsc2UgaWYgKGNoID09IFwiJ1wiIHx8IGNoID09ICdcIicpIHtcbiAgICAgICAgICBzdGF0ZS5pbnN0cmluZyA9IGNoO1xuICAgICAgICAgIHN0cmVhbS5uZXh0KCk7XG4gICAgICAgICAgcmV0dXJuIFwic3RyaW5nXCI7XG4gICAgICAgIH0gZWxzZSBpZiAoc3RyZWFtLm1hdGNoKHN0YXRlLmludGFnICsgXCJ9XCIpIHx8IHN0cmVhbS5lYXQoXCItXCIpICYmIHN0cmVhbS5tYXRjaChzdGF0ZS5pbnRhZyArIFwifVwiKSkge1xuICAgICAgICAgIHN0YXRlLmludGFnID0gZmFsc2U7XG4gICAgICAgICAgcmV0dXJuIFwidGFnXCI7XG4gICAgICAgIH0gZWxzZSBpZiAoc3RyZWFtLm1hdGNoKG9wZXJhdG9yKSkge1xuICAgICAgICAgIHN0YXRlLm9wZXJhdG9yID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4gXCJvcGVyYXRvclwiO1xuICAgICAgICB9IGVsc2UgaWYgKHN0cmVhbS5tYXRjaChzaWduKSkge1xuICAgICAgICAgIHN0YXRlLnNpZ24gPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChzdHJlYW0uZWF0KFwiIFwiKSB8fCBzdHJlYW0uc29sKCkpIHtcbiAgICAgICAgICAgIGlmIChzdHJlYW0ubWF0Y2goa2V5d29yZHMpKSB7XG4gICAgICAgICAgICAgIHJldHVybiBcImtleXdvcmRcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzdHJlYW0ubWF0Y2goYXRvbSkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIFwiYXRvbVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0cmVhbS5tYXRjaChudW1iZXIpKSB7XG4gICAgICAgICAgICAgIHJldHVybiBcIm51bWJlclwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0cmVhbS5zb2woKSkge1xuICAgICAgICAgICAgICBzdHJlYW0ubmV4dCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdHJlYW0ubmV4dCgpO1xuICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBcInZhcmlhYmxlXCI7XG4gICAgICB9IGVsc2UgaWYgKHN0cmVhbS5lYXQoXCJ7XCIpKSB7XG4gICAgICAgIGlmIChzdHJlYW0uZWF0KFwiI1wiKSkge1xuICAgICAgICAgIHN0YXRlLmluY29tbWVudCA9IHRydWU7XG4gICAgICAgICAgaWYgKCFzdHJlYW0uc2tpcFRvKFwiI31cIikpIHtcbiAgICAgICAgICAgIHN0cmVhbS5za2lwVG9FbmQoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3RyZWFtLmVhdFdoaWxlKC9cXCN8fS8pO1xuICAgICAgICAgICAgc3RhdGUuaW5jb21tZW50ID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBcImNvbW1lbnRcIjtcbiAgICAgICAgLy9PcGVuIHRhZ1xuICAgICAgICB9IGVsc2UgaWYgKGNoID0gc3RyZWFtLmVhdCgvXFx7fCUvKSkge1xuICAgICAgICAgIC8vQ2FjaGUgY2xvc2UgdGFnXG4gICAgICAgICAgc3RhdGUuaW50YWcgPSBjaDtcbiAgICAgICAgICBpZiAoY2ggPT0gXCJ7XCIpIHtcbiAgICAgICAgICAgIHN0YXRlLmludGFnID0gXCJ9XCI7XG4gICAgICAgICAgfVxuICAgICAgICAgIHN0cmVhbS5lYXQoXCItXCIpO1xuICAgICAgICAgIHJldHVybiBcInRhZ1wiO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBzdHJlYW0ubmV4dCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgc3RhcnRTdGF0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge307XG4gICAgICB9LFxuICAgICAgdG9rZW46IGZ1bmN0aW9uIChzdHJlYW0sIHN0YXRlKSB7XG4gICAgICAgIHJldHVybiB0b2tlbkJhc2Uoc3RyZWFtLCBzdGF0ZSk7XG4gICAgICB9XG4gICAgfTtcbiAgfSk7XG5cbiAgQ29kZU1pcnJvci5kZWZpbmVNb2RlKFwidHdpZ1wiLCBmdW5jdGlvbihjb25maWcsIHBhcnNlckNvbmZpZykge1xuICAgIHZhciB0d2lnSW5uZXIgPSBDb2RlTWlycm9yLmdldE1vZGUoY29uZmlnLCBcInR3aWc6aW5uZXJcIik7XG4gICAgaWYgKCFwYXJzZXJDb25maWcgfHwgIXBhcnNlckNvbmZpZy5iYXNlKSByZXR1cm4gdHdpZ0lubmVyO1xuICAgIHJldHVybiBDb2RlTWlycm9yLm11bHRpcGxleGluZ01vZGUoXG4gICAgICBDb2RlTWlycm9yLmdldE1vZGUoY29uZmlnLCBwYXJzZXJDb25maWcuYmFzZSksIHtcbiAgICAgICAgb3BlbjogL1xce1t7IyVdLywgY2xvc2U6IC9bfSMlXVxcfS8sIG1vZGU6IHR3aWdJbm5lciwgcGFyc2VEZWxpbWl0ZXJzOiB0cnVlXG4gICAgICB9XG4gICAgKTtcbiAgfSk7XG4gIENvZGVNaXJyb3IuZGVmaW5lTUlNRShcInRleHQveC10d2lnXCIsIFwidHdpZ1wiKTtcbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==