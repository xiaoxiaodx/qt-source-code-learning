(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"./node_modules/codemirror/addon/mode/simple.js":function(e,t,n){!function(e){"use strict";function t(e,t){if(!e.hasOwnProperty(t))throw new Error("Undefined state "+t+" in simple mode")}function n(e,t){if(!e)return/(?:)/;var n="";return e instanceof RegExp?(e.ignoreCase&&(n="i"),e=e.source):e=String(e),new RegExp((!1===t?"":"^")+"(?:"+e+")",n)}function r(e,r){(e.next||e.push)&&t(r,e.next||e.push),this.regex=n(e.regex),this.token=function(e){if(!e)return null;if(e.apply)return e;if("string"==typeof e)return e.replace(/\./g," ");for(var t=[],n=0;n<e.length;n++)t.push(e[n]&&e[n].replace(/\./g," "));return t}(e.token),this.data=e}function o(e,t){return function(n,r){if(r.pending){var o=r.pending.shift();return 0==r.pending.length&&(r.pending=null),n.pos+=o.text.length,o.token}if(r.local){if(r.local.end&&n.match(r.local.end)){var a=r.local.endToken||null;return r.local=r.localState=null,a}var l;return a=r.local.mode.token(n,r.localState),r.local.endScan&&(l=r.local.endScan.exec(n.current()))&&(n.pos=n.start+l.index),a}for(var i=e[r.state],d=0;d<i.length;d++){var c=i[d],u=(!c.data.sol||n.sol())&&n.match(c.regex);if(u){c.data.next?r.state=c.data.next:c.data.push?((r.stack||(r.stack=[])).push(r.state),r.state=c.data.push):c.data.pop&&r.stack&&r.stack.length&&(r.state=r.stack.pop()),c.data.mode&&s(t,r,c.data.mode,c.token),c.data.indent&&r.indent.push(n.indentation()+t.indentUnit),c.data.dedent&&r.indent.pop();var g=c.token;if(g&&g.apply&&(g=g(u)),u.length>2&&c.token&&"string"!=typeof c.token){r.pending=[];for(var f=2;f<u.length;f++)u[f]&&r.pending.push({text:u[f],token:c.token[f-1]});return n.backUp(u[0].length-(u[1]?u[1].length:0)),g[0]}return g&&g.join?g[0]:g}}return n.next(),null}}function a(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;var n=0;for(var r in e)if(e.hasOwnProperty(r)){if(!t.hasOwnProperty(r)||!a(e[r],t[r]))return!1;n++}for(var r in t)t.hasOwnProperty(r)&&n--;return 0==n}function s(t,r,o,s){var l;if(o.persistent)for(var i=r.persistentStates;i&&!l;i=i.next)(o.spec?a(o.spec,i.spec):o.mode==i.mode)&&(l=i);var d=l?l.mode:o.mode||e.getMode(t,o.spec),c=l?l.state:e.startState(d);o.persistent&&!l&&(r.persistentStates={mode:d,spec:o.spec,state:c,next:r.persistentStates}),r.localState=c,r.local={mode:d,end:o.end&&n(o.end),endScan:o.end&&!1!==o.forceEnd&&n(o.end,!1),endToken:s&&s.join?s[s.length-1]:s}}function l(t,n){return function(r,o,a){if(r.local&&r.local.mode.indent)return r.local.mode.indent(r.localState,o,a);if(null==r.indent||r.local||n.dontIndentStates&&function(e,t){for(var n=0;n<t.length;n++)if(t[n]===e)return!0}(r.state,n.dontIndentStates)>-1)return e.Pass;var s=r.indent.length-1,l=t[r.state];e:for(;;){for(var i=0;i<l.length;i++){var d=l[i];if(d.data.dedent&&!1!==d.data.dedentIfLineStart){var c=d.regex.exec(o);if(c&&c[0]){s--,(d.next||d.push)&&(l=t[d.next||d.push]),o=o.slice(c[0].length);continue e}}}break}return s<0?0:r.indent[s]}}e.defineSimpleMode=function(t,n){e.defineMode(t,(function(t){return e.simpleMode(t,n)}))},e.simpleMode=function(n,a){t(a,"start");var s={},i=a.meta||{},d=!1;for(var c in a)if(c!=i&&a.hasOwnProperty(c))for(var u=s[c]=[],g=a[c],f=0;f<g.length;f++){var p=g[f];u.push(new r(p,a)),(p.indent||p.dedent)&&(d=!0)}var k={startState:function(){return{state:"start",pending:null,local:null,localState:null,indent:d?[]:null}},copyState:function(t){var n={state:t.state,pending:t.pending,local:t.local,localState:null,indent:t.indent&&t.indent.slice(0)};t.localState&&(n.localState=e.copyState(t.local.mode,t.localState)),t.stack&&(n.stack=t.stack.slice(0));for(var r=t.persistentStates;r;r=r.next)n.persistentStates={mode:r.mode,spec:r.spec,state:r.state==t.localState?n.localState:e.copyState(r.mode,r.state),next:n.persistentStates};return n},token:o(s,n),innerMode:function(e){return e.local&&{mode:e.local.mode,state:e.localState}},indent:l(s,i)};if(i)for(var x in i)i.hasOwnProperty(x)&&(k[x]=i[x]);return k}}(n("./node_modules/codemirror/lib/codemirror.js"))},"./node_modules/codemirror/mode/factor/factor.js":function(e,t,n){!function(e){"use strict";e.defineSimpleMode("factor",{start:[{regex:/#?!.*/,token:"comment"},{regex:/"""/,token:"string",next:"string3"},{regex:/(STRING:)(\s)/,token:["keyword",null],next:"string2"},{regex:/\S*?"/,token:"string",next:"string"},{regex:/(?:0x[\d,a-f]+)|(?:0o[0-7]+)|(?:0b[0,1]+)|(?:\-?\d+.?\d*)(?=\s)/,token:"number"},{regex:/((?:GENERIC)|\:?\:)(\s+)(\S+)(\s+)(\()/,token:["keyword",null,"def",null,"bracket"],next:"stack"},{regex:/(M\:)(\s+)(\S+)(\s+)(\S+)/,token:["keyword",null,"def",null,"tag"]},{regex:/USING\:/,token:"keyword",next:"vocabulary"},{regex:/(USE\:|IN\:)(\s+)(\S+)(?=\s|$)/,token:["keyword",null,"tag"]},{regex:/(\S+\:)(\s+)(\S+)(?=\s|$)/,token:["keyword",null,"def"]},{regex:/(?:;|\\|t|f|if|loop|while|until|do|PRIVATE>|<PRIVATE|\.|\S*\[|\]|\S*\{|\})(?=\s|$)/,token:"keyword"},{regex:/\S+[\)>\.\*\?]+(?=\s|$)/,token:"builtin"},{regex:/[\)><]+\S+(?=\s|$)/,token:"builtin"},{regex:/(?:[\+\-\=\/\*<>])(?=\s|$)/,token:"keyword"},{regex:/\S+/,token:"variable"},{regex:/\s+|./,token:null}],vocabulary:[{regex:/;/,token:"keyword",next:"start"},{regex:/\S+/,token:"tag"},{regex:/\s+|./,token:null}],string:[{regex:/(?:[^\\]|\\.)*?"/,token:"string",next:"start"},{regex:/.*/,token:"string"}],string2:[{regex:/^;/,token:"keyword",next:"start"},{regex:/.*/,token:"string"}],string3:[{regex:/(?:[^\\]|\\.)*?"""/,token:"string",next:"start"},{regex:/.*/,token:"string"}],stack:[{regex:/\)/,token:"bracket",next:"start"},{regex:/--/,token:"bracket"},{regex:/\S+/,token:"meta"},{regex:/\s+|./,token:null}],meta:{dontIndentStates:["start","vocabulary","string","string3","stack"],lineComment:["!","#!"]}}),e.defineMIME("text/x-factor","factor")}(n("./node_modules/codemirror/lib/codemirror.js"),n("./node_modules/codemirror/addon/mode/simple.js"))}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29kZW1pcnJvci9hZGRvbi9tb2RlL3NpbXBsZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29kZW1pcnJvci9tb2RlL2ZhY3Rvci9mYWN0b3IuanMiXSwibmFtZXMiOlsiQ29kZU1pcnJvciIsImVuc3VyZVN0YXRlIiwic3RhdGVzIiwibmFtZSIsImhhc093blByb3BlcnR5IiwiRXJyb3IiLCJ0b1JlZ2V4IiwidmFsIiwiY2FyZXQiLCJmbGFncyIsIlJlZ0V4cCIsImlnbm9yZUNhc2UiLCJzb3VyY2UiLCJTdHJpbmciLCJSdWxlIiwiZGF0YSIsIm5leHQiLCJwdXNoIiwidGhpcyIsInJlZ2V4IiwidG9rZW4iLCJhcHBseSIsInJlcGxhY2UiLCJyZXN1bHQiLCJpIiwibGVuZ3RoIiwiYXNUb2tlbiIsInRva2VuRnVuY3Rpb24iLCJjb25maWciLCJzdHJlYW0iLCJzdGF0ZSIsInBlbmRpbmciLCJwZW5kIiwic2hpZnQiLCJwb3MiLCJ0ZXh0IiwibG9jYWwiLCJlbmQiLCJtYXRjaCIsInRvayIsImVuZFRva2VuIiwibG9jYWxTdGF0ZSIsIm0iLCJtb2RlIiwiZW5kU2NhbiIsImV4ZWMiLCJjdXJyZW50Iiwic3RhcnQiLCJpbmRleCIsImN1clN0YXRlIiwicnVsZSIsIm1hdGNoZXMiLCJzb2wiLCJzdGFjayIsInBvcCIsImVudGVyTG9jYWxNb2RlIiwiaW5kZW50IiwiaW5kZW50YXRpb24iLCJpbmRlbnRVbml0IiwiZGVkZW50IiwiaiIsImJhY2tVcCIsImpvaW4iLCJjbXAiLCJhIiwiYiIsInByb3BzIiwicHJvcCIsInNwZWMiLCJwZXJzIiwicGVyc2lzdGVudCIsInAiLCJwZXJzaXN0ZW50U3RhdGVzIiwiZ2V0TW9kZSIsImxTdGF0ZSIsInN0YXJ0U3RhdGUiLCJmb3JjZUVuZCIsImluZGVudEZ1bmN0aW9uIiwibWV0YSIsInRleHRBZnRlciIsImxpbmUiLCJkb250SW5kZW50U3RhdGVzIiwiYXJyIiwiaW5kZXhPZiIsIlBhc3MiLCJydWxlcyIsInNjYW4iLCJkZWRlbnRJZkxpbmVTdGFydCIsInNsaWNlIiwiZGVmaW5lU2ltcGxlTW9kZSIsImRlZmluZU1vZGUiLCJzaW1wbGVNb2RlIiwic3RhdGVzXyIsImhhc0luZGVudGF0aW9uIiwibGlzdCIsIm9yaWciLCJjb3B5U3RhdGUiLCJzIiwiaW5uZXJNb2RlIiwibW9kIiwidm9jYWJ1bGFyeSIsInN0cmluZyIsInN0cmluZzIiLCJzdHJpbmczIiwibGluZUNvbW1lbnQiLCJkZWZpbmVNSU1FIl0sIm1hcHBpbmdzIjoiNEhBVUcsU0FBU0EsR0FDVixhQWlEQSxTQUFTQyxFQUFZQyxFQUFRQyxHQUMzQixJQUFLRCxFQUFPRSxlQUFlRCxHQUN6QixNQUFNLElBQUlFLE1BQU0sbUJBQXFCRixFQUFPLG1CQUdoRCxTQUFTRyxFQUFRQyxFQUFLQyxHQUNwQixJQUFLRCxFQUFLLE1BQU8sT0FDakIsSUFBSUUsRUFBUSxHQU9aLE9BTklGLGFBQWVHLFFBQ2JILEVBQUlJLGFBQVlGLEVBQVEsS0FDNUJGLEVBQU1BLEVBQUlLLFFBRVZMLEVBQU1NLE9BQU9OLEdBRVIsSUFBSUcsU0FBa0IsSUFBVkYsRUFBa0IsR0FBSyxLQUFPLE1BQVFELEVBQU0sSUFBS0UsR0FhdEUsU0FBU0ssRUFBS0MsRUFBTWIsSUFDZGEsRUFBS0MsTUFBUUQsRUFBS0UsT0FBTWhCLEVBQVlDLEVBQVFhLEVBQUtDLE1BQVFELEVBQUtFLE1BQ2xFQyxLQUFLQyxNQUFRYixFQUFRUyxFQUFLSSxPQUMxQkQsS0FBS0UsTUFiUCxTQUFpQmIsR0FDZixJQUFLQSxFQUFLLE9BQU8sS0FDakIsR0FBSUEsRUFBSWMsTUFBTyxPQUFPZCxFQUN0QixHQUFrQixpQkFBUEEsRUFBaUIsT0FBT0EsRUFBSWUsUUFBUSxNQUFPLEtBRXRELElBREEsSUFBSUMsRUFBUyxHQUNKQyxFQUFJLEVBQUdBLEVBQUlqQixFQUFJa0IsT0FBUUQsSUFDOUJELEVBQU9OLEtBQUtWLEVBQUlpQixJQUFNakIsRUFBSWlCLEdB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Q0FBQ0QsTUFBTyxxQkFBc0JDLE1BQU8sV0FFckMsQ0FBQ0QsTUFBTyw2QkFBOEJDLE1BQU8sV0FFN0MsQ0FBQ0QsTUFBTyxNQUFPQyxNQUFPLFlBQ3RCLENBQUNELE1BQU8sUUFBU0MsTUFBTyxPQUUxQmdGLFdBQVksQ0FDVixDQUFDakYsTUFBTyxJQUFLQyxNQUFPLFVBQVdKLEtBQU0sU0FDckMsQ0FBQ0csTUFBTyxNQUFPQyxNQUFPLE9BQ3RCLENBQUNELE1BQU8sUUFBU0MsTUFBTyxPQUUxQmlGLE9BQVEsQ0FDTixDQUFDbEYsTUFBTyxtQkFBb0JDLE1BQU8sU0FBVUosS0FBTSxTQUNuRCxDQUFDRyxNQUFPLEtBQU1DLE1BQU8sV0FFdkJrRixRQUFTLENBQ1AsQ0FBQ25GLE1BQU8sS0FBTUMsTUFBTyxVQUFXSixLQUFNLFNBQ3RDLENBQUNHLE1BQU8sS0FBTUMsTUFBTyxXQUV2Qm1GLFFBQVMsQ0FDUCxDQUFDcEYsTUFBTyxxQkFBc0JDLE1BQU8sU0FBVUosS0FBTSxTQUNyRCxDQUFDRyxNQUFPLEtBQU1DLE1BQU8sV0FFdkJpQyxNQUFPLENBQ0wsQ0FBQ2xDLE1BQU8sS0FBTUMsTUFBTyxVQUFXSixLQUFNLFNBQ3RDLENBQUNHLE1BQU8sS0FBTUMsTUFBTyxXQUNyQixDQUFDRCxNQUFPLE1BQU9DLE1BQU8sUUFDdEIsQ0FBQ0QsTUFBTyxRQUFTQyxNQUFPLE9BTTFCMEQsS0FBTSxDQUNKRyxpQkFBa0IsQ0FBQyxRQUFTLGFBQWMsU0FBVSxVQUFXLFNBQy9EdUIsWUFBYSxDQUFFLElBQUssU0FJeEJ4RyxFQUFXeUcsV0FBVyxnQkFBaUIsVUExRXJDTixDQUFJLEVBQVEsK0NBQXlCLEVBQVEiLCJmaWxlIjoiMTIuYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29kZU1pcnJvciwgY29weXJpZ2h0IChjKSBieSBNYXJpam4gSGF2ZXJiZWtlIGFuZCBvdGhlcnNcbi8vIERpc3RyaWJ1dGVkIHVuZGVyIGFuIE1JVCBsaWNlbnNlOiBodHRwczovL2NvZGVtaXJyb3IubmV0L0xJQ0VOU0VcblxuKGZ1bmN0aW9uKG1vZCkge1xuICBpZiAodHlwZW9mIGV4cG9ydHMgPT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbW9kdWxlID09IFwib2JqZWN0XCIpIC8vIENvbW1vbkpTXG4gICAgbW9kKHJlcXVpcmUoXCIuLi8uLi9saWIvY29kZW1pcnJvclwiKSk7XG4gIGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIC8vIEFNRFxuICAgIGRlZmluZShbXCIuLi8uLi9saWIvY29kZW1pcnJvclwiXSwgbW9kKTtcbiAgZWxzZSAvLyBQbGFpbiBicm93c2VyIGVudlxuICAgIG1vZChDb2RlTWlycm9yKTtcbn0pKGZ1bmN0aW9uKENvZGVNaXJyb3IpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgQ29kZU1pcnJvci5kZWZpbmVTaW1wbGVNb2RlID0gZnVuY3Rpb24obmFtZSwgc3RhdGVzKSB7XG4gICAgQ29kZU1pcnJvci5kZWZpbmVNb2RlKG5hbWUsIGZ1bmN0aW9uKGNvbmZpZykge1xuICAgICAgcmV0dXJuIENvZGVNaXJyb3Iuc2ltcGxlTW9kZShjb25maWcsIHN0YXRlcyk7XG4gICAgfSk7XG4gIH07XG5cbiAgQ29kZU1pcnJvci5zaW1wbGVNb2RlID0gZnVuY3Rpb24oY29uZmlnLCBzdGF0ZXMpIHtcbiAgICBlbnN1cmVTdGF0ZShzdGF0ZXMsIFwic3RhcnRcIik7XG4gICAgdmFyIHN0YXRlc18gPSB7fSwgbWV0YSA9IHN0YXRlcy5tZXRhIHx8IHt9LCBoYXNJbmRlbnRhdGlvbiA9IGZhbHNlO1xuICAgIGZvciAodmFyIHN0YXRlIGluIHN0YXRlcykgaWYgKHN0YXRlICE9IG1ldGEgJiYgc3RhdGVzLmhhc093blByb3BlcnR5KHN0YXRlKSkge1xuICAgICAgdmFyIGxpc3QgPSBzdGF0ZXNfW3N0YXRlXSA9IFtdLCBvcmlnID0gc3RhdGVzW3N0YXRlXTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3JpZy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgZGF0YSA9IG9yaWdbaV07XG4gICAgICAgIGxpc3QucHVzaChuZXcgUnVsZShkYXRhLCBzdGF0ZXMpKTtcbiAgICAgICAgaWYgKGRhdGEuaW5kZW50IHx8IGRhdGEuZGVkZW50KSBoYXNJbmRlbnRhdGlvbiA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHZhciBtb2RlID0ge1xuICAgICAgc3RhcnRTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB7c3RhdGU6IFwic3RhcnRcIiwgcGVuZGluZzogbnVsbCxcbiAgICAgICAgICAgICAgICBsb2NhbDogbnVsbCwgbG9jYWxTdGF0ZTogbnVsbCxcbiAgICAgICAgICAgICAgICBpbmRlbnQ6IGhhc0luZGVudGF0aW9uID8gW10gOiBudWxsfTtcbiAgICAgIH0sXG4gICAgICBjb3B5U3RhdGU6IGZ1bmN0aW9uKHN0YXRlKSB7XG4gICAgICAgIHZhciBzID0ge3N0YXRlOiBzdGF0ZS5zdGF0ZSwgcGVuZGluZzogc3RhdGUucGVuZGluZyxcbiAgICAgICAgICAgICAgICAgbG9jYWw6IHN0YXRlLmxvY2FsLCBsb2NhbFN0YXRlOiBudWxsLFxuICAgICAgICAgICAgICAgICBpbmRlbnQ6IHN0YXRlLmluZGVudCAmJiBzdGF0ZS5pbmRlbnQuc2xpY2UoMCl9O1xuICAgICAgICBpZiAoc3RhdGUubG9jYWxTdGF0ZSlcbiAgICAgICAgICBzLmxvY2FsU3RhdGUgPSBDb2RlTWlycm9yLmNvcHlTdGF0ZShzdGF0ZS5sb2NhbC5tb2RlLCBzdGF0ZS5sb2NhbFN0YXRlKTtcbiAgICAgICAgaWYgKHN0YXRlLnN0YWNrKVxuICAgICAgICAgIHMuc3RhY2sgPSBzdGF0ZS5zdGFjay5zbGljZSgwKTtcbiAgICAgICAgZm9yICh2YXIgcGVycyA9IHN0YXRlLnBlcnNpc3RlbnRTdGF0ZXM7IHBlcnM7IHBlcnMgPSBwZXJzLm5leHQpXG4gICAgICAgICAgcy5wZXJzaXN0ZW50U3RhdGVzID0ge21vZGU6IHBlcnMubW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BlYzogcGVycy5zcGVjLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZTogcGVycy5zdGF0ZSA9PSBzdGF0ZS5sb2NhbFN0YXRlID8gcy5sb2NhbFN0YXRlIDogQ29kZU1pcnJvci5jb3B5U3RhdGUocGVycy5tb2RlLCBwZXJzLnN0YXRlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dDogcy5wZXJzaXN0ZW50U3RhdGVzfTtcbiAgICAgICAgcmV0dXJuIHM7XG4gICAgICB9LFxuICAgICAgdG9rZW46IHRva2VuRnVuY3Rpb24oc3RhdGVzXywgY29uZmlnKSxcbiAgICAgIGlubmVyTW9kZTogZnVuY3Rpb24oc3RhdGUpIHsgcmV0dXJuIHN0YXRlLmxvY2FsICYmIHttb2RlOiBzdGF0ZS5sb2NhbC5tb2RlLCBzdGF0ZTogc3RhdGUubG9jYWxTdGF0ZX07IH0sXG4gICAgICBpbmRlbnQ6IGluZGVudEZ1bmN0aW9uKHN0YXRlc18sIG1ldGEpXG4gICAgfTtcbiAgICBpZiAobWV0YSkgZm9yICh2YXIgcHJvcCBpbiBtZXRhKSBpZiAobWV0YS5oYXNPd25Qcm9wZXJ0eShwcm9wKSlcbiAgICAgIG1vZGVbcHJvcF0gPSBtZXRhW3Byb3BdO1xuICAgIHJldHVybiBtb2RlO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGVuc3VyZVN0YXRlKHN0YXRlcywgbmFtZSkge1xuICAgIGlmICghc3RhdGVzLmhhc093blByb3BlcnR5KG5hbWUpKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5kZWZpbmVkIHN0YXRlIFwiICsgbmFtZSArIFwiIGluIHNpbXBsZSBtb2RlXCIpO1xuICB9XG5cbiAgZnVuY3Rpb24gdG9SZWdleCh2YWwsIGNhcmV0KSB7XG4gICAgaWYgKCF2YWwpIHJldHVybiAvKD86KS87XG4gICAgdmFyIGZsYWdzID0gXCJcIjtcbiAgICBpZiAodmFsIGluc3RhbmNlb2YgUmVnRXhwKSB7XG4gICAgICBpZiAodmFsLmlnbm9yZUNhc2UpIGZsYWdzID0gXCJpXCI7XG4gICAgICB2YWwgPSB2YWwuc291cmNlO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YWwgPSBTdHJpbmcodmFsKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoKGNhcmV0ID09PSBmYWxzZSA/IFwiXCIgOiBcIl5cIikgKyBcIig/OlwiICsgdmFsICsgXCIpXCIsIGZsYWdzKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFzVG9rZW4odmFsKSB7XG4gICAgaWYgKCF2YWwpIHJldHVybiBudWxsO1xuICAgIGlmICh2YWwuYXBwbHkpIHJldHVybiB2YWxcbiAgICBpZiAodHlwZW9mIHZhbCA9PSBcInN0cmluZ1wiKSByZXR1cm4gdmFsLnJlcGxhY2UoL1xcLi9nLCBcIiBcIik7XG4gICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFsLmxlbmd0aDsgaSsrKVxuICAgICAgcmVzdWx0LnB1c2godmFsW2ldICYmIHZhbFtpXS5yZXBsYWNlKC9cXC4vZywgXCIgXCIpKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gUnVsZShkYXRhLCBzdGF0ZXMpIHtcbiAgICBpZiAoZGF0YS5uZXh0IHx8IGRhdGEucHVzaCkgZW5zdXJlU3RhdGUoc3RhdGVzLCBkYXRhLm5leHQgfHwgZGF0YS5wdXNoKTtcbiAgICB0aGlzLnJlZ2V4ID0gdG9SZWdleChkYXRhLnJlZ2V4KTtcbiAgICB0aGlzLnRva2VuID0gYXNUb2tlbihkYXRhLnRva2VuKTtcbiAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICB9XG5cbiAgZnVuY3Rpb24gdG9rZW5GdW5jdGlvbihzdGF0ZXMsIGNvbmZpZykge1xuICAgIHJldHVybiBmdW5jdGlvbihzdHJlYW0sIHN0YXRlKSB7XG4gICAgICBpZiAoc3RhdGUucGVuZGluZykge1xuICAgICAgICB2YXIgcGVuZCA9IHN0YXRlLnBlbmRpbmcuc2hpZnQoKTtcbiAgICAgICAgaWYgKHN0YXRlLnBlbmRpbmcubGVuZ3RoID09IDApIHN0YXRlLnBlbmRpbmcgPSBudWxsO1xuICAgICAgICBzdHJlYW0ucG9zICs9IHBlbmQudGV4dC5sZW5ndGg7XG4gICAgICAgIHJldHVybiBwZW5kLnRva2VuO1xuICAgICAgfVxuXG4gICAgICBpZiAoc3RhdGUubG9jYWwpIHtcbiAgICAgICAgaWYgKHN0YXRlLmxvY2FsLmVuZCAmJiBzdHJlYW0ubWF0Y2goc3RhdGUubG9jYWwuZW5kKSkge1xuICAgICAgICAgIHZhciB0b2sgPSBzdGF0ZS5sb2NhbC5lbmRUb2tlbiB8fCBudWxsO1xuICAgICAgICAgIHN0YXRlLmxvY2FsID0gc3RhdGUubG9jYWxTdGF0ZSA9IG51bGw7XG4gICAgICAgICAgcmV0dXJuIHRvaztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgdG9rID0gc3RhdGUubG9jYWwubW9kZS50b2tlbihzdHJlYW0sIHN0YXRlLmxvY2FsU3RhdGUpLCBtO1xuICAgICAgICAgIGlmIChzdGF0ZS5sb2NhbC5lbmRTY2FuICYmIChtID0gc3RhdGUubG9jYWwuZW5kU2Nhbi5leGVjKHN0cmVhbS5jdXJyZW50KCkpKSlcbiAgICAgICAgICAgIHN0cmVhbS5wb3MgPSBzdHJlYW0uc3RhcnQgKyBtLmluZGV4O1xuICAgICAgICAgIHJldHVybiB0b2s7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIGN1clN0YXRlID0gc3RhdGVzW3N0YXRlLnN0YXRlXTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY3VyU3RhdGUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHJ1bGUgPSBjdXJTdGF0ZVtpXTtcbiAgICAgICAgdmFyIG1hdGNoZXMgPSAoIXJ1bGUuZGF0YS5zb2wgfHwgc3RyZWFtLnNvbCgpKSAmJiBzdHJlYW0ubWF0Y2gocnVsZS5yZWdleCk7XG4gICAgICAgIGlmIChtYXRjaGVzKSB7XG4gICAgICAgICAgaWYgKHJ1bGUuZGF0YS5uZXh0KSB7XG4gICAgICAgICAgICBzdGF0ZS5zdGF0ZSA9IHJ1bGUuZGF0YS5uZXh0O1xuICAgICAgICAgIH0gZWxzZSBpZiAocnVsZS5kYXRhLnB1c2gpIHtcbiAgICAgICAgICAgIChzdGF0ZS5zdGFjayB8fCAoc3RhdGUuc3RhY2sgPSBbXSkpLnB1c2goc3RhdGUuc3RhdGUpO1xuICAgICAgICAgICAgc3RhdGUuc3RhdGUgPSBydWxlLmRhdGEucHVzaDtcbiAgICAgICAgICB9IGVsc2UgaWYgKHJ1bGUuZGF0YS5wb3AgJiYgc3RhdGUuc3RhY2sgJiYgc3RhdGUuc3RhY2subGVuZ3RoKSB7XG4gICAgICAgICAgICBzdGF0ZS5zdGF0ZSA9IHN0YXRlLnN0YWNrLnBvcCgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChydWxlLmRhdGEubW9kZSlcbiAgICAgICAgICAgIGVudGVyTG9jYWxNb2RlKGNvbmZpZywgc3RhdGUsIHJ1bGUuZGF0YS5tb2RlLCBydWxlLnRva2VuKTtcbiAgICAgICAgICBpZiAocnVsZS5kYXRhLmluZGVudClcbiAgICAgICAgICAgIHN0YXRlLmluZGVudC5wdXNoKHN0cmVhbS5pbmRlbnRhdGlvbigpICsgY29uZmlnLmluZGVudFVuaXQpO1xuICAgICAgICAgIGlmIChydWxlLmRhdGEuZGVkZW50KVxuICAgICAgICAgICAgc3RhdGUuaW5kZW50LnBvcCgpO1xuICAgICAgICAgIHZhciB0b2tlbiA9IHJ1bGUudG9rZW5cbiAgICAgICAgICBpZiAodG9rZW4gJiYgdG9rZW4uYXBwbHkpIHRva2VuID0gdG9rZW4obWF0Y2hlcylcbiAgICAgICAgICBpZiAobWF0Y2hlcy5sZW5ndGggPiAyICYmIHJ1bGUudG9rZW4gJiYgdHlwZW9mIHJ1bGUudG9rZW4gIT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgc3RhdGUucGVuZGluZyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDI7IGogPCBtYXRjaGVzLmxlbmd0aDsgaisrKVxuICAgICAgICAgICAgICBpZiAobWF0Y2hlc1tqXSlcbiAgICAgICAgICAgICAgICBzdGF0ZS5wZW5kaW5nLnB1c2goe3RleHQ6IG1hdGNoZXNbal0sIHRva2VuOiBydWxlLnRva2VuW2ogLSAxXX0pO1xuICAgICAgICAgICAgc3RyZWFtLmJhY2tVcChtYXRjaGVzWzBdLmxlbmd0aCAtIChtYXRjaGVzWzFdID8gbWF0Y2hlc1sxXS5sZW5ndGggOiAwKSk7XG4gICAgICAgICAgICByZXR1cm4gdG9rZW5bMF07XG4gICAgICAgICAgfSBlbHNlIGlmICh0b2tlbiAmJiB0b2tlbi5qb2luKSB7XG4gICAgICAgICAgICByZXR1cm4gdG9rZW5bMF07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0b2tlbjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHN0cmVhbS5uZXh0KCk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gY21wKGEsIGIpIHtcbiAgICBpZiAoYSA9PT0gYikgcmV0dXJuIHRydWU7XG4gICAgaWYgKCFhIHx8IHR5cGVvZiBhICE9IFwib2JqZWN0XCIgfHwgIWIgfHwgdHlwZW9mIGIgIT0gXCJvYmplY3RcIikgcmV0dXJuIGZhbHNlO1xuICAgIHZhciBwcm9wcyA9IDA7XG4gICAgZm9yICh2YXIgcHJvcCBpbiBhKSBpZiAoYS5oYXNPd25Qcm9wZXJ0eShwcm9wKSkge1xuICAgICAgaWYgKCFiLmhhc093blByb3BlcnR5KHByb3ApIHx8ICFjbXAoYVtwcm9wXSwgYltwcm9wXSkpIHJldHVybiBmYWxzZTtcbiAgICAgIHByb3BzKys7XG4gICAgfVxuICAgIGZvciAodmFyIHByb3AgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocHJvcCkpIHByb3BzLS07XG4gICAgcmV0dXJuIHByb3BzID09IDA7XG4gIH1cblxuICBmdW5jdGlvbiBlbnRlckxvY2FsTW9kZShjb25maWcsIHN0YXRlLCBzcGVjLCB0b2tlbikge1xuICAgIHZhciBwZXJzO1xuICAgIGlmIChzcGVjLnBlcnNpc3RlbnQpIGZvciAodmFyIHAgPSBzdGF0ZS5wZXJzaXN0ZW50U3RhdGVzOyBwICYmICFwZXJzOyBwID0gcC5uZXh0KVxuICAgICAgaWYgKHNwZWMuc3BlYyA/IGNtcChzcGVjLnNwZWMsIHAuc3BlYykgOiBzcGVjLm1vZGUgPT0gcC5tb2RlKSBwZXJzID0gcDtcbiAgICB2YXIgbW9kZSA9IHBlcnMgPyBwZXJzLm1vZGUgOiBzcGVjLm1vZGUgfHwgQ29kZU1pcnJvci5nZXRNb2RlKGNvbmZpZywgc3BlYy5zcGVjKTtcbiAgICB2YXIgbFN0YXRlID0gcGVycyA/IHBlcnMuc3RhdGUgOiBDb2RlTWlycm9yLnN0YXJ0U3RhdGUobW9kZSk7XG4gICAgaWYgKHNwZWMucGVyc2lzdGVudCAmJiAhcGVycylcbiAgICAgIHN0YXRlLnBlcnNpc3RlbnRTdGF0ZXMgPSB7bW9kZTogbW9kZSwgc3BlYzogc3BlYy5zcGVjLCBzdGF0ZTogbFN0YXRlLCBuZXh0OiBzdGF0ZS5wZXJzaXN0ZW50U3RhdGVzfTtcblxuICAgIHN0YXRlLmxvY2FsU3RhdGUgPSBsU3RhdGU7XG4gICAgc3RhdGUubG9jYWwgPSB7bW9kZTogbW9kZSxcbiAgICAgICAgICAgICAgICAgICBlbmQ6IHNwZWMuZW5kICYmIHRvUmVnZXgoc3BlYy5lbmQpLFxuICAgICAgICAgICAgICAgICAgIGVuZFNjYW46IHNwZWMuZW5kICYmIHNwZWMuZm9yY2VFbmQgIT09IGZhbHNlICYmIHRvUmVnZXgoc3BlYy5lbmQsIGZhbHNlKSxcbiAgICAgICAgICAgICAgICAgICBlbmRUb2tlbjogdG9rZW4gJiYgdG9rZW4uam9pbiA/IHRva2VuW3Rva2VuLmxlbmd0aCAtIDFdIDogdG9rZW59O1xuICB9XG5cbiAgZnVuY3Rpb24gaW5kZXhPZih2YWwsIGFycikge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSBpZiAoYXJyW2ldID09PSB2YWwpIHJldHVybiB0cnVlO1xuICB9XG5cbiAgZnVuY3Rpb24gaW5kZW50RnVuY3Rpb24oc3RhdGVzLCBtZXRhKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHN0YXRlLCB0ZXh0QWZ0ZXIsIGxpbmUpIHtcbiAgICAgIGlmIChzdGF0ZS5sb2NhbCAmJiBzdGF0ZS5sb2NhbC5tb2RlLmluZGVudClcbiAgICAgICAgcmV0dXJuIHN0YXRlLmxvY2FsLm1vZGUuaW5kZW50KHN0YXRlLmxvY2FsU3RhdGUsIHRleHRBZnRlciwgbGluZSk7XG4gICAgICBpZiAoc3RhdGUuaW5kZW50ID09IG51bGwgfHwgc3RhdGUubG9jYWwgfHwgbWV0YS5kb250SW5kZW50U3RhdGVzICYmIGluZGV4T2Yoc3RhdGUuc3RhdGUsIG1ldGEuZG9udEluZGVudFN0YXRlcykgPiAtMSlcbiAgICAgICAgcmV0dXJuIENvZGVNaXJyb3IuUGFzcztcblxuICAgICAgdmFyIHBvcyA9IHN0YXRlLmluZGVudC5sZW5ndGggLSAxLCBydWxlcyA9IHN0YXRlc1tzdGF0ZS5zdGF0ZV07XG4gICAgICBzY2FuOiBmb3IgKDs7KSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcnVsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YXIgcnVsZSA9IHJ1bGVzW2ldO1xuICAgICAgICAgIGlmIChydWxlLmRhdGEuZGVkZW50ICYmIHJ1bGUuZGF0YS5kZWRlbnRJZkxpbmVTdGFydCAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHZhciBtID0gcnVsZS5yZWdleC5leGVjKHRleHRBZnRlcik7XG4gICAgICAgICAgICBpZiAobSAmJiBtWzBdKSB7XG4gICAgICAgICAgICAgIHBvcy0tO1xuICAgICAgICAgICAgICBpZiAocnVsZS5uZXh0IHx8IHJ1bGUucHVzaCkgcnVsZXMgPSBzdGF0ZXNbcnVsZS5uZXh0IHx8IHJ1bGUucHVzaF07XG4gICAgICAgICAgICAgIHRleHRBZnRlciA9IHRleHRBZnRlci5zbGljZShtWzBdLmxlbmd0aCk7XG4gICAgICAgICAgICAgIGNvbnRpbnVlIHNjYW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHBvcyA8IDAgPyAwIDogc3RhdGUuaW5kZW50W3Bvc107XG4gICAgfTtcbiAgfVxufSk7XG4iLCIvLyBDb2RlTWlycm9yLCBjb3B5cmlnaHQgKGMpIGJ5IE1hcmlqbiBIYXZlcmJla2UgYW5kIG90aGVyc1xuLy8gRGlzdHJpYnV0ZWQgdW5kZXIgYW4gTUlUIGxpY2Vuc2U6IGh0dHBzOi8vY29kZW1pcnJvci5uZXQvTElDRU5TRVxuXG4vLyBGYWN0b3Igc3ludGF4IGhpZ2hsaWdodCAtIHNpbXBsZSBtb2RlXG4vL1xuLy8gYnkgRGltYWdlIFNhcGVsa2luIChodHRwczovL2dpdGh1Yi5jb20va2VyYWJyb21zbXUpXG5cbihmdW5jdGlvbihtb2QpIHtcbiAgaWYgKHR5cGVvZiBleHBvcnRzID09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZSA9PSBcIm9iamVjdFwiKSAvLyBDb21tb25KU1xuICAgIG1vZChyZXF1aXJlKFwiLi4vLi4vbGliL2NvZGVtaXJyb3JcIiksIHJlcXVpcmUoXCIuLi8uLi9hZGRvbi9tb2RlL3NpbXBsZVwiKSk7XG4gIGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIC8vIEFNRFxuICAgIGRlZmluZShbXCIuLi8uLi9saWIvY29kZW1pcnJvclwiLCBcIi4uLy4uL2FkZG9uL21vZGUvc2ltcGxlXCJdLCBtb2QpO1xuICBlbHNlIC8vIFBsYWluIGJyb3dzZXIgZW52XG4gICAgbW9kKENvZGVNaXJyb3IpO1xufSkoZnVuY3Rpb24oQ29kZU1pcnJvcikge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICBDb2RlTWlycm9yLmRlZmluZVNpbXBsZU1vZGUoXCJmYWN0b3JcIiwge1xuICAgIC8vIFRoZSBzdGFydCBzdGF0ZSBjb250YWlucyB0aGUgcnVsZXMgdGhhdCBhcmUgaW50aWFsbHkgdXNlZFxuICAgIHN0YXJ0OiBbXG4gICAgICAvLyBjb21tZW50c1xuICAgICAge3JlZ2V4OiAvIz8hLiovLCB0b2tlbjogXCJjb21tZW50XCJ9LFxuICAgICAgLy8gc3RyaW5ncyBcIlwiXCIsIG11bHRpbGluZSAtLT4gc3RhdGVcbiAgICAgIHtyZWdleDogL1wiXCJcIi8sIHRva2VuOiBcInN0cmluZ1wiLCBuZXh0OiBcInN0cmluZzNcIn0sXG4gICAgICB7cmVnZXg6IC8oU1RSSU5HOikoXFxzKS8sIHRva2VuOiBbXCJrZXl3b3JkXCIsIG51bGxdLCBuZXh0OiBcInN0cmluZzJcIn0sXG4gICAgICB7cmVnZXg6IC9cXFMqP1wiLywgdG9rZW46IFwic3RyaW5nXCIsIG5leHQ6IFwic3RyaW5nXCJ9LFxuICAgICAgLy8gbnVtYmVyczogZGVjLCBoZXgsIHVuaWNvZGUsIGJpbiwgZnJhY3Rpb25hbCwgY29tcGxleFxuICAgICAge3JlZ2V4OiAvKD86MHhbXFxkLGEtZl0rKXwoPzowb1swLTddKyl8KD86MGJbMCwxXSspfCg/OlxcLT9cXGQrLj9cXGQqKSg/PVxccykvLCB0b2tlbjogXCJudW1iZXJcIn0sXG4gICAgICAvL3tyZWdleDogL1srLV0/L30gLy9mcmFjdGlvbmFsXG4gICAgICAvLyBkZWZpbml0aW9uOiBkZWZpbmluZyB3b3JkLCBkZWZpbmVkIHdvcmQsIGV0Y1xuICAgICAge3JlZ2V4OiAvKCg/OkdFTkVSSUMpfFxcOj9cXDopKFxccyspKFxcUyspKFxccyspKFxcKCkvLCB0b2tlbjogW1wia2V5d29yZFwiLCBudWxsLCBcImRlZlwiLCBudWxsLCBcImJyYWNrZXRcIl0sIG5leHQ6IFwic3RhY2tcIn0sXG4gICAgICAvLyBtZXRob2QgZGVmaW5pdGlvbjogZGVmaW5pbmcgd29yZCwgdHlwZSwgZGVmaW5lZCB3b3JkLCBldGNcbiAgICAgIHtyZWdleDogLyhNXFw6KShcXHMrKShcXFMrKShcXHMrKShcXFMrKS8sIHRva2VuOiBbXCJrZXl3b3JkXCIsIG51bGwsIFwiZGVmXCIsIG51bGwsIFwidGFnXCJdfSxcbiAgICAgIC8vIHZvY2FidWxhcnkgdXNpbmcgLS0+IHN0YXRlXG4gICAgICB7cmVnZXg6IC9VU0lOR1xcOi8sIHRva2VuOiBcImtleXdvcmRcIiwgbmV4dDogXCJ2b2NhYnVsYXJ5XCJ9LFxuICAgICAgLy8gdm9jYWJ1bGFyeSBkZWZpbml0aW9uL3VzZVxuICAgICAge3JlZ2V4OiAvKFVTRVxcOnxJTlxcOikoXFxzKykoXFxTKykoPz1cXHN8JCkvLCB0b2tlbjogW1wia2V5d29yZFwiLCBudWxsLCBcInRhZ1wiXX0sXG4gICAgICAvLyBkZWZpbml0aW9uOiBhIGRlZmluaW5nIHdvcmQsIGRlZmluZWQgd29yZFxuICAgICAge3JlZ2V4OiAvKFxcUytcXDopKFxccyspKFxcUyspKD89XFxzfCQpLywgdG9rZW46IFtcImtleXdvcmRcIiwgbnVsbCwgXCJkZWZcIl19LFxuICAgICAgLy8gXCJrZXl3b3Jkc1wiLCBpbmNsLiA7IHQgZiAuIFsgXSB7IH0gZGVmaW5pbmcgd29yZHNcbiAgICAgIHtyZWdleDogLyg/Ojt8XFxcXHx0fGZ8aWZ8bG9vcHx3aGlsZXx1bnRpbHxkb3xQUklWQVRFPnw8UFJJVkFURXxcXC58XFxTKlxcW3xcXF18XFxTKlxce3xcXH0pKD89XFxzfCQpLywgdG9rZW46IFwia2V5d29yZFwifSxcbiAgICAgIC8vIDxjb25zdHJ1Y3RvcnM+IGFuZCB0aGUgbGlrZVxuICAgICAge3JlZ2V4OiAvXFxTK1tcXCk+XFwuXFwqXFw/XSsoPz1cXHN8JCkvLCB0b2tlbjogXCJidWlsdGluXCJ9LFxuICAgICAge3JlZ2V4OiAvW1xcKT48XStcXFMrKD89XFxzfCQpLywgdG9rZW46IFwiYnVpbHRpblwifSxcbiAgICAgIC8vIG9wZXJhdG9yc1xuICAgICAge3JlZ2V4OiAvKD86W1xcK1xcLVxcPVxcL1xcKjw+XSkoPz1cXHN8JCkvLCB0b2tlbjogXCJrZXl3b3JkXCJ9LFxuICAgICAgLy8gYW55IGlkICg/KVxuICAgICAge3JlZ2V4OiAvXFxTKy8sIHRva2VuOiBcInZhcmlhYmxlXCJ9LFxuICAgICAge3JlZ2V4OiAvXFxzK3wuLywgdG9rZW46IG51bGx9XG4gICAgXSxcbiAgICB2b2NhYnVsYXJ5OiBbXG4gICAgICB7cmVnZXg6IC87LywgdG9rZW46IFwia2V5d29yZFwiLCBuZXh0OiBcInN0YXJ0XCJ9LFxuICAgICAge3JlZ2V4OiAvXFxTKy8sIHRva2VuOiBcInRhZ1wifSxcbiAgICAgIHtyZWdleDogL1xccyt8Li8sIHRva2VuOiBudWxsfVxuICAgIF0sXG4gICAgc3RyaW5nOiBbXG4gICAgICB7cmVnZXg6IC8oPzpbXlxcXFxdfFxcXFwuKSo/XCIvLCB0b2tlbjogXCJzdHJpbmdcIiwgbmV4dDogXCJzdGFydFwifSxcbiAgICAgIHtyZWdleDogLy4qLywgdG9rZW46IFwic3RyaW5nXCJ9XG4gICAgXSxcbiAgICBzdHJpbmcyOiBbXG4gICAgICB7cmVnZXg6IC9eOy8sIHRva2VuOiBcImtleXdvcmRcIiwgbmV4dDogXCJzdGFydFwifSxcbiAgICAgIHtyZWdleDogLy4qLywgdG9rZW46IFwic3RyaW5nXCJ9XG4gICAgXSxcbiAgICBzdHJpbmczOiBbXG4gICAgICB7cmVnZXg6IC8oPzpbXlxcXFxdfFxcXFwuKSo/XCJcIlwiLywgdG9rZW46IFwic3RyaW5nXCIsIG5leHQ6IFwic3RhcnRcIn0sXG4gICAgICB7cmVnZXg6IC8uKi8sIHRva2VuOiBcInN0cmluZ1wifVxuICAgIF0sXG4gICAgc3RhY2s6IFtcbiAgICAgIHtyZWdleDogL1xcKS8sIHRva2VuOiBcImJyYWNrZXRcIiwgbmV4dDogXCJzdGFydFwifSxcbiAgICAgIHtyZWdleDogLy0tLywgdG9rZW46IFwiYnJhY2tldFwifSxcbiAgICAgIHtyZWdleDogL1xcUysvLCB0b2tlbjogXCJtZXRhXCJ9LFxuICAgICAge3JlZ2V4OiAvXFxzK3wuLywgdG9rZW46IG51bGx9XG4gICAgXSxcbiAgICAvLyBUaGUgbWV0YSBwcm9wZXJ0eSBjb250YWlucyBnbG9iYWwgaW5mb3JtYXRpb24gYWJvdXQgdGhlIG1vZGUuIEl0XG4gICAgLy8gY2FuIGNvbnRhaW4gcHJvcGVydGllcyBsaWtlIGxpbmVDb21tZW50LCB3aGljaCBhcmUgc3VwcG9ydGVkIGJ5XG4gICAgLy8gYWxsIG1vZGVzLCBhbmQgYWxzbyBkaXJlY3RpdmVzIGxpa2UgZG9udEluZGVudFN0YXRlcywgd2hpY2ggYXJlXG4gICAgLy8gc3BlY2lmaWMgdG8gc2ltcGxlIG1vZGVzLlxuICAgIG1ldGE6IHtcbiAgICAgIGRvbnRJbmRlbnRTdGF0ZXM6IFtcInN0YXJ0XCIsIFwidm9jYWJ1bGFyeVwiLCBcInN0cmluZ1wiLCBcInN0cmluZzNcIiwgXCJzdGFja1wiXSxcbiAgICAgIGxpbmVDb21tZW50OiBbIFwiIVwiLCBcIiMhXCIgXVxuICAgIH1cbiAgfSk7XG5cbiAgQ29kZU1pcnJvci5kZWZpbmVNSU1FKFwidGV4dC94LWZhY3RvclwiLCBcImZhY3RvclwiKTtcbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==